(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function rs(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const Ct={},fi=[],oe=()=>{},lh=()=>!1,jr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ns=e=>e.startsWith("onUpdate:"),Dt=Object.assign,ss=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},hh=Object.prototype.hasOwnProperty,pt=(e,t)=>hh.call(e,t),st=Array.isArray,di=e=>Yr(e)==="[object Map]",no=e=>Yr(e)==="[object Set]",at=e=>typeof e=="function",Mt=e=>typeof e=="string",Ne=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",so=e=>(Et(e)||at(e))&&at(e.then)&&at(e.catch),ao=Object.prototype.toString,Yr=e=>ao.call(e),ch=e=>Yr(e).slice(8,-1),oo=e=>Yr(e)==="[object Object]",as=e=>Mt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ui=rs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$r=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},uh=/-(\w)/g,re=$r(e=>e.replace(uh,(t,i)=>i?i.toUpperCase():"")),fh=/\B([A-Z])/g,Ze=$r(e=>e.replace(fh,"-$1").toLowerCase()),Vr=$r(e=>e.charAt(0).toUpperCase()+e.slice(1)),ln=$r(e=>e?`on${Vr(e)}`:""),Ge=(e,t)=>!Object.is(e,t),hn=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},lo=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},dh=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ns;const Xr=()=>Ns||(Ns=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function os(e){if(st(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=Mt(r)?mh(r):os(r);if(n)for(const s in n)t[s]=n[s]}return t}else if(Mt(e)||Et(e))return e}const gh=/;(?![^(]*\))/g,ph=/:([^]+)/,vh=/\/\*[^]*?\*\//g;function mh(e){const t={};return e.replace(vh,"").split(gh).forEach(i=>{if(i){const r=i.split(ph);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function qr(e){let t="";if(Mt(e))t=e;else if(st(e))for(let i=0;i<e.length;i++){const r=qr(e[i]);r&&(t+=r+" ")}else if(Et(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const _h="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yh=rs(_h);function ho(e){return!!e||e===""}const co=e=>!!(e&&e.__v_isRef===!0),Gi=e=>Mt(e)?e:e==null?"":st(e)||Et(e)&&(e.toString===ao||!at(e.toString))?co(e)?Gi(e.value):JSON.stringify(e,uo,2):String(e),uo=(e,t)=>co(t)?uo(e,t.value):di(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n],s)=>(i[cn(r,s)+" =>"]=n,i),{})}:no(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>cn(i))}:Ne(t)?cn(t):Et(t)&&!st(t)&&!oo(t)?String(t):t,cn=(e,t="")=>{var i;return Ne(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class bh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!t&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=zt;try{return zt=this,t()}finally{zt=i}}}on(){zt=this}off(){zt=this.parent}stop(t){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function fo(){return zt}function Sh(e,t=!1){zt&&zt.cleanups.push(e)}let St;const un=new WeakSet;class go{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,un.has(this)&&(un.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fs(this),mo(this);const t=St,i=le;St=this,le=!0;try{return this.fn()}finally{_o(this),St=t,le=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)cs(t);this.deps=this.depsTail=void 0,Fs(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?un.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){In(this)&&this.run()}get dirty(){return In(this)}}let po=0,ji,Yi;function vo(e,t=!1){if(e.flags|=8,t){e.next=Yi,Yi=e;return}e.next=ji,ji=e}function ls(){po++}function hs(){if(--po>0)return;if(Yi){let t=Yi;for(Yi=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;ji;){let t=ji;for(ji=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=i}}if(e)throw e}function mo(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function _o(e){let t,i=e.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),cs(r),Ch(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=i}function In(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(yo(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function yo(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===tr))return;e.globalVersion=tr;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!In(e)){e.flags&=-3;return}const i=St,r=le;St=e,le=!0;try{mo(e);const n=e.fn(e._value);(t.version===0||Ge(n,e._value))&&(e._value=n,t.version++)}catch(n){throw t.version++,n}finally{St=i,le=r,_o(e),e.flags&=-3}}function cs(e,t=!1){const{dep:i,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)cs(s,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function Ch(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let le=!0;const bo=[];function Fe(){bo.push(le),le=!1}function He(){const e=bo.pop();le=e===void 0?!0:e}function Fs(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=St;St=void 0;try{t()}finally{St=i}}}let tr=0;class wh{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class us{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!St||!le||St===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==St)i=this.activeLink=new wh(St,this),St.deps?(i.prevDep=St.depsTail,St.depsTail.nextDep=i,St.depsTail=i):St.deps=St.depsTail=i,So(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=St.depsTail,i.nextDep=void 0,St.depsTail.nextDep=i,St.depsTail=i,St.deps===i&&(St.deps=r)}return i}trigger(t){this.version++,tr++,this.notify(t)}notify(t){ls();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{hs()}}}function So(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)So(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Dn=new WeakMap,Xe=Symbol(""),Gn=Symbol(""),er=Symbol("");function Ft(e,t,i){if(le&&St){let r=Dn.get(e);r||Dn.set(e,r=new Map);let n=r.get(i);n||(r.set(i,n=new us),n.map=r,n.key=i),n.track()}}function we(e,t,i,r,n,s){const a=Dn.get(e);if(!a){tr++;return}const o=l=>{l&&l.trigger()};if(ls(),t==="clear")a.forEach(o);else{const l=st(e),h=l&&as(i);if(l&&i==="length"){const c=Number(r);a.forEach((u,f)=>{(f==="length"||f===er||!Ne(f)&&f>=c)&&o(u)})}else switch((i!==void 0||a.has(void 0))&&o(a.get(i)),h&&o(a.get(er)),t){case"add":l?h&&o(a.get("length")):(o(a.get(Xe)),di(e)&&o(a.get(Gn)));break;case"delete":l||(o(a.get(Xe)),di(e)&&o(a.get(Gn)));break;case"set":di(e)&&o(a.get(Xe));break}}hs()}function si(e){const t=ft(e);return t===e?t:(Ft(t,"iterate",er),ie(e)?t:t.map(Ht))}function Kr(e){return Ft(e=ft(e),"iterate",er),e}const xh={__proto__:null,[Symbol.iterator](){return fn(this,Symbol.iterator,Ht)},concat(...e){return si(this).concat(...e.map(t=>st(t)?si(t):t))},entries(){return fn(this,"entries",e=>(e[1]=Ht(e[1]),e))},every(e,t){return _e(this,"every",e,t,void 0,arguments)},filter(e,t){return _e(this,"filter",e,t,i=>i.map(Ht),arguments)},find(e,t){return _e(this,"find",e,t,Ht,arguments)},findIndex(e,t){return _e(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return _e(this,"findLast",e,t,Ht,arguments)},findLastIndex(e,t){return _e(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return _e(this,"forEach",e,t,void 0,arguments)},includes(...e){return dn(this,"includes",e)},indexOf(...e){return dn(this,"indexOf",e)},join(e){return si(this).join(e)},lastIndexOf(...e){return dn(this,"lastIndexOf",e)},map(e,t){return _e(this,"map",e,t,void 0,arguments)},pop(){return Ai(this,"pop")},push(...e){return Ai(this,"push",e)},reduce(e,...t){return Hs(this,"reduce",e,t)},reduceRight(e,...t){return Hs(this,"reduceRight",e,t)},shift(){return Ai(this,"shift")},some(e,t){return _e(this,"some",e,t,void 0,arguments)},splice(...e){return Ai(this,"splice",e)},toReversed(){return si(this).toReversed()},toSorted(e){return si(this).toSorted(e)},toSpliced(...e){return si(this).toSpliced(...e)},unshift(...e){return Ai(this,"unshift",e)},values(){return fn(this,"values",Ht)}};function fn(e,t,i){const r=Kr(e),n=r[t]();return r!==e&&!ie(e)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=i(s.value)),s}),n}const Eh=Array.prototype;function _e(e,t,i,r,n,s){const a=Kr(e),o=a!==e&&!ie(e),l=a[t];if(l!==Eh[t]){const u=l.apply(e,s);return o?Ht(u):u}let h=i;a!==e&&(o?h=function(u,f){return i.call(this,Ht(u),f,e)}:i.length>2&&(h=function(u,f){return i.call(this,u,f,e)}));const c=l.call(a,h,r);return o&&n?n(c):c}function Hs(e,t,i,r){const n=Kr(e);let s=i;return n!==e&&(ie(e)?i.length>3&&(s=function(a,o,l){return i.call(this,a,o,l,e)}):s=function(a,o,l){return i.call(this,a,Ht(o),l,e)}),n[t](s,...r)}function dn(e,t,i){const r=ft(e);Ft(r,"iterate",er);const n=r[t](...i);return(n===-1||n===!1)&&ps(i[0])?(i[0]=ft(i[0]),r[t](...i)):n}function Ai(e,t,i=[]){Fe(),ls();const r=ft(e)[t].apply(e,i);return hs(),He(),r}const Ph=rs("__proto__,__v_isRef,__isVue"),Co=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ne));function Th(e){Ne(e)||(e=String(e));const t=ft(this);return Ft(t,"has",e),t.hasOwnProperty(e)}class wo{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){if(i==="__v_skip")return t.__v_skip;const n=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return s;if(i==="__v_raw")return r===(n?s?Nh:To:s?Po:Eo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=st(t);if(!n){let l;if(a&&(l=xh[i]))return l;if(i==="hasOwnProperty")return Th}const o=Reflect.get(t,i,Bt(t)?t:r);return(Ne(i)?Co.has(i):Ph(i))||(n||Ft(t,"get",i),s)?o:Bt(o)?a&&as(i)?o:o.value:Et(o)?n?ds(o):xi(o):o}}class xo extends wo{constructor(t=!1){super(!1,t)}set(t,i,r,n){let s=t[i];if(!this._isShallow){const l=Ke(s);if(!ie(r)&&!Ke(r)&&(s=ft(s),r=ft(r)),!st(t)&&Bt(s)&&!Bt(r))return l?!1:(s.value=r,!0)}const a=st(t)&&as(i)?Number(i)<t.length:pt(t,i),o=Reflect.set(t,i,r,Bt(t)?t:n);return t===ft(n)&&(a?Ge(r,s)&&we(t,"set",i,r):we(t,"add",i,r)),o}deleteProperty(t,i){const r=pt(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&r&&we(t,"delete",i,void 0),n}has(t,i){const r=Reflect.has(t,i);return(!Ne(i)||!Co.has(i))&&Ft(t,"has",i),r}ownKeys(t){return Ft(t,"iterate",st(t)?"length":Xe),Reflect.ownKeys(t)}}class Ah extends wo{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Rh=new xo,kh=new Ah,Mh=new xo(!0);const Nn=e=>e,dr=e=>Reflect.getPrototypeOf(e);function Oh(e,t,i){return function(...r){const n=this.__v_raw,s=ft(n),a=di(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=n[e](...r),c=i?Nn:t?Fn:Ht;return!t&&Ft(s,"iterate",l?Gn:Xe),{next(){const{value:u,done:f}=h.next();return f?{value:u,done:f}:{value:o?[c(u[0]),c(u[1])]:c(u),done:f}},[Symbol.iterator](){return this}}}}function gr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Lh(e,t){const i={get(n){const s=this.__v_raw,a=ft(s),o=ft(n);e||(Ge(n,o)&&Ft(a,"get",n),Ft(a,"get",o));const{has:l}=dr(a),h=t?Nn:e?Fn:Ht;if(l.call(a,n))return h(s.get(n));if(l.call(a,o))return h(s.get(o));s!==a&&s.get(n)},get size(){const n=this.__v_raw;return!e&&Ft(ft(n),"iterate",Xe),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,a=ft(s),o=ft(n);return e||(Ge(n,o)&&Ft(a,"has",n),Ft(a,"has",o)),n===o?s.has(n):s.has(n)||s.has(o)},forEach(n,s){const a=this,o=a.__v_raw,l=ft(o),h=t?Nn:e?Fn:Ht;return!e&&Ft(l,"iterate",Xe),o.forEach((c,u)=>n.call(s,h(c),h(u),a))}};return Dt(i,e?{add:gr("add"),set:gr("set"),delete:gr("delete"),clear:gr("clear")}:{add(n){!t&&!ie(n)&&!Ke(n)&&(n=ft(n));const s=ft(this);return dr(s).has.call(s,n)||(s.add(n),we(s,"add",n,n)),this},set(n,s){!t&&!ie(s)&&!Ke(s)&&(s=ft(s));const a=ft(this),{has:o,get:l}=dr(a);let h=o.call(a,n);h||(n=ft(n),h=o.call(a,n));const c=l.call(a,n);return a.set(n,s),h?Ge(s,c)&&we(a,"set",n,s):we(a,"add",n,s),this},delete(n){const s=ft(this),{has:a,get:o}=dr(s);let l=a.call(s,n);l||(n=ft(n),l=a.call(s,n)),o&&o.call(s,n);const h=s.delete(n);return l&&we(s,"delete",n,void 0),h},clear(){const n=ft(this),s=n.size!==0,a=n.clear();return s&&we(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=Oh(n,e,t)}),i}function fs(e,t){const i=Lh(e,t);return(r,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(pt(i,n)&&n in r?i:r,n,s)}const Ih={get:fs(!1,!1)},Dh={get:fs(!1,!0)},Gh={get:fs(!0,!1)};const Eo=new WeakMap,Po=new WeakMap,To=new WeakMap,Nh=new WeakMap;function Fh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hh(e){return e.__v_skip||!Object.isExtensible(e)?0:Fh(ch(e))}function xi(e){return Ke(e)?e:gs(e,!1,Rh,Ih,Eo)}function Ao(e){return gs(e,!1,Mh,Dh,Po)}function ds(e){return gs(e,!0,kh,Gh,To)}function gs(e,t,i,r,n){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const a=Hh(e);if(a===0)return e;const o=new Proxy(e,a===2?r:i);return n.set(e,o),o}function gi(e){return Ke(e)?gi(e.__v_raw):!!(e&&e.__v_isReactive)}function Ke(e){return!!(e&&e.__v_isReadonly)}function ie(e){return!!(e&&e.__v_isShallow)}function ps(e){return e?!!e.__v_raw:!1}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function Bh(e){return!pt(e,"__v_skip")&&Object.isExtensible(e)&&lo(e,"__v_skip",!0),e}const Ht=e=>Et(e)?xi(e):e,Fn=e=>Et(e)?ds(e):e;function Bt(e){return e?e.__v_isRef===!0:!1}function de(e){return Ro(e,!1)}function Qe(e){return Ro(e,!0)}function Ro(e,t){return Bt(e)?e:new Wh(e,t)}class Wh{constructor(t,i){this.dep=new us,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:ft(t),this._value=i?t:Ht(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,r=this.__v_isShallow||ie(t)||Ke(t);t=r?t:ft(t),Ge(t,i)&&(this._rawValue=t,this._value=r?t:Ht(t),this.dep.trigger())}}function xe(e){return Bt(e)?e.value:e}function pi(e){return at(e)?e():xe(e)}const zh={get:(e,t,i)=>t==="__v_raw"?e:xe(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return Bt(n)&&!Bt(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function ko(e){return gi(e)?e:new Proxy(e,zh)}class Uh{constructor(t,i,r){this.fn=t,this.setter=i,this._value=void 0,this.dep=new us(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=tr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return vo(this,!0),!0}get value(){const t=this.dep.track();return yo(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function jh(e,t,i=!1){let r,n;return at(e)?r=e:(r=e.get,n=e.set),new Uh(r,n,i)}const pr={},Ir=new WeakMap;let Ve;function Yh(e,t=!1,i=Ve){if(i){let r=Ir.get(i);r||Ir.set(i,r=[]),r.push(e)}}function $h(e,t,i=Ct){const{immediate:r,deep:n,once:s,scheduler:a,augmentJob:o,call:l}=i,h=w=>n?w:ie(w)||n===!1||n===0?De(w,1):De(w);let c,u,f,d,g=!1,_=!1;if(Bt(e)?(u=()=>e.value,g=ie(e)):gi(e)?(u=()=>h(e),g=!0):st(e)?(_=!0,g=e.some(w=>gi(w)||ie(w)),u=()=>e.map(w=>{if(Bt(w))return w.value;if(gi(w))return h(w);if(at(w))return l?l(w,2):w()})):at(e)?t?u=l?()=>l(e,2):e:u=()=>{if(f){Fe();try{f()}finally{He()}}const w=Ve;Ve=c;try{return l?l(e,3,[d]):e(d)}finally{Ve=w}}:u=oe,t&&n){const w=u,A=n===!0?1/0:n;u=()=>De(w(),A)}const y=fo(),E=()=>{c.stop(),y&&y.active&&ss(y.effects,c)};if(s&&t){const w=t;t=(...A)=>{w(...A),E()}}let b=_?new Array(e.length).fill(pr):pr;const S=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(t){const A=c.run();if(n||g||(_?A.some((R,D)=>Ge(R,b[D])):Ge(A,b))){f&&f();const R=Ve;Ve=c;try{const D=[A,b===pr?void 0:_&&b[0]===pr?[]:b,d];l?l(t,3,D):t(...D),b=A}finally{Ve=R}}}else c.run()};return o&&o(S),c=new go(u),c.scheduler=a?()=>a(S,!1):S,d=w=>Yh(w,!1,c),f=c.onStop=()=>{const w=Ir.get(c);if(w){if(l)l(w,4);else for(const A of w)A();Ir.delete(c)}},t?r?S(!0):b=c.run():a?a(S.bind(null,!0),!0):c.run(),E.pause=c.pause.bind(c),E.resume=c.resume.bind(c),E.stop=E,E}function De(e,t=1/0,i){if(t<=0||!Et(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,Bt(e))De(e.value,t,i);else if(st(e))for(let r=0;r<e.length;r++)De(e[r],t,i);else if(no(e)||di(e))e.forEach(r=>{De(r,t,i)});else if(oo(e)){for(const r in e)De(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&De(e[r],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lr(e,t,i,r){try{return r?e(...r):e()}catch(n){Qr(n,t,i)}}function ve(e,t,i,r){if(at(e)){const n=lr(e,t,i,r);return n&&so(n)&&n.catch(s=>{Qr(s,t,i)}),n}if(st(e)){const n=[];for(let s=0;s<e.length;s++)n.push(ve(e[s],t,i,r));return n}}function Qr(e,t,i,r=!0){const n=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Ct;if(t){let o=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,l,h)===!1)return}o=o.parent}if(s){Fe(),lr(s,null,10,[e,l,h]),He();return}}Vh(e,i,n,r,a)}function Vh(e,t,i,r=!0,n=!1){if(n)throw e;console.error(e)}const Ut=[];let ge=-1;const vi=[];let Oe=null,hi=0;const Mo=Promise.resolve();let Dr=null;function Oo(e){const t=Dr||Mo;return e?t.then(this?e.bind(this):e):t}function Xh(e){let t=ge+1,i=Ut.length;for(;t<i;){const r=t+i>>>1,n=Ut[r],s=ir(n);s<e||s===e&&n.flags&2?t=r+1:i=r}return t}function vs(e){if(!(e.flags&1)){const t=ir(e),i=Ut[Ut.length-1];!i||!(e.flags&2)&&t>=ir(i)?Ut.push(e):Ut.splice(Xh(t),0,e),e.flags|=1,Lo()}}function Lo(){Dr||(Dr=Mo.then(Do))}function qh(e){st(e)?vi.push(...e):Oe&&e.id===-1?Oe.splice(hi+1,0,e):e.flags&1||(vi.push(e),e.flags|=1),Lo()}function Bs(e,t,i=ge+1){for(;i<Ut.length;i++){const r=Ut[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ut.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Io(e){if(vi.length){const t=[...new Set(vi)].sort((i,r)=>ir(i)-ir(r));if(vi.length=0,Oe){Oe.push(...t);return}for(Oe=t,hi=0;hi<Oe.length;hi++){const i=Oe[hi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Oe=null,hi=0}}const ir=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Do(e){const t=oe;try{for(ge=0;ge<Ut.length;ge++){const i=Ut[ge];i&&!(i.flags&8)&&(i.flags&4&&(i.flags&=-2),lr(i,i.i,i.i?15:14),i.flags&4||(i.flags&=-2))}}finally{for(;ge<Ut.length;ge++){const i=Ut[ge];i&&(i.flags&=-2)}ge=-1,Ut.length=0,Io(),Dr=null,(Ut.length||vi.length)&&Do()}}let ee=null,Go=null;function Gr(e){const t=ee;return ee=e,Go=e&&e.type.__scopeId||null,t}function Tr(e,t=ee,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&Ks(-1);const s=Gr(t);let a;try{a=e(...n)}finally{Gr(s),r._d&&Ks(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Ue(e,t,i,r){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Fe(),ve(l,i,8,[e.el,o,e,t]),He())}}const Kh=Symbol("_vte"),Qh=e=>e.__isTeleport;function ms(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ms(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Jr(e,t){return at(e)?(()=>Dt({name:e.name},t,{setup:e}))():e}function No(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Nr(e,t,i,r,n=!1){if(st(e)){e.forEach((g,_)=>Nr(g,t&&(st(t)?t[_]:t),i,r,n));return}if($i(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Nr(e,t,i,r.component.subTree);return}const s=r.shapeFlag&4?xs(r.component):r.el,a=n?null:s,{i:o,r:l}=e,h=t&&t.r,c=o.refs===Ct?o.refs={}:o.refs,u=o.setupState,f=ft(u),d=u===Ct?()=>!1:g=>pt(f,g);if(h!=null&&h!==l&&(Mt(h)?(c[h]=null,d(h)&&(u[h]=null)):Bt(h)&&(h.value=null)),at(l))lr(l,o,12,[a,c]);else{const g=Mt(l),_=Bt(l);if(g||_){const y=()=>{if(e.f){const E=g?d(l)?u[l]:c[l]:l.value;n?st(E)&&ss(E,s):st(E)?E.includes(s)||E.push(s):g?(c[l]=[s],d(l)&&(u[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else g?(c[l]=a,d(l)&&(u[l]=a)):_&&(l.value=a,e.k&&(c[e.k]=a))};a?(y.id=-1,Xt(y,i)):y()}}}Xr().requestIdleCallback;Xr().cancelIdleCallback;const $i=e=>!!e.type.__asyncLoader,Fo=e=>e.type.__isKeepAlive;function Jh(e,t){Ho(e,"a",t)}function Zh(e,t){Ho(e,"da",t)}function Ho(e,t,i=Gt){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Zr(t,r,i),i){let n=i.parent;for(;n&&n.parent;)Fo(n.parent.vnode)&&tc(r,t,i,n),n=n.parent}}function tc(e,t,i,r){const n=Zr(t,e,r,!0);ys(()=>{ss(r[t],n)},i)}function Zr(e,t,i=Gt,r=!1){if(i){const n=i[e]||(i[e]=[]),s=t.__weh||(t.__weh=(...a)=>{Fe();const o=cr(i),l=ve(t,i,e,a);return o(),He(),l});return r?n.unshift(s):n.push(s),s}}const Pe=e=>(t,i=Gt)=>{(!nr||e==="sp")&&Zr(e,(...r)=>t(...r),i)},ec=Pe("bm"),hr=Pe("m"),ic=Pe("bu"),_s=Pe("u"),Bo=Pe("bum"),ys=Pe("um"),rc=Pe("sp"),nc=Pe("rtg"),sc=Pe("rtc");function ac(e,t=Gt){Zr("ec",e,t)}const Wo="components";function ai(e,t){return lc(Wo,e,!0,t)||e}const oc=Symbol.for("v-ndc");function lc(e,t,i=!0,r=!1){const n=ee||Gt;if(n){const s=n.type;if(e===Wo){const o=Kc(s,!1);if(o&&(o===t||o===re(t)||o===Vr(re(t))))return s}const a=Ws(n[e]||s[e],t)||Ws(n.appContext[e],t);return!a&&r?s:a}}function Ws(e,t){return e&&(e[t]||e[re(t)]||e[Vr(re(t))])}function zs(e,t,i,r){let n;const s=i&&i[r],a=st(e);if(a||Mt(e)){const o=a&&gi(e);let l=!1;o&&(l=!ie(e),e=Kr(e)),n=new Array(e.length);for(let h=0,c=e.length;h<c;h++)n[h]=t(l?Ht(e[h]):e[h],h,void 0,s&&s[h])}else if(typeof e=="number"){n=new Array(e);for(let o=0;o<e;o++)n[o]=t(o+1,o,void 0,s&&s[o])}else if(Et(e))if(e[Symbol.iterator])n=Array.from(e,(o,l)=>t(o,l,void 0,s&&s[l]));else{const o=Object.keys(e);n=new Array(o.length);for(let l=0,h=o.length;l<h;l++){const c=o[l];n[l]=t(e[c],c,l,s&&s[l])}}else n=[];return i&&(i[r]=n),n}const Hn=e=>e?ol(e)?xs(e):Hn(e.parent):null,Vi=Dt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Hn(e.parent),$root:e=>Hn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bs(e),$forceUpdate:e=>e.f||(e.f=()=>{vs(e.update)}),$nextTick:e=>e.n||(e.n=Oo.bind(e.proxy)),$watch:e=>Rc.bind(e)}),gn=(e,t)=>e!==Ct&&!e.__isScriptSetup&&pt(e,t),hc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return s[t]}else{if(gn(r,t))return a[t]=1,r[t];if(n!==Ct&&pt(n,t))return a[t]=2,n[t];if((h=e.propsOptions[0])&&pt(h,t))return a[t]=3,s[t];if(i!==Ct&&pt(i,t))return a[t]=4,i[t];Bn&&(a[t]=0)}}const c=Vi[t];let u,f;if(c)return t==="$attrs"&&Ft(e.attrs,"get",""),c(e);if((u=o.__cssModules)&&(u=u[t]))return u;if(i!==Ct&&pt(i,t))return a[t]=4,i[t];if(f=l.config.globalProperties,pt(f,t))return f[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:s}=e;return gn(n,t)?(n[t]=i,!0):r!==Ct&&pt(r,t)?(r[t]=i,!0):pt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:s}},a){let o;return!!i[a]||e!==Ct&&pt(e,a)||gn(t,a)||(o=s[0])&&pt(o,a)||pt(r,a)||pt(Vi,a)||pt(n.config.globalProperties,a)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:pt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Us(e){return st(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Bn=!0;function cc(e){const t=bs(e),i=e.proxy,r=e.ctx;Bn=!1,t.beforeCreate&&js(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:u,mounted:f,beforeUpdate:d,updated:g,activated:_,deactivated:y,beforeDestroy:E,beforeUnmount:b,destroyed:S,unmounted:w,render:A,renderTracked:R,renderTriggered:D,errorCaptured:L,serverPrefetch:H,expose:W,inheritAttrs:Y,components:et,directives:q,filters:lt}=t;if(h&&uc(h,r,null),a)for(const j in a){const K=a[j];at(K)&&(r[j]=K.bind(i))}if(n){const j=n.call(i,i);Et(j)&&(e.data=xi(j))}if(Bn=!0,s)for(const j in s){const K=s[j],ot=at(K)?K.bind(i,i):at(K.get)?K.get.bind(i,i):oe,tt=!at(K)&&at(K.set)?K.set.bind(i):oe,rt=jt({get:ot,set:tt});Object.defineProperty(r,j,{enumerable:!0,configurable:!0,get:()=>rt.value,set:ht=>rt.value=ht})}if(o)for(const j in o)zo(o[j],r,i,j);if(l){const j=at(l)?l.call(i):l;Reflect.ownKeys(j).forEach(K=>{Ar(K,j[K])})}c&&js(c,e,"c");function Z(j,K){st(K)?K.forEach(ot=>j(ot.bind(i))):K&&j(K.bind(i))}if(Z(ec,u),Z(hr,f),Z(ic,d),Z(_s,g),Z(Jh,_),Z(Zh,y),Z(ac,L),Z(sc,R),Z(nc,D),Z(Bo,b),Z(ys,w),Z(rc,H),st(W))if(W.length){const j=e.exposed||(e.exposed={});W.forEach(K=>{Object.defineProperty(j,K,{get:()=>i[K],set:ot=>i[K]=ot})})}else e.exposed||(e.exposed={});A&&e.render===oe&&(e.render=A),Y!=null&&(e.inheritAttrs=Y),et&&(e.components=et),q&&(e.directives=q),H&&No(e)}function uc(e,t,i=oe){st(e)&&(e=Wn(e));for(const r in e){const n=e[r];let s;Et(n)?"default"in n?s=Ee(n.from||r,n.default,!0):s=Ee(n.from||r):s=Ee(n),Bt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function js(e,t,i){ve(st(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function zo(e,t,i,r){let n=r.includes(".")?il(i,r):()=>i[r];if(Mt(e)){const s=t[e];at(s)&&qe(n,s)}else if(at(e))qe(n,e.bind(i));else if(Et(e))if(st(e))e.forEach(s=>zo(s,t,i,r));else{const s=at(e.handler)?e.handler.bind(i):t[e.handler];at(s)&&qe(n,s,e)}}function bs(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(h=>Fr(l,h,a,!0)),Fr(l,t,a)),Et(t)&&s.set(t,l),l}function Fr(e,t,i,r=!1){const{mixins:n,extends:s}=t;s&&Fr(e,s,i,!0),n&&n.forEach(a=>Fr(e,a,i,!0));for(const a in t)if(!(r&&a==="expose")){const o=fc[a]||i&&i[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const fc={data:Ys,props:$s,emits:$s,methods:Ni,computed:Ni,beforeCreate:Wt,created:Wt,beforeMount:Wt,mounted:Wt,beforeUpdate:Wt,updated:Wt,beforeDestroy:Wt,beforeUnmount:Wt,destroyed:Wt,unmounted:Wt,activated:Wt,deactivated:Wt,errorCaptured:Wt,serverPrefetch:Wt,components:Ni,directives:Ni,watch:gc,provide:Ys,inject:dc};function Ys(e,t){return t?e?function(){return Dt(at(e)?e.call(this,this):e,at(t)?t.call(this,this):t)}:t:e}function dc(e,t){return Ni(Wn(e),Wn(t))}function Wn(e){if(st(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Wt(e,t){return e?[...new Set([].concat(e,t))]:t}function Ni(e,t){return e?Dt(Object.create(null),e,t):t}function $s(e,t){return e?st(e)&&st(t)?[...new Set([...e,...t])]:Dt(Object.create(null),Us(e),Us(t??{})):t}function gc(e,t){if(!e)return t;if(!t)return e;const i=Dt(Object.create(null),e);for(const r in t)i[r]=Wt(e[r],t[r]);return i}function Uo(){return{app:null,config:{isNativeTag:lh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pc=0;function vc(e,t){return function(r,n=null){at(r)||(r=Dt({},r)),n!=null&&!Et(n)&&(n=null);const s=Uo(),a=new WeakSet,o=[];let l=!1;const h=s.app={_uid:pc++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Jc,get config(){return s.config},set config(c){},use(c,...u){return a.has(c)||(c&&at(c.install)?(a.add(c),c.install(h,...u)):at(c)&&(a.add(c),c(h,...u))),h},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),h},component(c,u){return u?(s.components[c]=u,h):s.components[c]},directive(c,u){return u?(s.directives[c]=u,h):s.directives[c]},mount(c,u,f){if(!l){const d=h._ceVNode||It(r,n);return d.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(d,c):e(d,c,f),l=!0,h._container=c,c.__vue_app__=h,xs(d.component)}},onUnmount(c){o.push(c)},unmount(){l&&(ve(o,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(c,u){return s.provides[c]=u,h},runWithContext(c){const u=mi;mi=h;try{return c()}finally{mi=u}}};return h}}let mi=null;function Ar(e,t){if(Gt){let i=Gt.provides;const r=Gt.parent&&Gt.parent.provides;r===i&&(i=Gt.provides=Object.create(r)),i[e]=t}}function Ee(e,t,i=!1){const r=Gt||ee;if(r||mi){const n=mi?mi._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&at(t)?t.call(r&&r.proxy):t}}const jo={},Yo=()=>Object.create(jo),$o=e=>Object.getPrototypeOf(e)===jo;function mc(e,t,i,r=!1){const n={},s=Yo();e.propsDefaults=Object.create(null),Vo(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);i?e.props=r?n:Ao(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function _c(e,t,i,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=ft(n),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let u=0;u<c.length;u++){let f=c[u];if(tn(e.emitsOptions,f))continue;const d=t[f];if(l)if(pt(s,f))d!==s[f]&&(s[f]=d,h=!0);else{const g=re(f);n[g]=zn(l,o,g,d,e,!1)}else d!==s[f]&&(s[f]=d,h=!0)}}}else{Vo(e,t,n,s)&&(h=!0);let c;for(const u in o)(!t||!pt(t,u)&&((c=Ze(u))===u||!pt(t,c)))&&(l?i&&(i[u]!==void 0||i[c]!==void 0)&&(n[u]=zn(l,o,u,void 0,e,!0)):delete n[u]);if(s!==o)for(const u in s)(!t||!pt(t,u))&&(delete s[u],h=!0)}h&&we(e.attrs,"set","")}function Vo(e,t,i,r){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Ui(l))continue;const h=t[l];let c;n&&pt(n,c=re(l))?!s||!s.includes(c)?i[c]=h:(o||(o={}))[c]=h:tn(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=ft(i),h=o||Ct;for(let c=0;c<s.length;c++){const u=s[c];i[u]=zn(n,l,u,h[u],e,!pt(h,u))}}return a}function zn(e,t,i,r,n,s){const a=e[i];if(a!=null){const o=pt(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&at(l)){const{propsDefaults:h}=n;if(i in h)r=h[i];else{const c=cr(n);r=h[i]=l.call(null,t),c()}}else r=l;n.ce&&n.ce._setProp(i,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===Ze(i))&&(r=!0))}return r}const yc=new WeakMap;function Xo(e,t,i=!1){const r=i?yc:t.propsCache,n=r.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!at(e)){const c=u=>{l=!0;const[f,d]=Xo(u,t,!0);Dt(a,f),d&&o.push(...d)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return Et(e)&&r.set(e,fi),fi;if(st(s))for(let c=0;c<s.length;c++){const u=re(s[c]);Vs(u)&&(a[u]=Ct)}else if(s)for(const c in s){const u=re(c);if(Vs(u)){const f=s[c],d=a[u]=st(f)||at(f)?{type:f}:Dt({},f),g=d.type;let _=!1,y=!0;if(st(g))for(let E=0;E<g.length;++E){const b=g[E],S=at(b)&&b.name;if(S==="Boolean"){_=!0;break}else S==="String"&&(y=!1)}else _=at(g)&&g.name==="Boolean";d[0]=_,d[1]=y,(_||pt(d,"default"))&&o.push(u)}}const h=[a,o];return Et(e)&&r.set(e,h),h}function Vs(e){return e[0]!=="$"&&!Ui(e)}const qo=e=>e[0]==="_"||e==="$stable",Ss=e=>st(e)?e.map(pe):[pe(e)],bc=(e,t,i)=>{if(t._n)return t;const r=Tr((...n)=>Ss(t(...n)),i);return r._c=!1,r},Ko=(e,t,i)=>{const r=e._ctx;for(const n in e){if(qo(n))continue;const s=e[n];if(at(s))t[n]=bc(n,s,r);else if(s!=null){const a=Ss(s);t[n]=()=>a}}},Qo=(e,t)=>{const i=Ss(t);e.slots.default=()=>i},Jo=(e,t,i)=>{for(const r in t)(i||r!=="_")&&(e[r]=t[r])},Sc=(e,t,i)=>{const r=e.slots=Yo();if(e.vnode.shapeFlag&32){const n=t._;n?(Jo(r,t,i),i&&lo(r,"_",n,!0)):Ko(t,r)}else t&&Qo(e,t)},Cc=(e,t,i)=>{const{vnode:r,slots:n}=e;let s=!0,a=Ct;if(r.shapeFlag&32){const o=t._;o?i&&o===1?s=!1:Jo(n,t,i):(s=!t.$stable,Ko(t,n)),a=t}else t&&(Qo(e,t),a={default:1});if(s)for(const o in n)!qo(o)&&a[o]==null&&delete n[o]},Xt=Gc;function wc(e){return xc(e)}function xc(e,t){const i=Xr();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:f,setScopeId:d=oe,insertStaticContent:g}=e,_=(p,m,x,k=null,P=null,O=null,z=void 0,B=null,F=!!m.dynamicChildren)=>{if(p===m)return;p&&!Ri(p,m)&&(k=T(p),ht(p,P,O,!0),p=null),m.patchFlag===-2&&(F=!1,m.dynamicChildren=null);const{type:I,ref:it,shapeFlag:$}=m;switch(I){case en:y(p,m,x,k);break;case Je:E(p,m,x,k);break;case mn:p==null&&b(m,x,k,z);break;case ae:et(p,m,x,k,P,O,z,B,F);break;default:$&1?A(p,m,x,k,P,O,z,B,F):$&6?q(p,m,x,k,P,O,z,B,F):($&64||$&128)&&I.process(p,m,x,k,P,O,z,B,F,Q)}it!=null&&P&&Nr(it,p&&p.ref,O,m||p,!m)},y=(p,m,x,k)=>{if(p==null)r(m.el=o(m.children),x,k);else{const P=m.el=p.el;m.children!==p.children&&h(P,m.children)}},E=(p,m,x,k)=>{p==null?r(m.el=l(m.children||""),x,k):m.el=p.el},b=(p,m,x,k)=>{[p.el,p.anchor]=g(p.children,m,x,k,p.el,p.anchor)},S=({el:p,anchor:m},x,k)=>{let P;for(;p&&p!==m;)P=f(p),r(p,x,k),p=P;r(m,x,k)},w=({el:p,anchor:m})=>{let x;for(;p&&p!==m;)x=f(p),n(p),p=x;n(m)},A=(p,m,x,k,P,O,z,B,F)=>{m.type==="svg"?z="svg":m.type==="math"&&(z="mathml"),p==null?R(m,x,k,P,O,z,B,F):H(p,m,P,O,z,B,F)},R=(p,m,x,k,P,O,z,B)=>{let F,I;const{props:it,shapeFlag:$,transition:J,dirs:nt}=p;if(F=p.el=a(p.type,O,it&&it.is,it),$&8?c(F,p.children):$&16&&L(p.children,F,null,k,P,pn(p,O),z,B),nt&&Ue(p,null,k,"created"),D(F,p,p.scopeId,z,k),it){for(const bt in it)bt!=="value"&&!Ui(bt)&&s(F,bt,null,it[bt],O,k);"value"in it&&s(F,"value",null,it.value,O),(I=it.onVnodeBeforeMount)&&fe(I,k,p)}nt&&Ue(p,null,k,"beforeMount");const ct=Ec(P,J);ct&&J.beforeEnter(F),r(F,m,x),((I=it&&it.onVnodeMounted)||ct||nt)&&Xt(()=>{I&&fe(I,k,p),ct&&J.enter(F),nt&&Ue(p,null,k,"mounted")},P)},D=(p,m,x,k,P)=>{if(x&&d(p,x),k)for(let O=0;O<k.length;O++)d(p,k[O]);if(P){let O=P.subTree;if(m===O||nl(O.type)&&(O.ssContent===m||O.ssFallback===m)){const z=P.vnode;D(p,z,z.scopeId,z.slotScopeIds,P.parent)}}},L=(p,m,x,k,P,O,z,B,F=0)=>{for(let I=F;I<p.length;I++){const it=p[I]=B?Le(p[I]):pe(p[I]);_(null,it,m,x,k,P,O,z,B)}},H=(p,m,x,k,P,O,z)=>{const B=m.el=p.el;let{patchFlag:F,dynamicChildren:I,dirs:it}=m;F|=p.patchFlag&16;const $=p.props||Ct,J=m.props||Ct;let nt;if(x&&je(x,!1),(nt=J.onVnodeBeforeUpdate)&&fe(nt,x,m,p),it&&Ue(m,p,x,"beforeUpdate"),x&&je(x,!0),($.innerHTML&&J.innerHTML==null||$.textContent&&J.textContent==null)&&c(B,""),I?W(p.dynamicChildren,I,B,x,k,pn(m,P),O):z||K(p,m,B,null,x,k,pn(m,P),O,!1),F>0){if(F&16)Y(B,$,J,x,P);else if(F&2&&$.class!==J.class&&s(B,"class",null,J.class,P),F&4&&s(B,"style",$.style,J.style,P),F&8){const ct=m.dynamicProps;for(let bt=0;bt<ct.length;bt++){const mt=ct[bt],Yt=$[mt],Nt=J[mt];(Nt!==Yt||mt==="value")&&s(B,mt,Yt,Nt,P,x)}}F&1&&p.children!==m.children&&c(B,m.children)}else!z&&I==null&&Y(B,$,J,x,P);((nt=J.onVnodeUpdated)||it)&&Xt(()=>{nt&&fe(nt,x,m,p),it&&Ue(m,p,x,"updated")},k)},W=(p,m,x,k,P,O,z)=>{for(let B=0;B<m.length;B++){const F=p[B],I=m[B],it=F.el&&(F.type===ae||!Ri(F,I)||F.shapeFlag&70)?u(F.el):x;_(F,I,it,null,k,P,O,z,!0)}},Y=(p,m,x,k,P)=>{if(m!==x){if(m!==Ct)for(const O in m)!Ui(O)&&!(O in x)&&s(p,O,m[O],null,P,k);for(const O in x){if(Ui(O))continue;const z=x[O],B=m[O];z!==B&&O!=="value"&&s(p,O,B,z,P,k)}"value"in x&&s(p,"value",m.value,x.value,P)}},et=(p,m,x,k,P,O,z,B,F)=>{const I=m.el=p?p.el:o(""),it=m.anchor=p?p.anchor:o("");let{patchFlag:$,dynamicChildren:J,slotScopeIds:nt}=m;nt&&(B=B?B.concat(nt):nt),p==null?(r(I,x,k),r(it,x,k),L(m.children||[],x,it,P,O,z,B,F)):$>0&&$&64&&J&&p.dynamicChildren?(W(p.dynamicChildren,J,x,P,O,z,B),(m.key!=null||P&&m===P.subTree)&&Zo(p,m,!0)):K(p,m,x,it,P,O,z,B,F)},q=(p,m,x,k,P,O,z,B,F)=>{m.slotScopeIds=B,p==null?m.shapeFlag&512?P.ctx.activate(m,x,k,z,F):lt(m,x,k,P,O,z,F):Pt(p,m,F)},lt=(p,m,x,k,P,O,z)=>{const B=p.component=Yc(p,k,P);if(Fo(p)&&(B.ctx.renderer=Q),$c(B,!1,z),B.asyncDep){if(P&&P.registerDep(B,Z,z),!p.el){const F=B.subTree=It(Je);E(null,F,m,x)}}else Z(B,p,m,x,P,O,z)},Pt=(p,m,x)=>{const k=m.component=p.component;if(Ic(p,m,x))if(k.asyncDep&&!k.asyncResolved){j(k,m,x);return}else k.next=m,k.update();else m.el=p.el,k.vnode=m},Z=(p,m,x,k,P,O,z)=>{const B=()=>{if(p.isMounted){let{next:$,bu:J,u:nt,parent:ct,vnode:bt}=p;{const $t=tl(p);if($t){$&&($.el=bt.el,j(p,$,z)),$t.asyncDep.then(()=>{p.isUnmounted||B()});return}}let mt=$,Yt;je(p,!1),$?($.el=bt.el,j(p,$,z)):$=bt,J&&hn(J),(Yt=$.props&&$.props.onVnodeBeforeUpdate)&&fe(Yt,ct,$,bt),je(p,!0);const Nt=vn(p),se=p.subTree;p.subTree=Nt,_(se,Nt,u(se.el),T(se),p,P,O),$.el=Nt.el,mt===null&&Dc(p,Nt.el),nt&&Xt(nt,P),(Yt=$.props&&$.props.onVnodeUpdated)&&Xt(()=>fe(Yt,ct,$,bt),P)}else{let $;const{el:J,props:nt}=m,{bm:ct,m:bt,parent:mt,root:Yt,type:Nt}=p,se=$i(m);if(je(p,!1),ct&&hn(ct),!se&&($=nt&&nt.onVnodeBeforeMount)&&fe($,mt,m),je(p,!0),J&&wt){const $t=()=>{p.subTree=vn(p),wt(J,p.subTree,p,P,null)};se&&Nt.__asyncHydrate?Nt.__asyncHydrate(J,p,$t):$t()}else{Yt.ce&&Yt.ce._injectChildStyle(Nt);const $t=p.subTree=vn(p);_(null,$t,x,k,p,P,O),m.el=$t.el}if(bt&&Xt(bt,P),!se&&($=nt&&nt.onVnodeMounted)){const $t=m;Xt(()=>fe($,mt,$t),P)}(m.shapeFlag&256||mt&&$i(mt.vnode)&&mt.vnode.shapeFlag&256)&&p.a&&Xt(p.a,P),p.isMounted=!0,m=x=k=null}};p.scope.on();const F=p.effect=new go(B);p.scope.off();const I=p.update=F.run.bind(F),it=p.job=F.runIfDirty.bind(F);it.i=p,it.id=p.uid,F.scheduler=()=>vs(it),je(p,!0),I()},j=(p,m,x)=>{m.component=p;const k=p.vnode.props;p.vnode=m,p.next=null,_c(p,m.props,k,x),Cc(p,m.children,x),Fe(),Bs(p),He()},K=(p,m,x,k,P,O,z,B,F=!1)=>{const I=p&&p.children,it=p?p.shapeFlag:0,$=m.children,{patchFlag:J,shapeFlag:nt}=m;if(J>0){if(J&128){tt(I,$,x,k,P,O,z,B,F);return}else if(J&256){ot(I,$,x,k,P,O,z,B,F);return}}nt&8?(it&16&&Zt(I,P,O),$!==I&&c(x,$)):it&16?nt&16?tt(I,$,x,k,P,O,z,B,F):Zt(I,P,O,!0):(it&8&&c(x,""),nt&16&&L($,x,k,P,O,z,B,F))},ot=(p,m,x,k,P,O,z,B,F)=>{p=p||fi,m=m||fi;const I=p.length,it=m.length,$=Math.min(I,it);let J;for(J=0;J<$;J++){const nt=m[J]=F?Le(m[J]):pe(m[J]);_(p[J],nt,x,null,P,O,z,B,F)}I>it?Zt(p,P,O,!0,!1,$):L(m,x,k,P,O,z,B,F,$)},tt=(p,m,x,k,P,O,z,B,F)=>{let I=0;const it=m.length;let $=p.length-1,J=it-1;for(;I<=$&&I<=J;){const nt=p[I],ct=m[I]=F?Le(m[I]):pe(m[I]);if(Ri(nt,ct))_(nt,ct,x,null,P,O,z,B,F);else break;I++}for(;I<=$&&I<=J;){const nt=p[$],ct=m[J]=F?Le(m[J]):pe(m[J]);if(Ri(nt,ct))_(nt,ct,x,null,P,O,z,B,F);else break;$--,J--}if(I>$){if(I<=J){const nt=J+1,ct=nt<it?m[nt].el:k;for(;I<=J;)_(null,m[I]=F?Le(m[I]):pe(m[I]),x,ct,P,O,z,B,F),I++}}else if(I>J)for(;I<=$;)ht(p[I],P,O,!0),I++;else{const nt=I,ct=I,bt=new Map;for(I=ct;I<=J;I++){const Vt=m[I]=F?Le(m[I]):pe(m[I]);Vt.key!=null&&bt.set(Vt.key,I)}let mt,Yt=0;const Nt=J-ct+1;let se=!1,$t=0;const Ti=new Array(Nt);for(I=0;I<Nt;I++)Ti[I]=0;for(I=nt;I<=$;I++){const Vt=p[I];if(Yt>=Nt){ht(Vt,P,O,!0);continue}let ue;if(Vt.key!=null)ue=bt.get(Vt.key);else for(mt=ct;mt<=J;mt++)if(Ti[mt-ct]===0&&Ri(Vt,m[mt])){ue=mt;break}ue===void 0?ht(Vt,P,O,!0):(Ti[ue-ct]=I+1,ue>=$t?$t=ue:se=!0,_(Vt,m[ue],x,null,P,O,z,B,F),Yt++)}const Ds=se?Pc(Ti):fi;for(mt=Ds.length-1,I=Nt-1;I>=0;I--){const Vt=ct+I,ue=m[Vt],Gs=Vt+1<it?m[Vt+1].el:k;Ti[I]===0?_(null,ue,x,Gs,P,O,z,B,F):se&&(mt<0||I!==Ds[mt]?rt(ue,x,Gs,2):mt--)}}},rt=(p,m,x,k,P=null)=>{const{el:O,type:z,transition:B,children:F,shapeFlag:I}=p;if(I&6){rt(p.component.subTree,m,x,k);return}if(I&128){p.suspense.move(m,x,k);return}if(I&64){z.move(p,m,x,Q);return}if(z===ae){r(O,m,x);for(let $=0;$<F.length;$++)rt(F[$],m,x,k);r(p.anchor,m,x);return}if(z===mn){S(p,m,x);return}if(k!==2&&I&1&&B)if(k===0)B.beforeEnter(O),r(O,m,x),Xt(()=>B.enter(O),P);else{const{leave:$,delayLeave:J,afterLeave:nt}=B,ct=()=>r(O,m,x),bt=()=>{$(O,()=>{ct(),nt&&nt()})};J?J(O,ct,bt):bt()}else r(O,m,x)},ht=(p,m,x,k=!1,P=!1)=>{const{type:O,props:z,ref:B,children:F,dynamicChildren:I,shapeFlag:it,patchFlag:$,dirs:J,cacheIndex:nt}=p;if($===-2&&(P=!1),B!=null&&Nr(B,null,x,p,!0),nt!=null&&(m.renderCache[nt]=void 0),it&256){m.ctx.deactivate(p);return}const ct=it&1&&J,bt=!$i(p);let mt;if(bt&&(mt=z&&z.onVnodeBeforeUnmount)&&fe(mt,m,p),it&6)fr(p.component,x,k);else{if(it&128){p.suspense.unmount(x,k);return}ct&&Ue(p,null,m,"beforeUnmount"),it&64?p.type.remove(p,m,x,Q,k):I&&!I.hasOnce&&(O!==ae||$>0&&$&64)?Zt(I,m,x,!1,!0):(O===ae&&$&384||!P&&it&16)&&Zt(F,m,x),k&&Tt(p)}(bt&&(mt=z&&z.onVnodeUnmounted)||ct)&&Xt(()=>{mt&&fe(mt,m,p),ct&&Ue(p,null,m,"unmounted")},x)},Tt=p=>{const{type:m,el:x,anchor:k,transition:P}=p;if(m===ae){Lt(x,k);return}if(m===mn){w(p);return}const O=()=>{n(x),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(p.shapeFlag&1&&P&&!P.persisted){const{leave:z,delayLeave:B}=P,F=()=>z(x,O);B?B(p.el,O,F):F()}else O()},Lt=(p,m)=>{let x;for(;p!==m;)x=f(p),n(p),p=x;n(m)},fr=(p,m,x)=>{const{bum:k,scope:P,job:O,subTree:z,um:B,m:F,a:I}=p;Xs(F),Xs(I),k&&hn(k),P.stop(),O&&(O.flags|=8,ht(z,p,m,x)),B&&Xt(B,m),Xt(()=>{p.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},Zt=(p,m,x,k=!1,P=!1,O=0)=>{for(let z=O;z<p.length;z++)ht(p[z],m,x,k,P)},T=p=>{if(p.shapeFlag&6)return T(p.component.subTree);if(p.shapeFlag&128)return p.suspense.next();const m=f(p.anchor||p.el),x=m&&m[Kh];return x?f(x):m};let V=!1;const U=(p,m,x)=>{p==null?m._vnode&&ht(m._vnode,null,null,!0):_(m._vnode||null,p,m,null,null,null,x),m._vnode=p,V||(V=!0,Bs(),Io(),V=!1)},Q={p:_,um:ht,m:rt,r:Tt,mt:lt,mc:L,pc:K,pbc:W,n:T,o:e};let dt,wt;return t&&([dt,wt]=t(Q)),{render:U,hydrate:dt,createApp:vc(U,dt)}}function pn({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function je({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ec(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Zo(e,t,i=!1){const r=e.children,n=t.children;if(st(r)&&st(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=Le(n[s]),o.el=a.el),!i&&o.patchFlag!==-2&&Zo(a,o)),o.type===en&&(o.el=a.el)}}function Pc(e){const t=e.slice(),i=[0];let r,n,s,a,o;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(n=i[i.length-1],e[n]<h){t[r]=n,i.push(r);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,e[i[o]]<h?s=o+1:a=o;h<e[i[s]]&&(s>0&&(t[r]=i[s-1]),i[s]=r)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=t[a];return i}function tl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tl(t)}function Xs(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Tc=Symbol.for("v-scx"),Ac=()=>Ee(Tc);function qe(e,t,i){return el(e,t,i)}function el(e,t,i=Ct){const{immediate:r,deep:n,flush:s,once:a}=i,o=Dt({},i),l=t&&r||!t&&s!=="post";let h;if(nr){if(s==="sync"){const d=Ac();h=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=oe,d.resume=oe,d.pause=oe,d}}const c=Gt;o.call=(d,g,_)=>ve(d,c,g,_);let u=!1;s==="post"?o.scheduler=d=>{Xt(d,c&&c.suspense)}:s!=="sync"&&(u=!0,o.scheduler=(d,g)=>{g?d():vs(d)}),o.augmentJob=d=>{t&&(d.flags|=4),u&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const f=$h(e,t,o);return nr&&(h?h.push(f):l&&f()),f}function Rc(e,t,i){const r=this.proxy,n=Mt(e)?e.includes(".")?il(r,e):()=>r[e]:e.bind(r,r);let s;at(t)?s=t:(s=t.handler,i=t);const a=cr(this),o=el(n,s.bind(r),i);return a(),o}function il(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const kc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${re(t)}Modifiers`]||e[`${Ze(t)}Modifiers`];function Mc(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Ct;let n=i;const s=t.startsWith("update:"),a=s&&kc(r,t.slice(7));a&&(a.trim&&(n=i.map(c=>Mt(c)?c.trim():c)),a.number&&(n=i.map(dh)));let o,l=r[o=ln(t)]||r[o=ln(re(t))];!l&&s&&(l=r[o=ln(Ze(t))]),l&&ve(l,e,6,n);const h=r[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,ve(h,e,6,n)}}function rl(e,t,i=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!at(e)){const l=h=>{const c=rl(h,t,!0);c&&(o=!0,Dt(a,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Et(e)&&r.set(e,null),null):(st(s)?s.forEach(l=>a[l]=null):Dt(a,s),Et(e)&&r.set(e,a),a)}function tn(e,t){return!e||!jr(t)?!1:(t=t.slice(2).replace(/Once$/,""),pt(e,t[0].toLowerCase()+t.slice(1))||pt(e,Ze(t))||pt(e,t))}function vn(e){const{type:t,vnode:i,proxy:r,withProxy:n,propsOptions:[s],slots:a,attrs:o,emit:l,render:h,renderCache:c,props:u,data:f,setupState:d,ctx:g,inheritAttrs:_}=e,y=Gr(e);let E,b;try{if(i.shapeFlag&4){const w=n||r,A=w;E=pe(h.call(A,w,c,u,d,f,g)),b=o}else{const w=t;E=pe(w.length>1?w(u,{attrs:o,slots:a,emit:l}):w(u,null)),b=t.props?o:Oc(o)}}catch(w){Xi.length=0,Qr(w,e,1),E=It(Je)}let S=E;if(b&&_!==!1){const w=Object.keys(b),{shapeFlag:A}=S;w.length&&A&7&&(s&&w.some(ns)&&(b=Lc(b,s)),S=bi(S,b,!1,!0))}return i.dirs&&(S=bi(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(i.dirs):i.dirs),i.transition&&ms(S,i.transition),E=S,Gr(y),E}const Oc=e=>{let t;for(const i in e)(i==="class"||i==="style"||jr(i))&&((t||(t={}))[i]=e[i]);return t},Lc=(e,t)=>{const i={};for(const r in e)(!ns(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function Ic(e,t,i){const{props:r,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?qs(r,a,h):!!a;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const f=c[u];if(a[f]!==r[f]&&!tn(h,f))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?qs(r,a,h):!0:!!a;return!1}function qs(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==e[s]&&!tn(i,s))return!0}return!1}function Dc({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const nl=e=>e.__isSuspense;function Gc(e,t){t&&t.pendingBranch?st(e)?t.effects.push(...e):t.effects.push(e):qh(e)}const ae=Symbol.for("v-fgt"),en=Symbol.for("v-txt"),Je=Symbol.for("v-cmt"),mn=Symbol.for("v-stc"),Xi=[];let Qt=null;function Ce(e=!1){Xi.push(Qt=e?null:[])}function Nc(){Xi.pop(),Qt=Xi[Xi.length-1]||null}let rr=1;function Ks(e,t=!1){rr+=e,e<0&&Qt&&t&&(Qt.hasOnce=!0)}function sl(e){return e.dynamicChildren=rr>0?Qt||fi:null,Nc(),rr>0&&Qt&&Qt.push(e),e}function Fi(e,t,i,r,n,s){return sl(qt(e,t,i,r,n,s,!0))}function Hr(e,t,i,r,n){return sl(It(e,t,i,r,n,!0))}function Br(e){return e?e.__v_isVNode===!0:!1}function Ri(e,t){return e.type===t.type&&e.key===t.key}const al=({key:e})=>e??null,Rr=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Mt(e)||Bt(e)||at(e)?{i:ee,r:e,k:t,f:!!i}:e:null);function qt(e,t=null,i=null,r=0,n=null,s=e===ae?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&al(t),ref:t&&Rr(t),scopeId:Go,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:ee};return o?(Cs(l,i),s&128&&e.normalize(l)):i&&(l.shapeFlag|=Mt(i)?8:16),rr>0&&!a&&Qt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Qt.push(l),l}const It=Fc;function Fc(e,t=null,i=null,r=0,n=null,s=!1){if((!e||e===oc)&&(e=Je),Br(e)){const o=bi(e,t,!0);return i&&Cs(o,i),rr>0&&!s&&Qt&&(o.shapeFlag&6?Qt[Qt.indexOf(e)]=o:Qt.push(o)),o.patchFlag=-2,o}if(Qc(e)&&(e=e.__vccOpts),t){t=Hc(t);let{class:o,style:l}=t;o&&!Mt(o)&&(t.class=qr(o)),Et(l)&&(ps(l)&&!st(l)&&(l=Dt({},l)),t.style=os(l))}const a=Mt(e)?1:nl(e)?128:Qh(e)?64:Et(e)?4:at(e)?2:0;return qt(e,t,i,r,n,a,s,!0)}function Hc(e){return e?ps(e)||$o(e)?Dt({},e):e:null}function bi(e,t,i=!1,r=!1){const{props:n,ref:s,patchFlag:a,children:o,transition:l}=e,h=t?zc(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&al(h),ref:t&&t.ref?i&&s?st(s)?s.concat(Rr(t)):[s,Rr(t)]:Rr(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ae?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&bi(e.ssContent),ssFallback:e.ssFallback&&bi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&ms(c,l.clone(c)),c}function Bc(e=" ",t=0){return It(en,null,e,t)}function Wc(e="",t=!1){return t?(Ce(),Hr(Je,null,e)):It(Je,null,e)}function pe(e){return e==null||typeof e=="boolean"?It(Je):st(e)?It(ae,null,e.slice()):Br(e)?Le(e):It(en,null,String(e))}function Le(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:bi(e)}function Cs(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(st(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Cs(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!$o(t)?t._ctx=ee:n===3&&ee&&(ee.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:ee},i=32):(t=String(t),r&64?(i=16,t=[Bc(t)]):i=8);e.children=t,e.shapeFlag|=i}function zc(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=qr([t.class,r.class]));else if(n==="style")t.style=os([t.style,r.style]);else if(jr(n)){const s=t[n],a=r[n];a&&s!==a&&!(st(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=r[n])}return t}function fe(e,t,i,r=null){ve(e,t,7,[i,r])}const Uc=Uo();let jc=0;function Yc(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||Uc,s={uid:jc++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xo(r,n),emitsOptions:rl(r,n),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:r.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Mc.bind(null,s),e.ce&&e.ce(s),s}let Gt=null;const ws=()=>Gt||ee;let Wr,Un;{const e=Xr(),t=(i,r)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(r),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};Wr=t("__VUE_INSTANCE_SETTERS__",i=>Gt=i),Un=t("__VUE_SSR_SETTERS__",i=>nr=i)}const cr=e=>{const t=Gt;return Wr(e),e.scope.on(),()=>{e.scope.off(),Wr(t)}},Qs=()=>{Gt&&Gt.scope.off(),Wr(null)};function ol(e){return e.vnode.shapeFlag&4}let nr=!1;function $c(e,t=!1,i=!1){t&&Un(t);const{props:r,children:n}=e.vnode,s=ol(e);mc(e,r,s,t),Sc(e,n,i);const a=s?Vc(e,t):void 0;return t&&Un(!1),a}function Vc(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,hc);const{setup:r}=i;if(r){Fe();const n=e.setupContext=r.length>1?qc(e):null,s=cr(e),a=lr(r,e,0,[e.props,n]),o=so(a);if(He(),s(),(o||e.sp)&&!$i(e)&&No(e),o){if(a.then(Qs,Qs),t)return a.then(l=>{Js(e,l,t)}).catch(l=>{Qr(l,e,0)});e.asyncDep=a}else Js(e,a,t)}else ll(e,t)}function Js(e,t,i){at(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=ko(t)),ll(e,i)}let Zs;function ll(e,t,i){const r=e.type;if(!e.render){if(!t&&Zs&&!r.render){const n=r.template||bs(e).template;if(n){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,h=Dt(Dt({isCustomElement:s,delimiters:o},a),l);r.render=Zs(n,h)}}e.render=r.render||oe}{const n=cr(e);Fe();try{cc(e)}finally{He(),n()}}}const Xc={get(e,t){return Ft(e,"get",""),e[t]}};function qc(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Xc),slots:e.slots,emit:e.emit,expose:t}}function xs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ko(Bh(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Vi)return Vi[i](e)},has(t,i){return i in t||i in Vi}})):e.proxy}function Kc(e,t=!0){return at(e)?e.displayName||e.name:e.name||t&&e.__name}function Qc(e){return at(e)&&"__vccOpts"in e}const jt=(e,t)=>jh(e,t,nr);function rn(e,t,i){const r=arguments.length;return r===2?Et(t)&&!st(t)?Br(t)?It(e,null,[t]):It(e,t):It(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&Br(i)&&(i=[i]),It(e,t,i))}const Jc="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jn;const ta=typeof window<"u"&&window.trustedTypes;if(ta)try{jn=ta.createPolicy("vue",{createHTML:e=>e})}catch{}const hl=jn?e=>jn.createHTML(e):e=>e,Zc="http://www.w3.org/2000/svg",tu="http://www.w3.org/1998/Math/MathML",Se=typeof document<"u"?document:null,ea=Se&&Se.createElement("template"),eu={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t==="svg"?Se.createElementNS(Zc,e):t==="mathml"?Se.createElementNS(tu,e):i?Se.createElement(e,{is:i}):Se.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>Se.createTextNode(e),createComment:e=>Se.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Se.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,n,s){const a=i?i.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{ea.innerHTML=hl(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const o=ea.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[a?a.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},iu=Symbol("_vtc");function ru(e,t,i){const r=e[iu];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const ia=Symbol("_vod"),nu=Symbol("_vsh"),su=Symbol(""),au=/(^|;)\s*display\s*:/;function ou(e,t,i){const r=e.style,n=Mt(i);let s=!1;if(i&&!n){if(t)if(Mt(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();i[o]==null&&kr(r,o,"")}else for(const a in t)i[a]==null&&kr(r,a,"");for(const a in i)a==="display"&&(s=!0),kr(r,a,i[a])}else if(n){if(t!==i){const a=r[su];a&&(i+=";"+a),r.cssText=i,s=au.test(i)}}else t&&e.removeAttribute("style");ia in e&&(e[ia]=s?r.display:"",e[nu]&&(r.display="none"))}const ra=/\s*!important$/;function kr(e,t,i){if(st(i))i.forEach(r=>kr(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=lu(e,t);ra.test(i)?e.setProperty(Ze(r),i.replace(ra,""),"important"):e[r]=i}}const na=["Webkit","Moz","ms"],_n={};function lu(e,t){const i=_n[t];if(i)return i;let r=re(t);if(r!=="filter"&&r in e)return _n[t]=r;r=Vr(r);for(let n=0;n<na.length;n++){const s=na[n]+r;if(s in e)return _n[t]=s}return t}const sa="http://www.w3.org/1999/xlink";function aa(e,t,i,r,n,s=yh(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(sa,t.slice(6,t.length)):e.setAttributeNS(sa,t,i):i==null||s&&!ho(i)?e.removeAttribute(t):e.setAttribute(t,s?"":Ne(i)?String(i):i)}function oa(e,t,i,r,n){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?hl(i):i);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let a=!1;if(i===""||i==null){const o=typeof e[t];o==="boolean"?i=ho(i):i==null&&o==="string"?(i="",a=!0):o==="number"&&(i=0,a=!0)}try{e[t]=i}catch{}a&&e.removeAttribute(n||t)}function hu(e,t,i,r){e.addEventListener(t,i,r)}function cu(e,t,i,r){e.removeEventListener(t,i,r)}const la=Symbol("_vei");function uu(e,t,i,r,n=null){const s=e[la]||(e[la]={}),a=s[t];if(r&&a)a.value=r;else{const[o,l]=fu(t);if(r){const h=s[t]=pu(r,n);hu(e,o,h,l)}else a&&(cu(e,o,a,l),s[t]=void 0)}}const ha=/(?:Once|Passive|Capture)$/;function fu(e){let t;if(ha.test(e)){t={};let r;for(;r=e.match(ha);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ze(e.slice(2)),t]}let yn=0;const du=Promise.resolve(),gu=()=>yn||(du.then(()=>yn=0),yn=Date.now());function pu(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;ve(vu(r,i.value),t,5,[r])};return i.value=e,i.attached=gu(),i}function vu(e,t){if(st(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const ca=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,mu=(e,t,i,r,n,s)=>{const a=n==="svg";t==="class"?ru(e,r,a):t==="style"?ou(e,i,r):jr(t)?ns(t)||uu(e,t,i,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):_u(e,t,r,a))?(oa(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&aa(e,t,r,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Mt(r))?oa(e,re(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),aa(e,t,r,a))};function _u(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&ca(t)&&at(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return ca(t)&&Mt(i)?!1:t in e}const yu=Dt({patchProp:mu},eu);let ua;function bu(){return ua||(ua=wc(yu))}const Su=(...e)=>{const t=bu().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=wu(r);if(!n)return;const s=t._component;!at(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=i(n,!1,Cu(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function Cu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function wu(e){return Mt(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ci=typeof document<"u";function cl(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function xu(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&cl(e.default)}const gt=Object.assign;function bn(e,t){const i={};for(const r in t){const n=t[r];i[r]=he(n)?n.map(e):e(n)}return i}const qi=()=>{},he=Array.isArray,ul=/#/g,Eu=/&/g,Pu=/\//g,Tu=/=/g,Au=/\?/g,fl=/\+/g,Ru=/%5B/g,ku=/%5D/g,dl=/%5E/g,Mu=/%60/g,gl=/%7B/g,Ou=/%7C/g,pl=/%7D/g,Lu=/%20/g;function Es(e){return encodeURI(""+e).replace(Ou,"|").replace(Ru,"[").replace(ku,"]")}function Iu(e){return Es(e).replace(gl,"{").replace(pl,"}").replace(dl,"^")}function Yn(e){return Es(e).replace(fl,"%2B").replace(Lu,"+").replace(ul,"%23").replace(Eu,"%26").replace(Mu,"`").replace(gl,"{").replace(pl,"}").replace(dl,"^")}function Du(e){return Yn(e).replace(Tu,"%3D")}function Gu(e){return Es(e).replace(ul,"%23").replace(Au,"%3F")}function Nu(e){return e==null?"":Gu(e).replace(Pu,"%2F")}function sr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Fu=/\/$/,Hu=e=>e.replace(Fu,"");function Sn(e,t,i="/"){let r,n={},s="",a="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,o>-1?o:t.length),n=e(s)),o>-1&&(r=r||t.slice(0,o),a=t.slice(o,t.length)),r=Uu(r??t,i),{fullPath:r+(s&&"?")+s+a,path:r,query:n,hash:sr(a)}}function Bu(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function fa(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Wu(e,t,i){const r=t.matched.length-1,n=i.matched.length-1;return r>-1&&r===n&&Si(t.matched[r],i.matched[n])&&vl(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Si(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function vl(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!zu(e[i],t[i]))return!1;return!0}function zu(e,t){return he(e)?da(e,t):he(t)?da(t,e):e===t}function da(e,t){return he(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function Uu(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let s=i.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")s>1&&s--;else break;return i.slice(0,s).join("/")+"/"+r.slice(a).join("/")}const ke={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ar;(function(e){e.pop="pop",e.push="push"})(ar||(ar={}));var Ki;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ki||(Ki={}));function ju(e){if(!e)if(ci){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Hu(e)}const Yu=/^[^#]+#/;function $u(e,t){return e.replace(Yu,"#")+t}function Vu(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const nn=()=>({left:window.scrollX,top:window.scrollY});function Xu(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),n=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!n)return;t=Vu(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ga(e,t){return(history.state?history.state.position-t:-1)+e}const $n=new Map;function qu(e,t){$n.set(e,t)}function Ku(e){const t=$n.get(e);return $n.delete(e),t}let Qu=()=>location.protocol+"//"+location.host;function ml(e,t){const{pathname:i,search:r,hash:n}=t,s=e.indexOf("#");if(s>-1){let o=n.includes(e.slice(s))?e.slice(s).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),fa(l,"")}return fa(i,e)+r+n}function Ju(e,t,i,r){let n=[],s=[],a=null;const o=({state:f})=>{const d=ml(e,location),g=i.value,_=t.value;let y=0;if(f){if(i.value=d,t.value=f,a&&a===g){a=null;return}y=_?f.position-_.position:0}else r(d);n.forEach(E=>{E(i.value,g,{delta:y,type:ar.pop,direction:y?y>0?Ki.forward:Ki.back:Ki.unknown})})};function l(){a=i.value}function h(f){n.push(f);const d=()=>{const g=n.indexOf(f);g>-1&&n.splice(g,1)};return s.push(d),d}function c(){const{history:f}=window;f.state&&f.replaceState(gt({},f.state,{scroll:nn()}),"")}function u(){for(const f of s)f();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:h,destroy:u}}function pa(e,t,i,r=!1,n=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:n?nn():null}}function Zu(e){const{history:t,location:i}=window,r={value:ml(e,i)},n={value:t.state};n.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,h,c){const u=e.indexOf("#"),f=u>-1?(i.host&&document.querySelector("base")?e:e.slice(u))+l:Qu()+e+l;try{t[c?"replaceState":"pushState"](h,"",f),n.value=h}catch(d){console.error(d),i[c?"replace":"assign"](f)}}function a(l,h){const c=gt({},t.state,pa(n.value.back,l,n.value.forward,!0),h,{position:n.value.position});s(l,c,!0),r.value=l}function o(l,h){const c=gt({},n.value,t.state,{forward:l,scroll:nn()});s(c.current,c,!0);const u=gt({},pa(r.value,l,null),{position:c.position+1},h);s(l,u,!1),r.value=l}return{location:r,state:n,push:o,replace:a}}function tf(e){e=ju(e);const t=Zu(e),i=Ju(e,t.state,t.location,t.replace);function r(s,a=!0){a||i.pauseListeners(),history.go(s)}const n=gt({location:"",base:e,go:r,createHref:$u.bind(null,e)},t,i);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function ef(e){return typeof e=="string"||e&&typeof e=="object"}function _l(e){return typeof e=="string"||typeof e=="symbol"}const yl=Symbol("");var va;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(va||(va={}));function Ci(e,t){return gt(new Error,{type:e,[yl]:!0},t)}function ye(e,t){return e instanceof Error&&yl in e&&(t==null||!!(e.type&t))}const ma="[^/]+?",rf={sensitive:!1,strict:!1,start:!0,end:!0},nf=/[.+*?^${}()[\]/\\]/g;function sf(e,t){const i=gt({},rf,t),r=[];let n=i.start?"^":"";const s=[];for(const h of e){const c=h.length?[]:[90];i.strict&&!h.length&&(n+="/");for(let u=0;u<h.length;u++){const f=h[u];let d=40+(i.sensitive?.25:0);if(f.type===0)u||(n+="/"),n+=f.value.replace(nf,"\\$&"),d+=40;else if(f.type===1){const{value:g,repeatable:_,optional:y,regexp:E}=f;s.push({name:g,repeatable:_,optional:y});const b=E||ma;if(b!==ma){d+=10;try{new RegExp(`(${b})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+w.message)}}let S=_?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;u||(S=y&&h.length<2?`(?:/${S})`:"/"+S),y&&(S+="?"),n+=S,d+=20,y&&(d+=-8),_&&(d+=-20),b===".*"&&(d+=-50)}c.push(d)}r.push(c)}if(i.strict&&i.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}i.strict||(n+="/?"),i.end?n+="$":i.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const a=new RegExp(n,i.sensitive?"":"i");function o(h){const c=h.match(a),u={};if(!c)return null;for(let f=1;f<c.length;f++){const d=c[f]||"",g=s[f-1];u[g.name]=d&&g.repeatable?d.split("/"):d}return u}function l(h){let c="",u=!1;for(const f of e){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const d of f)if(d.type===0)c+=d.value;else if(d.type===1){const{value:g,repeatable:_,optional:y}=d,E=g in h?h[g]:"";if(he(E)&&!_)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=he(E)?E.join("/"):E;if(!b)if(y)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${g}"`);c+=b}}return c||"/"}return{re:a,score:r,keys:s,parse:o,stringify:l}}function af(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function bl(e,t){let i=0;const r=e.score,n=t.score;for(;i<r.length&&i<n.length;){const s=af(r[i],n[i]);if(s)return s;i++}if(Math.abs(n.length-r.length)===1){if(_a(r))return 1;if(_a(n))return-1}return n.length-r.length}function _a(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const of={type:0,value:""},lf=/[a-zA-Z0-9_]/;function hf(e){if(!e)return[[]];if(e==="/")return[[of]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${i})/"${h}": ${d}`)}let i=0,r=i;const n=[];let s;function a(){s&&n.push(s),s=[]}let o=0,l,h="",c="";function u(){h&&(i===0?s.push({type:0,value:h}):i===1||i===2||i===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function f(){h+=l}for(;o<e.length;){if(l=e[o++],l==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:l==="/"?(h&&u(),a()):l===":"?(u(),i=1):f();break;case 4:f(),i=r;break;case 1:l==="("?i=2:lf.test(l)?f():(u(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:i=3:c+=l;break;case 3:u(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),a(),n}function cf(e,t,i){const r=sf(hf(e.path),i),n=gt(r,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function uf(e,t){const i=[],r=new Map;t=Ca({strict:!1,end:!0,sensitive:!1},t);function n(u){return r.get(u)}function s(u,f,d){const g=!d,_=ba(u);_.aliasOf=d&&d.record;const y=Ca(t,u),E=[_];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const A of w)E.push(ba(gt({},_,{components:d?d.record.components:_.components,path:A,aliasOf:d?d.record:_})))}let b,S;for(const w of E){const{path:A}=w;if(f&&A[0]!=="/"){const R=f.record.path,D=R[R.length-1]==="/"?"":"/";w.path=f.record.path+(A&&D+A)}if(b=cf(w,f,y),d?d.alias.push(b):(S=S||b,S!==b&&S.alias.push(b),g&&u.name&&!Sa(b)&&a(u.name)),Sl(b)&&l(b),_.children){const R=_.children;for(let D=0;D<R.length;D++)s(R[D],b,d&&d.children[D])}d=d||b}return S?()=>{a(S)}:qi}function a(u){if(_l(u)){const f=r.get(u);f&&(r.delete(u),i.splice(i.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=i.indexOf(u);f>-1&&(i.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function o(){return i}function l(u){const f=gf(u,i);i.splice(f,0,u),u.record.name&&!Sa(u)&&r.set(u.record.name,u)}function h(u,f){let d,g={},_,y;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Ci(1,{location:u});y=d.record.name,g=gt(ya(f.params,d.keys.filter(S=>!S.optional).concat(d.parent?d.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),u.params&&ya(u.params,d.keys.map(S=>S.name))),_=d.stringify(g)}else if(u.path!=null)_=u.path,d=i.find(S=>S.re.test(_)),d&&(g=d.parse(_),y=d.record.name);else{if(d=f.name?r.get(f.name):i.find(S=>S.re.test(f.path)),!d)throw Ci(1,{location:u,currentLocation:f});y=d.record.name,g=gt({},f.params,u.params),_=d.stringify(g)}const E=[];let b=d;for(;b;)E.unshift(b.record),b=b.parent;return{name:y,path:_,params:g,matched:E,meta:df(E)}}e.forEach(u=>s(u));function c(){i.length=0,r.clear()}return{addRoute:s,resolve:h,removeRoute:a,clearRoutes:c,getRoutes:o,getRecordMatcher:n}}function ya(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function ba(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ff(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ff(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="object"?i[r]:i;return t}function Sa(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function df(e){return e.reduce((t,i)=>gt(t,i.meta),{})}function Ca(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}function gf(e,t){let i=0,r=t.length;for(;i!==r;){const s=i+r>>1;bl(e,t[s])<0?r=s:i=s+1}const n=pf(e);return n&&(r=t.lastIndexOf(n,r-1)),r}function pf(e){let t=e;for(;t=t.parent;)if(Sl(t)&&bl(e,t)===0)return t}function Sl({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function vf(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<r.length;++n){const s=r[n].replace(fl," "),a=s.indexOf("="),o=sr(a<0?s:s.slice(0,a)),l=a<0?null:sr(s.slice(a+1));if(o in t){let h=t[o];he(h)||(h=t[o]=[h]),h.push(l)}else t[o]=l}return t}function wa(e){let t="";for(let i in e){const r=e[i];if(i=Du(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(he(r)?r.map(s=>s&&Yn(s)):[r&&Yn(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+i,s!=null&&(t+="="+s))})}return t}function mf(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=he(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const _f=Symbol(""),xa=Symbol(""),Ps=Symbol(""),Cl=Symbol(""),Vn=Symbol("");function ki(){let e=[];function t(r){return e.push(r),()=>{const n=e.indexOf(r);n>-1&&e.splice(n,1)}}function i(){e=[]}return{add:t,list:()=>e.slice(),reset:i}}function Ie(e,t,i,r,n,s=a=>a()){const a=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((o,l)=>{const h=f=>{f===!1?l(Ci(4,{from:i,to:t})):f instanceof Error?l(f):ef(f)?l(Ci(2,{from:t,to:f})):(a&&r.enterCallbacks[n]===a&&typeof f=="function"&&a.push(f),o())},c=s(()=>e.call(r&&r.instances[n],t,i,h));let u=Promise.resolve(c);e.length<3&&(u=u.then(h)),u.catch(f=>l(f))})}function Cn(e,t,i,r,n=s=>s()){const s=[];for(const a of e)for(const o in a.components){let l=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(cl(l)){const c=(l.__vccOpts||l)[t];c&&s.push(Ie(c,i,r,a,o,n))}else{let h=l();s.push(()=>h.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const u=xu(c)?c.default:c;a.mods[o]=c,a.components[o]=u;const d=(u.__vccOpts||u)[t];return d&&Ie(d,i,r,a,o,n)()}))}}return s}function Ea(e){const t=Ee(Ps),i=Ee(Cl),r=jt(()=>{const l=xe(e.to);return t.resolve(l)}),n=jt(()=>{const{matched:l}=r.value,{length:h}=l,c=l[h-1],u=i.matched;if(!c||!u.length)return-1;const f=u.findIndex(Si.bind(null,c));if(f>-1)return f;const d=Pa(l[h-2]);return h>1&&Pa(c)===d&&u[u.length-1].path!==d?u.findIndex(Si.bind(null,l[h-2])):f}),s=jt(()=>n.value>-1&&wf(i.params,r.value.params)),a=jt(()=>n.value>-1&&n.value===i.matched.length-1&&vl(i.params,r.value.params));function o(l={}){if(Cf(l)){const h=t[xe(e.replace)?"replace":"push"](xe(e.to)).catch(qi);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:jt(()=>r.value.href),isActive:s,isExactActive:a,navigate:o}}function yf(e){return e.length===1?e[0]:e}const bf=Jr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ea,setup(e,{slots:t}){const i=xi(Ea(e)),{options:r}=Ee(Ps),n=jt(()=>({[Ta(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[Ta(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const s=t.default&&yf(t.default(i));return e.custom?s:rn("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:n.value},s)}}}),Sf=bf;function Cf(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function wf(e,t){for(const i in t){const r=t[i],n=e[i];if(typeof r=="string"){if(r!==n)return!1}else if(!he(n)||n.length!==r.length||r.some((s,a)=>s!==n[a]))return!1}return!0}function Pa(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ta=(e,t,i)=>e??t??i,xf=Jr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const r=Ee(Vn),n=jt(()=>e.route||r.value),s=Ee(xa,0),a=jt(()=>{let h=xe(s);const{matched:c}=n.value;let u;for(;(u=c[h])&&!u.components;)h++;return h}),o=jt(()=>n.value.matched[a.value]);Ar(xa,jt(()=>a.value+1)),Ar(_f,o),Ar(Vn,n);const l=de();return qe(()=>[l.value,o.value,e.name],([h,c,u],[f,d,g])=>{c&&(c.instances[u]=h,d&&d!==c&&h&&h===f&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),h&&c&&(!d||!Si(c,d)||!f)&&(c.enterCallbacks[u]||[]).forEach(_=>_(h))},{flush:"post"}),()=>{const h=n.value,c=e.name,u=o.value,f=u&&u.components[c];if(!f)return Aa(i.default,{Component:f,route:h});const d=u.props[c],g=d?d===!0?h.params:typeof d=="function"?d(h):d:null,y=rn(f,gt({},g,t,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(u.instances[c]=null)},ref:l}));return Aa(i.default,{Component:y,route:h})||y}}});function Aa(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const wl=xf;function Ef(e){const t=uf(e.routes,e),i=e.parseQuery||vf,r=e.stringifyQuery||wa,n=e.history,s=ki(),a=ki(),o=ki(),l=Qe(ke);let h=ke;ci&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=bn.bind(null,T=>""+T),u=bn.bind(null,Nu),f=bn.bind(null,sr);function d(T,V){let U,Q;return _l(T)?(U=t.getRecordMatcher(T),Q=V):Q=T,t.addRoute(Q,U)}function g(T){const V=t.getRecordMatcher(T);V&&t.removeRoute(V)}function _(){return t.getRoutes().map(T=>T.record)}function y(T){return!!t.getRecordMatcher(T)}function E(T,V){if(V=gt({},V||l.value),typeof T=="string"){const m=Sn(i,T,V.path),x=t.resolve({path:m.path},V),k=n.createHref(m.fullPath);return gt(m,x,{params:f(x.params),hash:sr(m.hash),redirectedFrom:void 0,href:k})}let U;if(T.path!=null)U=gt({},T,{path:Sn(i,T.path,V.path).path});else{const m=gt({},T.params);for(const x in m)m[x]==null&&delete m[x];U=gt({},T,{params:u(m)}),V.params=u(V.params)}const Q=t.resolve(U,V),dt=T.hash||"";Q.params=c(f(Q.params));const wt=Bu(r,gt({},T,{hash:Iu(dt),path:Q.path})),p=n.createHref(wt);return gt({fullPath:wt,hash:dt,query:r===wa?mf(T.query):T.query||{}},Q,{redirectedFrom:void 0,href:p})}function b(T){return typeof T=="string"?Sn(i,T,l.value.path):gt({},T)}function S(T,V){if(h!==T)return Ci(8,{from:V,to:T})}function w(T){return D(T)}function A(T){return w(gt(b(T),{replace:!0}))}function R(T){const V=T.matched[T.matched.length-1];if(V&&V.redirect){const{redirect:U}=V;let Q=typeof U=="function"?U(T):U;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=b(Q):{path:Q},Q.params={}),gt({query:T.query,hash:T.hash,params:Q.path!=null?{}:T.params},Q)}}function D(T,V){const U=h=E(T),Q=l.value,dt=T.state,wt=T.force,p=T.replace===!0,m=R(U);if(m)return D(gt(b(m),{state:typeof m=="object"?gt({},dt,m.state):dt,force:wt,replace:p}),V||U);const x=U;x.redirectedFrom=V;let k;return!wt&&Wu(r,Q,U)&&(k=Ci(16,{to:x,from:Q}),rt(Q,Q,!0,!1)),(k?Promise.resolve(k):W(x,Q)).catch(P=>ye(P)?ye(P,2)?P:tt(P):K(P,x,Q)).then(P=>{if(P){if(ye(P,2))return D(gt({replace:p},b(P.to),{state:typeof P.to=="object"?gt({},dt,P.to.state):dt,force:wt}),V||x)}else P=et(x,Q,!0,p,dt);return Y(x,Q,P),P})}function L(T,V){const U=S(T,V);return U?Promise.reject(U):Promise.resolve()}function H(T){const V=Lt.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(T):T()}function W(T,V){let U;const[Q,dt,wt]=Pf(T,V);U=Cn(Q.reverse(),"beforeRouteLeave",T,V);for(const m of Q)m.leaveGuards.forEach(x=>{U.push(Ie(x,T,V))});const p=L.bind(null,T,V);return U.push(p),Zt(U).then(()=>{U=[];for(const m of s.list())U.push(Ie(m,T,V));return U.push(p),Zt(U)}).then(()=>{U=Cn(dt,"beforeRouteUpdate",T,V);for(const m of dt)m.updateGuards.forEach(x=>{U.push(Ie(x,T,V))});return U.push(p),Zt(U)}).then(()=>{U=[];for(const m of wt)if(m.beforeEnter)if(he(m.beforeEnter))for(const x of m.beforeEnter)U.push(Ie(x,T,V));else U.push(Ie(m.beforeEnter,T,V));return U.push(p),Zt(U)}).then(()=>(T.matched.forEach(m=>m.enterCallbacks={}),U=Cn(wt,"beforeRouteEnter",T,V,H),U.push(p),Zt(U))).then(()=>{U=[];for(const m of a.list())U.push(Ie(m,T,V));return U.push(p),Zt(U)}).catch(m=>ye(m,8)?m:Promise.reject(m))}function Y(T,V,U){o.list().forEach(Q=>H(()=>Q(T,V,U)))}function et(T,V,U,Q,dt){const wt=S(T,V);if(wt)return wt;const p=V===ke,m=ci?history.state:{};U&&(Q||p?n.replace(T.fullPath,gt({scroll:p&&m&&m.scroll},dt)):n.push(T.fullPath,dt)),l.value=T,rt(T,V,U,p),tt()}let q;function lt(){q||(q=n.listen((T,V,U)=>{if(!fr.listening)return;const Q=E(T),dt=R(Q);if(dt){D(gt(dt,{replace:!0,force:!0}),Q).catch(qi);return}h=Q;const wt=l.value;ci&&qu(ga(wt.fullPath,U.delta),nn()),W(Q,wt).catch(p=>ye(p,12)?p:ye(p,2)?(D(gt(b(p.to),{force:!0}),Q).then(m=>{ye(m,20)&&!U.delta&&U.type===ar.pop&&n.go(-1,!1)}).catch(qi),Promise.reject()):(U.delta&&n.go(-U.delta,!1),K(p,Q,wt))).then(p=>{p=p||et(Q,wt,!1),p&&(U.delta&&!ye(p,8)?n.go(-U.delta,!1):U.type===ar.pop&&ye(p,20)&&n.go(-1,!1)),Y(Q,wt,p)}).catch(qi)}))}let Pt=ki(),Z=ki(),j;function K(T,V,U){tt(T);const Q=Z.list();return Q.length?Q.forEach(dt=>dt(T,V,U)):console.error(T),Promise.reject(T)}function ot(){return j&&l.value!==ke?Promise.resolve():new Promise((T,V)=>{Pt.add([T,V])})}function tt(T){return j||(j=!T,lt(),Pt.list().forEach(([V,U])=>T?U(T):V()),Pt.reset()),T}function rt(T,V,U,Q){const{scrollBehavior:dt}=e;if(!ci||!dt)return Promise.resolve();const wt=!U&&Ku(ga(T.fullPath,0))||(Q||!U)&&history.state&&history.state.scroll||null;return Oo().then(()=>dt(T,V,wt)).then(p=>p&&Xu(p)).catch(p=>K(p,T,V))}const ht=T=>n.go(T);let Tt;const Lt=new Set,fr={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:_,resolve:E,options:e,push:w,replace:A,go:ht,back:()=>ht(-1),forward:()=>ht(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:Z.add,isReady:ot,install(T){const V=this;T.component("RouterLink",Sf),T.component("RouterView",wl),T.config.globalProperties.$router=V,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>xe(l)}),ci&&!Tt&&l.value===ke&&(Tt=!0,w(n.location).catch(dt=>{}));const U={};for(const dt in ke)Object.defineProperty(U,dt,{get:()=>l.value[dt],enumerable:!0});T.provide(Ps,V),T.provide(Cl,Ao(U)),T.provide(Vn,l);const Q=T.unmount;Lt.add(T),T.unmount=function(){Lt.delete(T),Lt.size<1&&(h=ke,q&&q(),q=null,l.value=ke,Tt=!1,j=!1),Q()}}};function Zt(T){return T.reduce((V,U)=>V.then(()=>H(U)),Promise.resolve())}return fr}function Pf(e,t){const i=[],r=[],n=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const o=t.matched[a];o&&(e.matched.find(h=>Si(h,o))?r.push(o):i.push(o));const l=e.matched[a];l&&(t.matched.find(h=>Si(h,l))||n.push(l))}return[i,r,n]}const Tf={__name:"App",setup(e){return(t,i)=>(Ce(),Hr(xe(wl)))}},Af="modulepreload",Rf=function(e){return"/"+e},Ra={},ka=function(t,i,r){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=Rf(s),s in Ra)return;Ra[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let c=n.length-1;c>=0;c--){const u=n[c];if(u.href===s&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":Af,a||(h.as="script",h.crossOrigin=""),h.href=s,document.head.appendChild(h),a)return new Promise((c,u)=>{h.addEventListener("load",c),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};function xl(e){return fo()?(Sh(e),!0):!1}const Ts=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const kf=Object.prototype.toString,Mf=e=>kf.call(e)==="[object Object]";function Of(e){let t;function i(){return t||(t=e()),t}return i.reset=async()=>{const r=t;t=void 0,r&&await r},i}function wn(e){return Array.isArray(e)?e:[e]}function Lf(e,t,i={}){const{immediate:r=!0,immediateCallback:n=!1}=i,s=Qe(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function l(){s.value=!1,o()}function h(...c){n&&e(),o(),s.value=!0,a=setTimeout(()=>{s.value=!1,a=null,e(...c)},pi(t))}return r&&(s.value=!0,Ts&&h()),xl(l),{isPending:ds(s),start:h,stop:l}}function If(e,t,i){return qe(e,t,{...i,immediate:!0})}const Df=Ts?window:void 0,El=Ts?window.navigator:void 0;function Gf(e){var t;const i=pi(e);return(t=i==null?void 0:i.$el)!=null?t:i}function Pl(...e){const t=[],i=()=>{t.forEach(o=>o()),t.length=0},r=(o,l,h,c)=>(o.addEventListener(l,h,c),()=>o.removeEventListener(l,h,c)),n=jt(()=>{const o=wn(pi(e[0])).filter(l=>l!=null);return o.every(l=>typeof l!="string")?o:void 0}),s=If(()=>{var o,l;return[(l=(o=n.value)==null?void 0:o.map(h=>Gf(h)))!=null?l:[Df].filter(h=>h!=null),wn(pi(n.value?e[1]:e[0])),wn(xe(n.value?e[2]:e[1])),pi(n.value?e[3]:e[2])]},([o,l,h,c])=>{if(i(),!(o!=null&&o.length)||!(l!=null&&l.length)||!(h!=null&&h.length))return;const u=Mf(c)?{...c}:c;t.push(...o.flatMap(f=>l.flatMap(d=>h.map(g=>r(f,d,g,u)))))},{flush:"post"}),a=()=>{s(),i()};return xl(i),a}function Nf(){const e=Qe(!1),t=ws();return t&&hr(()=>{e.value=!0},t),e}function Tl(e){const t=Nf();return jt(()=>(t.value,!!e()))}function Ma(e,t={}){const{controls:i=!1,navigator:r=El}=t,n=Tl(()=>r&&"permissions"in r),s=Qe(),a=typeof e=="string"?{name:e}:e,o=Qe(),l=()=>{var c,u;o.value=(u=(c=s.value)==null?void 0:c.state)!=null?u:"prompt"};Pl(s,"change",l,{passive:!0});const h=Of(async()=>{if(n.value){if(!s.value)try{s.value=await r.permissions.query(a)}catch{s.value=void 0}finally{l()}if(i)return ft(s.value)}});return h(),i?{state:o,isSupported:n,query:h}:o}function Ff(e={}){const{navigator:t=El,read:i=!1,source:r,copiedDuring:n=1500,legacy:s=!1}=e,a=Tl(()=>t&&"clipboard"in t),o=Ma("clipboard-read"),l=Ma("clipboard-write"),h=jt(()=>a.value||s),c=Qe(""),u=Qe(!1),f=Lf(()=>u.value=!1,n,{immediate:!1});function d(){let b=!(a.value&&E(o.value));if(!b)try{t.clipboard.readText().then(S=>{c.value=S})}catch{b=!0}b&&(c.value=y())}h.value&&i&&Pl(["copy","cut"],d,{passive:!0});async function g(b=pi(r)){if(h.value&&b!=null){let S=!(a.value&&E(l.value));if(!S)try{await t.clipboard.writeText(b)}catch{S=!0}S&&_(b),c.value=b,u.value=!0,f.start()}}function _(b){const S=document.createElement("textarea");S.value=b??"",S.style.position="absolute",S.style.opacity="0",document.body.appendChild(S),S.select(),document.execCommand("copy"),S.remove()}function y(){var b,S,w;return(w=(S=(b=document==null?void 0:document.getSelection)==null?void 0:b.call(document))==null?void 0:S.toString())!=null?w:""}function E(b){return b==="granted"||b==="prompt"}return{isSupported:h,text:c,copied:u,copy:g}}const Hf=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i},Bf={class:"container"},Wf={key:0,class:"modal"},zf={class:"modal-content"},Uf="Application Architecture",Mi=160,Ye=80,Oa=150,La=150,jf={__name:"Deployments",setup(e){de([]);const t=de([]),i=de([]),r=de(null),n=de(!1),s=de(""),a=de(!1),o=jt(()=>a.value?"dark-mode":"light-mode"),l=()=>{a.value=!a.value},h=de({width:1200,height:800}),c={Deployment:{color:"#4CAF50",stroke:"#2E7D32"},Database:{color:"#FFA500",stroke:"#FF8C00"}},u=b=>{const S={Deployment:[],Service:[],Database:[]};return b.forEach(w=>{const A=w.kind;A==="Deployment"?w.metadata.name.toLowerCase().includes("postgres")?S.Database.push({metadata:w.metadata,spec:w.spec,kind:"Database"}):S.Deployment.push({metadata:w.metadata,spec:w.spec,kind:"Deployment"}):A==="Service"?S.Service.push({metadata:w.metadata,spec:w.spec,kind:"Service"}):A==="StatefulSet"&&w.metadata.name.toLowerCase().includes("postgres")&&S.Database.push({metadata:w.metadata,spec:w.spec,kind:"Database"})}),S},f=b=>{const S=new Map;b.Service.forEach(j=>{const K=j.spec.selector||{},ot=[...b.Deployment,...b.Database].find(tt=>{const rt=tt.spec.template.metadata.labels||{};return Object.entries(K).every(([ht,Tt])=>rt[ht]===Tt)});ot&&S.set(j.metadata.name,ot.metadata.name)});const w=new Map;b.Deployment.forEach(j=>{const K=new Set;(j.spec.template.spec.containers||[]).forEach(tt=>{(tt.env||[]).forEach(ht=>{const Tt=ht.value;if(typeof Tt=="string"&&S.has(Tt)){const Lt=S.get(Tt);Lt!==j.metadata.name&&K.add(Lt)}})}),w.set(j.metadata.name,Array.from(K))});const A=new Map;b.Database.forEach(j=>{const K=j.metadata.name;b.Deployment.forEach(ot=>{(ot.spec.template.spec.containers||[]).forEach(rt=>{(rt.env||[]).forEach(Tt=>{Tt.value.includes(K)&&(A.has(j.metadata.name)||A.set(j.metadata.name,[]),A.get(j.metadata.name).push(ot.metadata.name))})})})});const R=[...b.Deployment,...b.Database],D=R.length,L=Math.ceil(Math.sqrt(D)),H=Math.ceil(D/L),W=L*Mi+(L-1)*Oa,Y=H*Ye+(H-1)*La,et=(h.value.width-W)/2,q=(h.value.height-Y)/2,lt=new Map;R.forEach((j,K)=>{const ot=Math.floor(K/L),tt=K%L,rt=et+tt*(Mi+Oa),ht=q+ot*(Ye+La);lt.set(j.metadata.name,{x:rt,y:ht})});const Pt=R.map(j=>{const K=lt.get(j.metadata.name),ot=j.kind==="Database"?"Database":"Deployment";return{id:j.metadata.name,name:j.metadata.name,type:ot,style:{width:Mi,height:Ye,fill:c[ot].color,stroke:c[ot].stroke,strokeWidth:2,cornerRadius:8,shadowColor:"rgba(0,0,0,0.2)",shadowBlur:5,shadowOpacity:.3},position:{x:K.x,y:K.y,offsetX:0,offsetY:0}}}),Z=[];return w.forEach((j,K)=>{const ot=lt.get(K);j.forEach(tt=>{const rt=lt.get(tt);Z.push({points:[ot.x+Mi,ot.y+Ye/2,rt.x,rt.y+Ye/2],stroke:"#666",strokeWidth:2,pointerLength:10,pointerWidth:10})})}),A.forEach((j,K)=>{const ot=lt.get(K);j.forEach(tt=>{const rt=lt.get(tt);Z.push({points:[rt.x+Mi,rt.y+Ye/2,ot.x,ot.y+Ye/2],stroke:"#666",strokeWidth:2,pointerLength:10,pointerWidth:10})})}),{nodes:Pt,connections:Z,deploymentConnections:w,dbConnections:A,serviceToDeployment:S}},d=async()=>{try{const b=await fetch("/api/helm-chart/codyahelm?type=manifest&output=json");if(!b.ok)throw new Error("Failed to fetch Helm chart");const S=await b.json(),w=u(S),{nodes:A,connections:R,deploymentConnections:D,dbConnections:L,serviceToDeployment:H}=f(w);t.value=A,i.value=R,window.deploymentConnections=D,window.dbConnections=L,window.items=w,window.serviceToDeployment=H}catch(b){console.error("Error loading Helm chart:",b)}},g=b=>{r.value=b,_(b),n.value=!0},_=b=>{const{name:S,type:w}=b;let A=[];if(w==="Deployment"){const R=window.deploymentConnections.get(S)||[];window.items.Service.filter(L=>R.includes(window.serviceToDeployment.get(L.metadata.name))).forEach(L=>{const H=L.spec.ports[0].port,W=H;A.push(`kubectl port-forward svc/${L.metadata.name} ${W}:${H} &`)}),R.forEach(L=>{A.push(`kubectl proxy pod ${L} --address=localhost &`)})}else if(w==="Database"){const R=window.dbConnections.get(S)||[],D=`${S}-service`,L=window.items.Service.find(H=>H.metadata.name===D);if(L){const H=L.spec.ports[0].port;A.push(`kubectl port-forward svc/${D} ${H}:${H} &`)}R.forEach(H=>{A.push(`kubectl proxy --pod=${H} --address=localhost &`)})}s.value=A.length?A.join(`
`):"# No commands generated for this node"},y=()=>{const{copy:b}=Ff();b(s.value),alert("Commands copied to clipboard!")},E=()=>{n.value=!1};return hr(()=>{d()}),(b,S)=>{const w=ai("v-arrow"),A=ai("v-rect"),R=ai("v-text"),D=ai("v-group"),L=ai("v-layer"),H=ai("v-stage");return Ce(),Fi("div",{class:qr(o.value)},[qt("div",Bf,[S[1]||(S[1]=qt("a",{href:"/charts",class:"nav-link"}," Back to Charts",-1)),qt("button",{onClick:l,class:"mode-toggle"}," Switch to "+Gi(a.value?"Light":"Dark")+" Mode ",1),qt("div",{class:"header"},[qt("h1",{class:"environment"},Gi(Uf)),S[0]||(S[0]=qt("h3",{class:"subtitle"},"Deployment and Database Communication Diagram",-1))]),It(H,{config:h.value,class:"canvas-container"},{default:Tr(()=>[It(L,null,{default:Tr(()=>[(Ce(!0),Fi(ae,null,zs(i.value,(W,Y)=>(Ce(),Hr(w,{key:"conn-"+Y,config:W},null,8,["config"]))),128)),(Ce(!0),Fi(ae,null,zs(t.value,(W,Y)=>(Ce(),Hr(D,{key:"node-"+Y,config:W.position,onClick:et=>g(W)},{default:Tr(()=>[It(A,{config:W.style},null,8,["config"]),It(R,{config:{text:W.name,fontSize:16,fill:"#fff",width:W.style.width,align:"center",padding:5}},null,8,["config"])]),_:2},1032,["config","onClick"]))),128))]),_:1})]),_:1},8,["config"]),n.value?(Ce(),Fi("div",Wf,[qt("div",zf,[qt("h3",null,"Commands for "+Gi(r.value.name),1),qt("pre",null,Gi(s.value),1),qt("button",{onClick:y},"Copy to Clipboard"),qt("button",{onClick:E},"Close")])])):Wc("",!0)])],2)}}},Yf=Hf(jf,[["__scopeId","data-v-40c2512c"]]),$f={__name:"HomeView",setup(e){return(t,i)=>(Ce(),Fi("main",null,[It(Yf)]))}},Vf=Ef({history:tf("/"),routes:[{path:"/",name:"home",component:$f},{path:"/about",name:"about",component:()=>ka(()=>import("./AboutView-c75400ba.js"),["assets/AboutView-c75400ba.js","assets/AboutView-4d995ba2.css"])},{path:"/charts",name:"charts",component:()=>ka(()=>import("./HelmChart-99b5ae01.js"),["assets/HelmChart-99b5ae01.js","assets/HelmChart-ad134073.css"])}]});var Xf=Math.PI/180;function qf(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const _i=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},X={_global:_i,version:"8.4.3",isBrowser:qf(),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle(e){return X.angleDeg?e*Xf:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return X.DD.isDragging},isDragReady(){return!!X.DD.node},releaseCanvasOnDestroy:!0,document:_i.document,_injectGlobal(e){_i.Konva=e}},Rt=e=>{X[e.prototype.getClassName()]=e};X._injectGlobal(X);class Kt{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Kt(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var i=this.m;return{x:i[0]*t.x+i[2]*t.y+i[4],y:i[1]*t.x+i[3]*t.y+i[5]}}translate(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this}scale(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this}rotate(t){var i=Math.cos(t),r=Math.sin(t),n=this.m[0]*i+this.m[2]*r,s=this.m[1]*i+this.m[3]*r,a=this.m[0]*-r+this.m[2]*i,o=this.m[1]*-r+this.m[3]*i;return this.m[0]=n,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,i){var r=this.m[0]+this.m[2]*i,n=this.m[1]+this.m[3]*i,s=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=n,this.m[2]=s,this.m[3]=a,this}multiply(t){var i=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,r=-this.m[1]*t,n=-this.m[2]*t,s=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var t=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],s=this.m[4],a=this.m[5],o=t*n-i*r;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||i!=0){var h=Math.sqrt(t*t+i*i);l.rotation=i>0?Math.acos(t/h):-Math.acos(t/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(t*r+i*n)/o,l.skewY=0}else if(r!=0||n!=0){var c=Math.sqrt(r*r+n*n);l.rotation=Math.PI/2-(n>0?Math.acos(-r/c):-Math.acos(r/c)),l.scaleX=o/c,l.scaleY=c,l.skewX=0,l.skewY=(t*r+i*n)/o}return l.rotation=C._getRotation(l.rotation),l}}var Kf="[object Array]",Qf="[object Number]",Jf="[object String]",Zf="[object Boolean]",td=Math.PI/180,ed=180/Math.PI,xn="#",id="",rd="0",nd="Konva warning: ",Ia="Konva error: ",sd="rgb(",En={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},ad=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,vr=[];const od=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,60)},C={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===Kf},_isNumber(e){return Object.prototype.toString.call(e)===Qf&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===Jf},_isBoolean(e){return Object.prototype.toString.call(e)===Zf},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;var t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){vr.push(e),vr.length===1&&od(function(){const t=vr;vr=[],t.forEach(function(i){i()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var i=C.createImageElement();i.onload=function(){t(i)},i.src=e},_rgbToHex(e,t,i){return((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},_hexToRgb(e){e=e.replace(xn,id);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){for(var e=(Math.random()*16777215<<0).toString(16);e.length<6;)e=rd+e;return xn+e},getRGB(e){var t;return e in En?(t=En[e],{r:t[0],g:t[1],b:t[2]}):e[0]===xn?this._hexToRgb(e.substring(1)):e.substr(0,4)===sd?(t=ad.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",C._namedColorToRBA(e)||C._hex3ColorToRGBA(e)||C._hex4ColorToRGBA(e)||C._hex6ColorToRGBA(e)||C._hex8ColorToRGBA(e)||C._rgbColorToRGBA(e)||C._rgbaColorToRGBA(e)||C._hslColorToRGBA(e)},_namedColorToRBA(e){var t=En[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];var t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];var t=e.split(/ *, */).map((i,r)=>i.slice(-1)==="%"?r===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if(e[0]==="#"&&e.length===9)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if(e[0]==="#"&&e.length===5)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),r=Number(i[0])/360,n=Number(i[1])/100,s=Number(i[2])/100;let a,o,l;if(n===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+n):a=s+n-s*n;const h=2*s-a,c=[0,0,0];for(let u=0;u<3;u++)o=r+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,c[u]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){var t={};for(var i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*td},radToDeg(e){return e*ed},_degToRad(e){return C.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),C.degToRad(e)},_radToDeg(e){return C.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),C.radToDeg(e)},_getRotation(e){return X.angleDeg?C.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(Ia+e)},error(e){console.error(Ia+e)},warn(e){X.showWarnings&&console.warn(nd+e)},each(e,t){for(var i in e)t(i,e[i])},_inRange(e,t,i){return t<=e&&e<i},_getProjectionToSegment(e,t,i,r,n,s){var a,o,l,h=(e-i)*(e-i)+(t-r)*(t-r);if(h==0)a=e,o=t,l=(n-i)*(n-i)+(s-r)*(s-r);else{var c=((n-e)*(i-e)+(s-t)*(r-t))/h;c<0?(a=e,o=t,l=(e-n)*(e-n)+(t-s)*(t-s)):c>1?(a=i,o=r,l=(i-n)*(i-n)+(r-s)*(r-s)):(a=e+c*(i-e),o=t+c*(r-t),l=(a-n)*(a-n)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(e,t,i){var r=C.cloneObject(e),n=Number.MAX_VALUE;return t.forEach(function(s,a){if(!(!i&&a===t.length-1)){var o=t[(a+1)%t.length],l=C._getProjectionToSegment(s.x,s.y,o.x,o.y,e.x,e.y),h=l[0],c=l[1],u=l[2];u<n&&(r.x=h,r.y=c,n=u)}}),r},_prepareArrayForTween(e,t,i){var r,n=[],s=[];if(e.length>t.length){var a=t;t=e,e=a}for(r=0;r<e.length;r+=2)n.push({x:e[r],y:e[r+1]});for(r=0;r<t.length;r+=2)s.push({x:t[r],y:t[r+1]});var o=[];return s.forEach(function(l){var h=C._getProjectionToLine(l,n,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(e){var t;e.visitedByCircularReferenceRemoval=!0;for(var i in e)if(e.hasOwnProperty(i)&&e[i]&&typeof e[i]=="object"){if(t=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||C._isElement(e[i]))if(t.configurable)delete e[i];else return null;else if(C._prepareToStringify(e[i])===null)if(t.configurable)delete e[i];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var i in t)e[i]=t[i];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){X.releaseCanvasOnDestroy&&e.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(e,t,i,r){let n=0,s=0,a=0,o=0;typeof r=="number"?n=s=a=o=Math.min(r,t/2,i/2):(n=Math.min(r[0]||0,t/2,i/2),s=Math.min(r[1]||0,t/2,i/2),o=Math.min(r[2]||0,t/2,i/2),a=Math.min(r[3]||0,t/2,i/2)),e.moveTo(n,0),e.lineTo(t-s,0),e.arc(t-s,s,s,Math.PI*3/2,0,!1),e.lineTo(t,i-o),e.arc(t-o,i-o,o,0,Math.PI/2,!1),e.lineTo(a,i),e.arc(a,i-a,a,Math.PI/2,Math.PI,!1),e.lineTo(0,n),e.arc(n,n,n,Math.PI,Math.PI*3/2,!1)}};function Be(e){return C._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||C._isBoolean(e)?e:Object.prototype.toString.call(e)}function Al(e){return e>255?255:e<0?0:Math.round(e)}function N(){if(X.isUnminified)return function(e,t){return C._isNumber(e)||C.warn(Be(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function As(e){if(X.isUnminified)return function(t,i){let r=C._isNumber(t),n=C._isArray(t)&&t.length==e;return!r&&!n&&C.warn(Be(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function Rs(){if(X.isUnminified)return function(e,t){var i=C._isNumber(e),r=e==="auto";return i||r||C.warn(Be(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function Ei(){if(X.isUnminified)return function(e,t){return C._isString(e)||C.warn(Be(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function Rl(){if(X.isUnminified)return function(e,t){const i=C._isString(e),r=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||r||C.warn(Be(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function ld(){if(X.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(C._isArray(e)?e.forEach(function(r){C._isNumber(r)||C.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):C.warn(Be(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function ce(){if(X.isUnminified)return function(e,t){var i=e===!0||e===!1;return i||C.warn(Be(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function hd(e){if(X.isUnminified)return function(t,i){return t==null||C.isObject(t)||C.warn(Be(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}var Oi="get",Li="set";const v={addGetterSetter(e,t,i,r,n){v.addGetter(e,t,i),v.addSetter(e,t,r,n),v.addOverloadedGetterSetter(e,t)},addGetter(e,t,i){var r=Oi+C._capitalize(t);e.prototype[r]=e.prototype[r]||function(){var n=this.attrs[t];return n===void 0?i:n}},addSetter(e,t,i,r){var n=Li+C._capitalize(t);e.prototype[n]||v.overWriteSetter(e,t,i,r)},overWriteSetter(e,t,i,r){var n=Li+C._capitalize(t);e.prototype[n]=function(s){return i&&s!==void 0&&s!==null&&(s=i.call(this,s,t)),this._setAttr(t,s),r&&r.call(this),this}},addComponentsGetterSetter(e,t,i,r,n){var s=i.length,a=C._capitalize,o=Oi+a(t),l=Li+a(t),h,c;e.prototype[o]=function(){var f={};for(h=0;h<s;h++)c=i[h],f[c]=this.getAttr(t+a(c));return f};var u=hd(i);e.prototype[l]=function(f){var d=this.attrs[t],g;r&&(f=r.call(this,f)),u&&u.call(this,f,t);for(g in f)f.hasOwnProperty(g)&&this._setAttr(t+a(g),f[g]);return f||i.forEach(_=>{this._setAttr(t+a(_),void 0)}),this._fireChangeEvent(t,d,f),n&&n.call(this),this},v.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var i=C._capitalize(t),r=Li+i,n=Oi+i;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(e,t,i,r){C.error("Adding deprecated "+t);var n=Oi+C._capitalize(t),s=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[n]=function(){C.error(s);var a=this.attrs[t];return a===void 0?i:a},v.addSetter(e,t,r,function(){C.error(s)}),v.addOverloadedGetterSetter(e,t)},backCompat(e,t){C.each(t,function(i,r){var n=e.prototype[r],s=Oi+C._capitalize(i),a=Li+C._capitalize(i);function o(){n.apply(this,arguments),C.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}e.prototype[i]=o,e.prototype[s]=o,e.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function cd(e){var t=[],i=e.length,r=C,n,s;for(n=0;n<i;n++)s=e[n],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),t.push(s);return t}var Da=",",ud="(",fd=")",dd="([",gd="])",pd=";",vd="()",md="=",Ga=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],_d=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const yd=100;class sn{constructor(t){this.canvas=t,X.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){var r=this.traceArr,n=r.length,s="",a,o,l,h;for(a=0;a<n;a++)o=r[a],l=o.method,l?(h=o.args,s+=l,t?s+=vd:C._isArray(h[0])?s+=dd+h.join(Da)+gd:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),s+=ud+h.join(Da)+fd)):(s+=o.property,t||(s+=md+o.val)),s+=pd;return s}clearTrace(){this.traceArr=[]}_trace(t){var i=this.traceArr,r;i.push(t),r=i.length,r>=yd&&i.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){var i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,r,n,s,a){this._context.arc(t,i,r,n,s,a)}arcTo(t,i,r,n,s){this._context.arcTo(t,i,r,n,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,r,n,s,a){this._context.bezierCurveTo(t,i,r,n,s,a)}clearRect(t,i,r,n){this._context.clearRect(t,i,r,n)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,i){var r=arguments;if(r.length===2)return this._context.createImageData(t,i);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,r,n){return this._context.createLinearGradient(t,i,r,n)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,r,n,s,a){return this._context.createRadialGradient(t,i,r,n,s,a)}drawImage(t,i,r,n,s,a,o,l,h){var c=arguments,u=this._context;c.length===3?u.drawImage(t,i,r):c.length===5?u.drawImage(t,i,r,n,s):c.length===9&&u.drawImage(t,i,r,n,s,a,o,l,h)}ellipse(t,i,r,n,s,a,o,l){this._context.ellipse(t,i,r,n,s,a,o,l)}isPointInPath(t,i,r,n){return r?this._context.isPointInPath(r,t,i,n):this._context.isPointInPath(t,i,n)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,i,r,n){this._context.fillRect(t,i,r,n)}strokeRect(t,i,r,n){this._context.strokeRect(t,i,r,n)}fillText(t,i,r,n){n?this._context.fillText(t,i,r,n):this._context.fillText(t,i,r)}measureText(t){return this._context.measureText(t)}getImageData(t,i,r,n){return this._context.getImageData(t,i,r,n)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,r,n){this._context.rect(t,i,r,n)}putImageData(t,i,r){this._context.putImageData(t,i,r)}quadraticCurveTo(t,i,r,n){this._context.quadraticCurveTo(t,i,r,n)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,r,n,s,a){this._context.setTransform(t,i,r,n,s,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,r,n){this._context.strokeText(t,i,r,n)}transform(t,i,r,n,s,a){this._context.transform(t,i,r,n,s,a)}translate(t,i){this._context.translate(t,i)}_enableTrace(){var t=this,i=Ga.length,r=this.setAttr,n,s,a=function(o){var l=t[o],h;t[o]=function(){return s=cd(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:s}),h}};for(n=0;n<i;n++)a(Ga[n]);t.setAttr=function(){r.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;var r=!i||i==="source-over";r||this.setAttr("globalCompositeOperation",i)}}_d.forEach(function(e){Object.defineProperty(sn.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class bd extends sn{constructor(t){super(t),this._context=t._canvas.getContext("2d")}_fillColor(t){var i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),r=t.getFillPriority();if(i&&r==="color"){this._fillColor(t);return}const n=t.getFillPatternImage();if(n&&r==="pattern"){this._fillPattern(t);return}const s=t.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(t);return}const a=t.getFillRadialGradientColorStops();if(a&&r==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):n?this._fillPattern(t):s?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,r.x,r.y);if(n){for(var a=0;a<n.length;a+=2)s.addColorStop(n[a],n[a+1]);this.setAttr("strokeStyle",s)}}_stroke(t){var i=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var i,r,n,s=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,o=(n=t.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,u=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(u))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*u)}}class Sd extends sn{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const s=t.getStrokeScaleEnabled();if(!s){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),n=r==="auto"?t.strokeWidth():r;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),s||this.restore()}}}var mr;function Cd(){if(mr)return mr;var e=C.createCanvasElement(),t=e.getContext("2d");return mr=function(){var i=X._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/r}(),C.releaseCanvas(e),mr}class an{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=t||{},r=i.pixelRatio||X.pixelRatio||Cd();this.pixelRatio=r,this._canvas=C.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(n){return C.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}v.addGetterSetter(an,"pixelRatio",void 0,N());class yi extends an{constructor(t={width:0,height:0}){super(t),this.context=new bd(this),this.setSize(t.width,t.height)}}class ks extends an{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Sd(this),this.setSize(t.width,t.height)}}const ut={get isDragging(){var e=!1;return ut._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){var e;return ut._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];ut._dragElements.forEach((i,r)=>{const{node:n}=i,s=n.getStage();s.setPointersPositions(e),i.pointerId===void 0&&(i.pointerId=C._getFirstPointerId(e));const a=s._changedPointerPositions.find(h=>h.id===i.pointerId);if(a){if(i.dragStatus!=="dragging"){var o=n.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(n.startDrag({evt:e}),!n.isDragging()))return}n._setDragPosition(e,i),t.push(n)}}),t.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:e},!0)})},_endDragBefore(e){const t=[];ut._dragElements.forEach(i=>{const{node:r}=i,n=r.getStage();if(e&&n.setPointersPositions(e),!n._changedPointerPositions.find(o=>o.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(ut.justDragged=!0,X._mouseListenClick=!1,X._touchListenClick=!1,X._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof X.Stage&&i.node;a&&t.indexOf(a)===-1&&t.push(a)}),t.forEach(i=>{i.draw()})},_endDragAfter(e){ut._dragElements.forEach((t,i)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&ut._dragElements.delete(i)})}};X.isBrowser&&(window.addEventListener("mouseup",ut._endDragBefore,!0),window.addEventListener("touchend",ut._endDragBefore,!0),window.addEventListener("mousemove",ut._drag),window.addEventListener("touchmove",ut._drag),window.addEventListener("mouseup",ut._endDragAfter,!1),window.addEventListener("touchend",ut._endDragAfter,!1));var Mr="absoluteOpacity",_r="allEventListeners",be="absoluteTransform",Na="absoluteScale",$e="canvas",wd="Change",xd="children",Ed="konva",Xn="listening",Fa="mouseenter",Ha="mouseleave",Ba="set",Wa="Shape",Or=" ",za="stage",Me="transform",Pd="Stage",qn="visible",Td=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Or);let Ad=1;class G{constructor(t){this._id=Ad++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Me||t===be)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){var r=this._cache.get(t),n=t===Me||t===be,s=r===void 0||n&&r.dirty===!0;return s&&(r=i.call(this),this._cache.set(t,r)),r}_calculate(t,i,r){if(!this._attachedDepsListeners.get(t)){const n=i.map(s=>s+"Change.konva").join(Or);this.on(n,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get($e)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===be&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has($e)){const{scene:t,filter:i,hit:r}=this._cache.get($e);C.releaseCanvas(t,i,r),this._cache.delete($e)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var i=t||{},r={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(i.width||r.width),s=Math.ceil(i.height||r.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(r.x):i.x,l=i.y===void 0?Math.floor(r.y):i.y,h=i.offset||0,c=i.drawBorder||!1,u=i.hitCanvasPixelRatio||1;if(!n||!s){C.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}n+=h*2+1,s+=h*2+1,o-=h,l-=h;var f=new yi({pixelRatio:a,width:n,height:s}),d=new yi({pixelRatio:a,width:0,height:0}),g=new ks({pixelRatio:u,width:n,height:s}),_=f.getContext(),y=g.getContext();return g.isCache=!0,f.isCache=!0,this._cache.delete($e),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,d.getContext()._context.imageSmoothingEnabled=!1),_.save(),y.save(),_.translate(-o,-l),y.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Mr),this._clearSelfAndDescendantCache(Na),this.drawScene(f,this),this.drawHit(g,this),this._isUnderCache=!1,_.restore(),y.restore(),c&&(_.save(),_.beginPath(),_.rect(0,0,n,s),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set($e,{scene:f,filter:d,hit:g,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has($e)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n,s,a,o,l=this.getAbsoluteTransform(i);return r.forEach(function(h){var c=l.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:n,y:s,width:a-n,height:o-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/n,r.height/n),t.restore()}_drawCachedHitCanvas(t){var i=this._getCanvasCache(),r=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),i=this._getCanvasCache(),r=i.scene,n=i.filter,s=n.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var c=r.pixelRatio;n.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(a=t.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),o=s.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){C.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(u){C.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return n}return r}on(t,i){if(this._cache&&this._cache.delete(_r),arguments.length===3)return this._delegate.apply(this,arguments);var r=t.split(Or),n=r.length,s,a,o,l,h;for(s=0;s<n;s++)a=r[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(t,i){var r=(t||"").split(Or),n=r.length,s,a,o,l,h,c;if(this._cache&&this._cache.delete(_r),!t)for(a in this.eventListeners)this._off(a);for(s=0;s<n;s++)if(o=r[s],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(a in this.eventListeners)this._off(a,c,i);return this}dispatchEvent(t){var i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(r){i.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,r){var n=this;this.on(t,function(s){for(var a=s.target.findAncestors(i,!0,n),o=0;o<a.length;o++)s=C.cloneObject(s),s.currentTarget=a[o],r.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),ut._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(be),this._clearSelfAndDescendantCache(Mr),this._clearSelfAndDescendantCache(Na),this._clearSelfAndDescendantCache(za),this._clearSelfAndDescendantCache(qn),this._clearSelfAndDescendantCache(Xn)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var i="get"+C._capitalize(t);return C._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),i=[];t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var i,r;if(!t)return this;for(i in t)i!==xd&&(r=Ba+C._capitalize(i),C._isFunction(this[r])?this[r](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Xn,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(qn,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),n=!1;ut._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===r)&&(n=!0)});var s=!i&&!X.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),i=this,r=0,n,s,a,o;function l(h){for(n=[],s=h.length,a=0;a<s;a++)o=h[a],r++,o.nodeType!==Wa&&(n=n.concat(o.getChildren().slice())),o._id===i._id&&(a=s);n.length>0&&n[0].getDepth()<=t&&l(n)}return i.nodeType!==Pd&&l(i.getStage().getChildren()),r}getDepth(){for(var t=0,i=this.parent;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Me),this._clearSelfAndDescendantCache(be)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(t){let i=!1,r=this.parent;for(;r;){if(r.isCached()){i=!0;break}r=r.parent}i&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),s=new Kt,a=this.offset();return s.m=n.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(Me);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(Me),this._clearSelfAndDescendantCache(be),this}_setTransform(t){var i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var i=t.x,r=t.y,n=this.x(),s=this.y();return i!==void 0&&(n+=i),r!==void 0&&(s+=r),this.setPosition({x:n,y:s}),this}_eachAncestorReverse(t,i){var r=[],n=this.getParent(),s,a;if(!(i&&i._id===this._id)){for(r.unshift(this);n&&(!i||n._id!==i._id);)r.unshift(n),n=n.parent;for(s=r.length,a=0;a<s;a++)t(r[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return C.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return C.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return C.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return C.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return C.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&C.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Mr,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},i=this.getAttrs(),r,n,s,a,o;t.attrs={};for(r in i)n=i[r],o=C.isObject(n)&&!C._isPlainObject(n)&&!C._isArray(n),!o&&(s=typeof this[r]=="function"&&this[r],delete i[r],a=s?s.call(this):null,i[r]=n,a!==n&&(t.attrs[r]=n));return t.className=this.getClassName(),C._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,r){var n=[];i&&this._isMatch(t)&&n.push(this);for(var s=this.parent;s;){if(s===r)return n;s._isMatch(t)&&n.push(s),s=s.parent}return n}isAncestorOf(t){return!1}findAncestor(t,i,r){return this.findAncestors(t,i,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var i=t.replace(/ /g,"").split(","),r=i.length,n,s;for(n=0;n<r;n++)if(s=i[n],C.isValidSelector(s)||(C.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),C.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),C.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(za,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,i={},r){return i.target=i.target||this,r?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(be,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var i;if(t)return i=new Kt,this._eachAncestorReverse(function(n){var s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;i=this._cache.get(be)||new Kt,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var r=this.transformsEnabled();if(r==="all")i.multiply(this.getTransform());else if(r==="position"){const n=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(n-a,s-o)}return i.dirty=!1,i}getAbsoluteScale(t){for(var i=this;i;)i._isUnderCache&&(t=i),i=i.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Me,this._getTransform)}_getTransform(){var t,i,r=this._cache.get(Me)||new Kt;r.reset();var n=this.x(),s=this.y(),a=X.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(n!==0||s!==0)&&r.translate(n,s),a!==0&&r.rotate(a),(h!==0||c!==0)&&r.skew(h,c),(o!==1||l!==1)&&r.scale(o,l),(u!==0||f!==0)&&r.translate(-1*u,-1*f),r.dirty=!1,r}clone(t){var i=C.cloneObject(this.attrs),r,n,s,a,o;for(r in t)i[r]=t[r];var l=new this.constructor(i);for(r in this.eventListeners)for(n=this.eventListeners[r],s=n.length,a=0;a<s;a++)o=n[a],o.name.indexOf(Ed)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(o));return l}_toKonvaCanvas(t){t=t||{};var i=this.getClientRect(),r=this.getStage(),n=t.x!==void 0?t.x:Math.floor(i.x),s=t.y!==void 0?t.y:Math.floor(i.y),a=t.pixelRatio||1,o=new yi({width:t.width||Math.ceil(i.width)||(r?r.width():0),height:t.height||Math.ceil(i.height)||(r?r.height():0),pixelRatio:a}),l=o.getContext();return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||s)&&l.translate(-1*n,-1*s),this.drawScene(o),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var i=t.mimeType||null,r=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(i,r);return t.callback&&t.callback(n),n}toImage(t){return new Promise((i,r)=>{try{const n=t==null?void 0:t.callback;n&&delete t.callback,C._urlToImage(this.toDataURL(t),function(s){i(s),n==null||n(s)})}catch(n){r(n)}})}toBlob(t){return new Promise((i,r)=>{try{const n=t==null?void 0:t.callback;n&&delete t.callback,this.toCanvas(t).toBlob(s=>{i(s),n==null||n(s)})}catch(n){r(n)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():X.dragDistance}_off(t,i,r){var n=this.eventListeners[t],s,a,o;for(s=0;s<n.length;s++)if(a=n[s].name,o=n[s].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!r||r===o)){if(n.splice(s,1),n.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,i,r){this._fire(t+wd,{oldVal:i,newVal:r})}addName(t){if(!this.hasName(t)){var i=this.name(),r=i?i+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const i=this.name();if(!i)return!1;var r=(i||"").split(/\s/g);return r.indexOf(t)!==-1}removeName(t){var i=(this.name()||"").split(/\s/g),r=i.indexOf(t);return r!==-1&&(i.splice(r,1),this.name(i.join(" "))),this}setAttr(t,i){var r=this[Ba+C._capitalize(t)];return C._isFunction(r)?r.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(X.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){var r=this.attrs[t];r===i&&!C.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,i),this._requestDraw())}_setComponentAttr(t,i,r){var n;r!==void 0&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=r,this._fireChangeEvent(t,n,r))}_fireAndBubble(t,i,r){i&&this.nodeType===Wa&&(i.target=this);var n=(t===Fa||t===Ha)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!n){this._fire(t,i);var s=(t===Fa||t===Ha)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,i,r):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){let i=this._cache.get(_r);if(!i){i={};let n=Object.getPrototypeOf(this);for(;n;){if(!n.eventListeners){n=Object.getPrototypeOf(n);continue}for(var r in n.eventListeners){const s=n.eventListeners[r],a=i[r]||[];i[r]=s.concat(a)}n=Object.getPrototypeOf(n)}this._cache.set(_r,i)}return i[t]}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const r=this._getProtoListeners(t);if(r)for(var n=0;n<r.length;n++)r[n].handler.call(this,i);const s=this.eventListeners[t];if(s)for(var n=0;n<s.length;n++)s[n].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var i=t?t.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition(),s=r._getPointerById(i)||r._changedPointerPositions[0]||n;ut._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-n.x,y:s.y-n.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){ut._dragElements.has(this._id)||this._createDragElement(t);const r=ut._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const r=this.getStage()._getPointerById(i.pointerId);if(r){var n={x:r.x-i.offset.x,y:r.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,n,t);a?n=a:C.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}}stopDrag(t){const i=ut._dragElements.get(this._id);i&&(i.dragStatus="stopped"),ut._endDragBefore(t),ut._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ut._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var i=t.evt.button!==void 0,r=!i||X.dragButtons.indexOf(t.evt.button)>=0;if(r&&!this.isDragging()){var n=!1;ut._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(n=!0)}),n||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const i=ut._dragElements.get(this._id),r=i&&i.dragStatus==="dragging",n=i&&i.dragStatus==="ready";r?this.stopDrag():n&&ut._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const r={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return C.haveIntersection(r,this.getClientRect())}static create(t,i){return C._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){var r=G.prototype.getClassName.call(t),n=t.children,s,a,o;i&&(t.attrs.container=i),X[r]||(C.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=X[r];if(s=new l(t.attrs),n)for(a=n.length,o=0;o<a;o++)s.add(G._createNode(n[o]));return s}}G.prototype.nodeType="Node";G.prototype._attrsAffectingSize=[];G.prototype.eventListeners={};G.prototype.on.call(G.prototype,Td,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Me),this._clearSelfAndDescendantCache(be)});G.prototype.on.call(G.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(qn)});G.prototype.on.call(G.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Xn)});G.prototype.on.call(G.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Mr)});const yt=v.addGetterSetter;yt(G,"zIndex");yt(G,"absolutePosition");yt(G,"position");yt(G,"x",0,N());yt(G,"y",0,N());yt(G,"globalCompositeOperation","source-over",Ei());yt(G,"opacity",1,N());yt(G,"name","",Ei());yt(G,"id","",Ei());yt(G,"rotation",0,N());v.addComponentsGetterSetter(G,"scale",["x","y"]);yt(G,"scaleX",1,N());yt(G,"scaleY",1,N());v.addComponentsGetterSetter(G,"skew",["x","y"]);yt(G,"skewX",0,N());yt(G,"skewY",0,N());v.addComponentsGetterSetter(G,"offset",["x","y"]);yt(G,"offsetX",0,N());yt(G,"offsetY",0,N());yt(G,"dragDistance",null,N());yt(G,"width",0,N());yt(G,"height",0,N());yt(G,"listening",!0,ce());yt(G,"preventDefault",!0,ce());yt(G,"filters",null,function(e){return this._filterUpToDate=!1,e});yt(G,"visible",!0,ce());yt(G,"transformsEnabled","all",Ei());yt(G,"size");yt(G,"dragBoundFunc");yt(G,"draggable",!1,ce());v.backCompat(G,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Jt extends G{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const i=this.children||[];var r=[];return i.forEach(function(n){t(n)&&r.push(n)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(var i=0;i<t.length;i++)this.add(t[i]);return this}const r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){var r=[];return this._descendants(n=>{const s=n._isMatch(t);return s&&r.push(n),!!(s&&i)}),r}_descendants(t){let i=!1;const r=this.getChildren();for(const n of r){if(i=t(n),i)return!0;if(n.hasChildren()&&(i=n._descendants(t),i))return!0}return!1}toObject(){var t=G.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){for(var i=t.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){var i=G.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){i.add(r.clone())}),i}getAllIntersections(t){var i=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(t)&&i.push(r)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,r){i.index=r}),this._requestDraw()}drawScene(t,i){var r=this.getLayer(),n=t||r&&r.getCanvas(),s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=n&&n.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(i).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",n,i);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;var r=this.getLayer(),n=t||r&&r.hitCanvas,s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(i).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",n,i);return this}_drawChildren(t,i,r){var n,s=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const c=r===this;if(h){s.save();var u=this.getAbsoluteTransform(r),f=u.getMatrix();if(s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s.beginPath(),l)l.call(this,s,this);else{var d=this.clipX(),g=this.clipY();s.rect(d,g,a,o)}s.clip(),f=u.copy().invert().getMatrix(),s.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var _=!c&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";_&&(s.save(),s._applyGlobalCompositeOperation(this)),(n=this.children)===null||n===void 0||n.forEach(function(y){y[t](i,r)}),_&&s.restore(),h&&s.restore()}getClientRect(t){var i;t=t||{};var r=t.skipTransform,n=t.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(i=this.children)===null||i===void 0||i.forEach(function(_){if(_.visible()){var y=_.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});y.width===0&&y.height===0||(s===void 0?(s=y.x,a=y.y,o=y.x+y.width,l=y.y+y.height):(s=Math.min(s,y.x),a=Math.min(a,y.y),o=Math.max(o,y.x+y.width),l=Math.max(l,y.y+y.height)))}});for(var u=this.find("Shape"),f=!1,d=0;d<u.length;d++){var g=u[d];if(g._isVisible(this)){f=!0;break}}return f&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},r?h:this._transformedRect(h,n)}}v.addComponentsGetterSetter(Jt,"clip",["x","y","width","height"]);v.addGetterSetter(Jt,"clipX",void 0,N());v.addGetterSetter(Jt,"clipY",void 0,N());v.addGetterSetter(Jt,"clipWidth",void 0,N());v.addGetterSetter(Jt,"clipHeight",void 0,N());v.addGetterSetter(Jt,"clipFunc");const or=new Map,kl=X._global.PointerEvent!==void 0;function Pn(e){return or.get(e)}function Ms(e){return{evt:e,pointerId:e.pointerId}}function Ml(e,t){return or.get(e)===t}function Ol(e,t){Qi(e),t.getStage()&&(or.set(e,t),kl&&t._fire("gotpointercapture",Ms(new PointerEvent("gotpointercapture"))))}function Qi(e,t){const i=or.get(e);if(!i)return;const r=i.getStage();r&&r.content,or.delete(e),kl&&i._fire("lostpointercapture",Ms(new PointerEvent("lostpointercapture")))}var Rd="Stage",kd="string",Ua="px",Md="mouseout",Ll="mouseleave",Il="mouseover",Dl="mouseenter",Gl="mousemove",Nl="mousedown",Fl="mouseup",Hi="pointermove",Bi="pointerdown",ui="pointerup",Wi="pointercancel",Od="lostpointercapture",yr="pointerout",br="pointerleave",Sr="pointerover",Cr="pointerenter",Kn="contextmenu",Hl="touchstart",Bl="touchend",Wl="touchmove",zl="touchcancel",Qn="wheel",Ld=5,Id=[[Dl,"_pointerenter"],[Nl,"_pointerdown"],[Gl,"_pointermove"],[Fl,"_pointerup"],[Ll,"_pointerleave"],[Hl,"_pointerdown"],[Wl,"_pointermove"],[Bl,"_pointerup"],[zl,"_pointercancel"],[Il,"_pointerover"],[Qn,"_wheel"],[Kn,"_contextmenu"],[Bi,"_pointerdown"],[Hi,"_pointermove"],[ui,"_pointerup"],[Wi,"_pointercancel"],[Od,"_lostpointercapture"]];const Tn={mouse:{[yr]:Md,[br]:Ll,[Sr]:Il,[Cr]:Dl,[Hi]:Gl,[Bi]:Nl,[ui]:Fl,[Wi]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[yr]:"touchout",[br]:"touchleave",[Sr]:"touchover",[Cr]:"touchenter",[Hi]:Wl,[Bi]:Hl,[ui]:Bl,[Wi]:zl,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[yr]:yr,[br]:br,[Sr]:Sr,[Cr]:Cr,[Hi]:Hi,[Bi]:Bi,[ui]:ui,[Wi]:Wi,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},zi=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",oi=e=>{const t=zi(e);if(t==="pointer")return X.pointerEventsEnabled&&Tn.pointer;if(t==="touch")return Tn.touch;if(t==="mouse")return Tn.mouse};function ja(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&C.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const Dd="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Lr=[];class on extends Jt{constructor(t){super(ja(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Lr.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ja(this.attrs)}),this._checkVisibility()}_validateAdd(t){const i=t.getType()==="Layer",r=t.getType()==="FastLayer";i||r||C.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===kd){if(t.charAt(0)==="."){var i=t.slice(1);t=document.getElementsByClassName(i)[0]}else{var r;t.charAt(0)!=="#"?r=t:r=t.slice(1),t=document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t=this.children,i=t.length,r;for(r=0;r<i;r++)t[r].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Jt.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&C._isInDocument(t)&&this.container().removeChild(t);var i=Lr.indexOf(this);return i>-1&&Lr.splice(i,1),C.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(C.warn(Dd),null)}_getPointerById(t){return this._pointerPositions.find(i=>i.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t=t||{},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var i=new yi({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),r=i.getContext()._context,n=this.children;return(t.x||t.y)&&r.translate(-1*t.x,-1*t.y),n.forEach(function(s){if(s.isVisible()){var a=s._toKonvaCanvas(t);r.drawImage(a._canvas,t.x,t.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(t){if(!t)return null;var i=this.children,r=i.length,n=r-1,s;for(s=n;s>=0;s--){const a=i[s].getIntersection(t);if(a)return a}return null}_resizeDOM(){var t=this.width(),i=this.height();this.content&&(this.content.style.width=t+Ua,this.content.style.height=i+Ua),this.bufferCanvas.setSize(t,i),this.bufferHitCanvas.setSize(t,i),this.children.forEach(r=>{r.setSize({width:t,height:i}),r.draw()})}add(t,...i){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(t);var n=this.children.length;return n>Ld&&C.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),X.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return Ml(t,this)}setPointerCapture(t){Ol(t,this)}releaseCapture(t){Qi(t)}getLayers(){return this.children}_bindContentEvents(){X.isBrowser&&Id.forEach(([t,i])=>{this.content.addEventListener(t,r=>{this[i](r)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const i=oi(t.type);this._fire(i.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const i=oi(t.type);this._fire(i.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let i=this[t+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(t){const i=oi(t.type),r=zi(t.type);if(i){this.setPointersPositions(t);var n=this._getTargetShape(r),s=!ut.isDragging||X.hitOnDragEnabled;n&&s?(n._fireAndBubble(i.pointerout,{evt:t}),n._fireAndBubble(i.pointerleave,{evt:t}),this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const i=oi(t.type),r=zi(t.type);if(i){this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(ut.justDragged=!1,X["_"+r+"ListenClick"]=!0,!(a&&a.isListening()))return;X.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[r+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:t,pointerId:s.id}),n=!0;const l=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&l&&t.preventDefault()}),n||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const i=oi(t.type),r=zi(t.type);if(!i)return;ut.isDragging&&ut.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);var n=!ut.isDragging||X.hitOnDragEnabled;if(!n)return;var s={};let a=!1;var o=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const h=Pn(l.id)||this.getIntersection(l),c=l.id,u={evt:t,pointerId:c};var f=o!==h;if(f&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},u),h),o._fireAndBubble(i.pointerleave,Object.assign({},u),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,f&&(h._fireAndBubble(i.pointerover,Object.assign({},u),o),h._fireAndBubble(i.pointerenter,Object.assign({},u),o),this[r+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},u))):o&&(this._fire(i.pointerover,{evt:t,target:this,currentTarget:this,pointerId:c}),this[r+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const i=oi(t.type),r=zi(t.type);if(!i)return;this.setPointersPositions(t);const n=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=Pn(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const c=l.id,u={evt:t,pointerId:c};let f=!1;X["_"+r+"InDblClickWindow"]?(f=!0,clearTimeout(this[r+"DblTimeout"])):ut.justDragged||(X["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){X["_"+r+"InDblClickWindow"]=!1},X.dblClickWindow),h&&h.isListening()?(o=!0,this[r+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},u)),X["_"+r+"ListenClick"]&&n&&n===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},u)),f&&s&&s===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},u)))):(this[r+"ClickEndShape"]=null,X["_"+r+"ListenClick"]&&this._fire(i.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:c}),f&&this._fire(i.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),X["_"+r+"ListenClick"]=!1,t.cancelable&&r!=="touch"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Kn,{evt:t}):this._fire(Kn,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Qn,{evt:t}):this._fire(Qn,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const i=Pn(t.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(ui,Ms(t)),Qi(t.pointerId)}_lostpointercapture(t){Qi(t.pointerId)}setPointersPositions(t){var i=this._getContentPosition(),r=null,n=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})})):(r=(t.clientX-i.left)/i.scaleX,n=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:r,y:n},this._pointerPositions=[{x:r,y:n,id:C._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:n,id:C._getFirstPointerId(t)}])}_setPointerPosition(t){C.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new yi({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ks({pixelRatio:1,width:this.width(),height:this.height()}),!!X.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return C.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}on.prototype.nodeType=Rd;Rt(on);v.addGetterSetter(on,"container");var Ul="hasShadow",jl="shadowRGBA",Yl="patternImage",$l="linearGradient",Vl="radialGradient";let wr;function An(){return wr||(wr=C.createCanvasElement().getContext("2d"),wr)}const Ji={};function Gd(e){e.fill()}function Nd(e){e.stroke()}function Fd(e){e.fill()}function Hd(e){e.stroke()}function Bd(){this._clearCache(Ul)}function Wd(){this._clearCache(jl)}function zd(){this._clearCache(Yl)}function Ud(){this._clearCache($l)}function jd(){this._clearCache(Vl)}class M extends G{constructor(t){super(t);let i;for(;i=C.getRandomColor(),!(i&&!(i in Ji)););this.colorKey=i,Ji[i]=this}getContext(){return C.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return C.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Ul,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Yl,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var t=An();const i=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const r=new Kt;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(X.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=r.getMatrix(),s=typeof DOMMatrix>"u"?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);i.setTransform(s)}return i}}_getLinearGradient(){return this._getCache($l,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var i=An(),r=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),s=i.createLinearGradient(r.x,r.y,n.x,n.y),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}_getRadialGradient(){return this._getCache(Vl,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var i=An(),r=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),s=i.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}getShadowRGBA(){return this._getCache(jl,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=C.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var i=this.getStage(),r=i.bufferHitCanvas,n;return r.getContext().clear(),this.drawHit(r,null,!0),n=r.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,n[3]>0}destroy(){return G.prototype.destroy.call(this),delete Ji[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const n=t||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(n&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(n&&s&&o&&l)}setStrokeHitEnabled(t){C.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const i=t.skipTransform,r=t.relativeTo,n=this.getSelfRect(),a=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+a,l=n.height+a,h=!t.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,u=h?this.shadowOffsetY():0,f=o+Math.abs(c),d=l+Math.abs(u),g=h&&this.shadowBlur()||0,_=f+g*2,y=d+g*2,E={width:_,height:y,x:-(a/2+g)+Math.min(c,0)+n.x,y:-(a/2+g)+Math.min(u,0)+n.y};return i?E:this._transformedRect(E,r)}drawScene(t,i){var r=this.getLayer(),n=t||r.getCanvas(),s=n.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,c,u,f=n.isCache,d=i===this;if(!this.isVisible()&&!d)return this;if(a){s.save();var g=this.getAbsoluteTransform(i).getMatrix();return s.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!f){h=this.getStage(),c=h.bufferCanvas,u=c.getContext(),u.clear(),u.save(),u._applyLineJoin(this);var _=this.getAbsoluteTransform(i).getMatrix();u.transform(_[0],_[1],_[2],_[3],_[4],_[5]),o.call(this,u,this),u.restore();var y=c.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(c._canvas,0,0,c.width/y,c.height/y)}else{if(s._applyLineJoin(this),!d){var _=this.getAbsoluteTransform(i).getMatrix();s.transform(_[0],_[1],_[2],_[3],_[4],_[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(t,i,r=!1){if(!this.shouldDrawHit(i,r))return this;var n=this.getLayer(),s=t||n.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||C.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var c=this.getAbsoluteTransform(i).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var f=this.getAbsoluteTransform(i).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){var i=this._getCanvasCache(),r=this._getCachedSceneCanvas(),n=i.hit,s=n.getContext(),a=n.getWidth(),o=n.getHeight(),l,h,c,u,f,d;s.clear(),s.drawImage(r._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,c=h.length,u=C._hexToRgb(this.colorKey),f=0;f<c;f+=4)d=h[f+3],d>t?(h[f]=u.r,h[f+1]=u.g,h[f+2]=u.b,h[f+3]=255):h[f+3]=0;s.putImageData(l,0,0)}catch(g){C.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(t){return Ml(t,this)}setPointerCapture(t){Ol(t,this)}releaseCapture(t){Qi(t)}}M.prototype._fillFunc=Gd;M.prototype._strokeFunc=Nd;M.prototype._fillFuncHit=Fd;M.prototype._strokeFuncHit=Hd;M.prototype._centroid=!1;M.prototype.nodeType="Shape";Rt(M);M.prototype.eventListeners={};M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Bd);M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Wd);M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",zd);M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Ud);M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",jd);v.addGetterSetter(M,"stroke",void 0,Rl());v.addGetterSetter(M,"strokeWidth",2,N());v.addGetterSetter(M,"fillAfterStrokeEnabled",!1);v.addGetterSetter(M,"hitStrokeWidth","auto",Rs());v.addGetterSetter(M,"strokeHitEnabled",!0,ce());v.addGetterSetter(M,"perfectDrawEnabled",!0,ce());v.addGetterSetter(M,"shadowForStrokeEnabled",!0,ce());v.addGetterSetter(M,"lineJoin");v.addGetterSetter(M,"lineCap");v.addGetterSetter(M,"sceneFunc");v.addGetterSetter(M,"hitFunc");v.addGetterSetter(M,"dash");v.addGetterSetter(M,"dashOffset",0,N());v.addGetterSetter(M,"shadowColor",void 0,Ei());v.addGetterSetter(M,"shadowBlur",0,N());v.addGetterSetter(M,"shadowOpacity",1,N());v.addComponentsGetterSetter(M,"shadowOffset",["x","y"]);v.addGetterSetter(M,"shadowOffsetX",0,N());v.addGetterSetter(M,"shadowOffsetY",0,N());v.addGetterSetter(M,"fillPatternImage");v.addGetterSetter(M,"fill",void 0,Rl());v.addGetterSetter(M,"fillPatternX",0,N());v.addGetterSetter(M,"fillPatternY",0,N());v.addGetterSetter(M,"fillLinearGradientColorStops");v.addGetterSetter(M,"strokeLinearGradientColorStops");v.addGetterSetter(M,"fillRadialGradientStartRadius",0);v.addGetterSetter(M,"fillRadialGradientEndRadius",0);v.addGetterSetter(M,"fillRadialGradientColorStops");v.addGetterSetter(M,"fillPatternRepeat","repeat");v.addGetterSetter(M,"fillEnabled",!0);v.addGetterSetter(M,"strokeEnabled",!0);v.addGetterSetter(M,"shadowEnabled",!0);v.addGetterSetter(M,"dashEnabled",!0);v.addGetterSetter(M,"strokeScaleEnabled",!0);v.addGetterSetter(M,"fillPriority","color");v.addComponentsGetterSetter(M,"fillPatternOffset",["x","y"]);v.addGetterSetter(M,"fillPatternOffsetX",0,N());v.addGetterSetter(M,"fillPatternOffsetY",0,N());v.addComponentsGetterSetter(M,"fillPatternScale",["x","y"]);v.addGetterSetter(M,"fillPatternScaleX",1,N());v.addGetterSetter(M,"fillPatternScaleY",1,N());v.addComponentsGetterSetter(M,"fillLinearGradientStartPoint",["x","y"]);v.addComponentsGetterSetter(M,"strokeLinearGradientStartPoint",["x","y"]);v.addGetterSetter(M,"fillLinearGradientStartPointX",0);v.addGetterSetter(M,"strokeLinearGradientStartPointX",0);v.addGetterSetter(M,"fillLinearGradientStartPointY",0);v.addGetterSetter(M,"strokeLinearGradientStartPointY",0);v.addComponentsGetterSetter(M,"fillLinearGradientEndPoint",["x","y"]);v.addComponentsGetterSetter(M,"strokeLinearGradientEndPoint",["x","y"]);v.addGetterSetter(M,"fillLinearGradientEndPointX",0);v.addGetterSetter(M,"strokeLinearGradientEndPointX",0);v.addGetterSetter(M,"fillLinearGradientEndPointY",0);v.addGetterSetter(M,"strokeLinearGradientEndPointY",0);v.addComponentsGetterSetter(M,"fillRadialGradientStartPoint",["x","y"]);v.addGetterSetter(M,"fillRadialGradientStartPointX",0);v.addGetterSetter(M,"fillRadialGradientStartPointY",0);v.addComponentsGetterSetter(M,"fillRadialGradientEndPoint",["x","y"]);v.addGetterSetter(M,"fillRadialGradientEndPointX",0);v.addGetterSetter(M,"fillRadialGradientEndPointY",0);v.addGetterSetter(M,"fillPatternRotation",0);v.backCompat(M,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var Yd="#",$d="beforeDraw",Vd="draw",Xl=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Xd=Xl.length;class ti extends Jt{constructor(t){super(t),this.canvas=new yi,this.hitCanvas=new ks({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){G.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=G.prototype.moveUp.call(this);if(!t)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(G.prototype.moveDown.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(G.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return G.prototype.remove.call(this),t&&t.parentNode&&C._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&C.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),G.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){C.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){C.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,C.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var i=1,r=!1;;){for(let n=0;n<Xd;n++){const s=Xl[n],a=this._getIntersection({x:t.x+s.x*i,y:t.y+s.y*i}),o=a.shape;if(o)return o;if(r=!!a.antialiased,!a.antialiased)break}if(r)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,n=r[3];if(n===255){const s=C._rgbToHex(r[0],r[1],r[2]),a=Ji[Yd+s];return a?{shape:a}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(t,i){var r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire($d,{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),Jt.prototype.drawScene.call(this,n,i),this._fire(Vd,{node:this}),this}drawHit(t,i){var r=this.getLayer(),n=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Jt.prototype.drawHit.call(this,n,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return C.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}ti.prototype.nodeType="Layer";Rt(ti);v.addGetterSetter(ti,"imageSmoothingEnabled",!0);v.addGetterSetter(ti,"clearBeforeDraw",!0);v.addGetterSetter(ti,"hitGraphEnabled",!0,ce());class Os extends ti{constructor(t){super(t),this.listening(!1),C.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Os.prototype.nodeType="FastLayer";Rt(Os);class wi extends Jt{_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&C.throw("You may only add groups and shapes to groups.")}}wi.prototype.nodeType="Group";Rt(wi);var Rn=function(){return _i.performance&&_i.performance.now?function(){return _i.performance.now()}:function(){return new Date().getTime()}}();class te{constructor(t,i){this.id=te.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Rn(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){var i=[];return t?t.length>0?i=t:i=[t]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(t){var i=this.layers,r=i.length,n;for(n=0;n<r;n++)if(i[n]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t=te,i=t.animations,r=i.length,n;for(n=0;n<r;n++)if(i[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Rn(),te._addAnimation(this),this}stop(){return te._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var i=t.id,r=this.animations,n=r.length,s;for(s=0;s<n;s++)if(r[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){var t={},i=this.animations,r,n,s,a,o,l,h,c,u;for(a=0;a<i.length;a++)if(r=i[a],n=r.layers,s=r.func,r._updateFrameObject(Rn()),l=n.length,s?u=s.call(r,r.frame)!==!1:u=!0,!!u)for(o=0;o<l;o++)h=n[o],h._id!==void 0&&(t[h._id]=h);for(c in t)t.hasOwnProperty(c)&&t[c].batchDraw()}static _animationLoop(){var t=te;t.animations.length?(t._runFrames(),C.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,C.requestAnimFrame(this._animationLoop))}}te.animations=[];te.animIdCounter=0;te.animRunning=!1;var qd={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Kd=1,Ya=2,$a=3,Qd=0,Va=["fill","stroke","shadowColor"];class Jd{constructor(t,i,r,n,s,a,o){this.prop=t,this.propFunc=i,this.begin=n,this._pos=n,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(t){var i=this[t];i&&i()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Ya,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=$a,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;this.state===Ya?this.setTime(t):this.state===$a&&this.setTime(this.duration-t)}pause(){this.state=Kd,this.fire("onPause")}getTimer(){return new Date().getTime()}}class kt{constructor(t){var i=this,r=t.node,n=r._id,s,a=t.easing||Zi.Linear,o=!!t.yoyo,l;typeof t.duration>"u"?s=.3:t.duration===0?s=.001:s=t.duration,this.node=r,this._id=Qd++;var h=r.getLayer()||(r instanceof X.Stage?r.getLayers():null);h||C.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new te(function(){i.tween.onEnterFrame()},h),this.tween=new Jd(l,function(c){i._tweenFunc(c)},a,0,1,s*1e3,o),this._addListeners(),kt.attrs[n]||(kt.attrs[n]={}),kt.attrs[n][this._id]||(kt.attrs[n][this._id]={}),kt.tweens[n]||(kt.tweens[n]={});for(l in t)qd[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,i){var r=this.node,n=r._id,s,a,o,l,h,c,u,f;if(o=kt.tweens[n][t],o&&delete kt.attrs[n][o][t],s=r.getAttr(t),C._isArray(i))if(a=[],h=Math.max(i.length,s.length),t==="points"&&i.length!==s.length&&(i.length>s.length?(u=s,s=C._prepareArrayForTween(s,i,r.closed())):(c=i,i=C._prepareArrayForTween(i,s,r.closed()))),t.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-s[l]);else{var d=C.colorToRGBA(s[l]);f=C.colorToRGBA(i[l]),s[l]=d,a.push({r:f.r-d.r,g:f.g-d.g,b:f.b-d.b,a:f.a-d.a})}else for(l=0;l<h;l++)a.push(i[l]-s[l]);else Va.indexOf(t)!==-1?(s=C.colorToRGBA(s),f=C.colorToRGBA(i),a={r:f.r-s.r,g:f.g-s.g,b:f.b-s.b,a:f.a-s.a}):a=i-s;kt.attrs[n][this._id][t]={start:s,diff:a,end:i,trueEnd:c,trueStart:u},kt.tweens[n][t]=this._id}_tweenFunc(t){var i=this.node,r=kt.attrs[i._id][this._id],n,s,a,o,l,h,c,u;for(n in r){if(s=r[n],a=s.start,o=s.diff,u=s.end,C._isArray(a))if(l=[],c=Math.max(a.length,u.length),n.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((a[h]||0)+o[h]*t):l.push("rgba("+Math.round(a[h].r+o[h].r*t)+","+Math.round(a[h].g+o[h].g*t)+","+Math.round(a[h].b+o[h].b*t)+","+(a[h].a+o[h].a*t)+")");else for(h=0;h<c;h++)l.push((a[h]||0)+o[h]*t);else Va.indexOf(n)!==-1?l="rgba("+Math.round(a.r+o.r*t)+","+Math.round(a.g+o.g*t)+","+Math.round(a.b+o.b*t)+","+(a.a+o.a*t)+")":l=a+o*t;i.setAttr(n,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,i=kt.attrs[t._id][this._id];i.points&&i.points.trueEnd&&t.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,i=kt.attrs[t._id][this._id];i.points&&i.points.trueStart&&t.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t=this.node._id,i=this._id,r=kt.tweens[t],n;this.pause();for(n in r)delete kt.tweens[t][n];delete kt.attrs[t][i]}}kt.attrs={};kt.tweens={};G.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()};var i=new kt(e);i.play()};const Zi={BackEaseIn(e,t,i,r){var n=1.70158;return i*(e/=r)*e*((n+1)*e-n)+t},BackEaseOut(e,t,i,r){var n=1.70158;return i*((e=e/r-1)*e*((n+1)*e+n)+1)+t},BackEaseInOut(e,t,i,r){var n=1.70158;return(e/=r/2)<1?i/2*(e*e*(((n*=1.525)+1)*e-n))+t:i/2*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)+t},ElasticEaseIn(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r)===1?t+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s))+t)},ElasticEaseOut(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r)===1?t+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/s)+i+t)},ElasticEaseInOut(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r/2)===2?t+i:(s||(s=r*(.3*1.5)),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),e<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s))+t:n*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s)*.5+i+t)},BounceEaseOut(e,t,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,i,r){return i-Zi.BounceEaseOut(r-e,0,i,r)+t},BounceEaseInOut(e,t,i,r){return e<r/2?Zi.BounceEaseIn(e*2,0,i,r)*.5+t:Zi.BounceEaseOut(e*2-r,0,i,r)*.5+i*.5+t},EaseIn(e,t,i,r){return i*(e/=r)*e+t},EaseOut(e,t,i,r){return-i*(e/=r)*(e-2)+t},EaseInOut(e,t,i,r){return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,i,r){return i*(e/=r)*e*e*e*e+t},StrongEaseOut(e,t,i,r){return i*((e=e/r-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,i,r){return i*e/r+t}},Xa=C._assign(X,{Util:C,Transform:Kt,Node:G,Container:Jt,Stage:on,stages:Lr,Layer:ti,FastLayer:Os,Group:wi,DD:ut,Shape:M,shapes:Ji,Animation:te,Tween:kt,Easings:Zi,Context:sn,Canvas:an});class Te extends M{_sceneFunc(t){var i=X.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,r),t.arc(0,0,this.innerRadius(),i,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),r=this.clockwise(),n=X.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(n,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),l=Math.sin(Math.min(n,Math.PI/2)),h=s*(s>0?t:i),c=a*i,u=o*(o>0?t:i),f=l*(l>0?i:t);return{x:h,y:r?-1*f:u,width:c-h,height:f-u}}}Te.prototype._centroid=!0;Te.prototype.className="Arc";Te.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Rt(Te);v.addGetterSetter(Te,"innerRadius",0,N());v.addGetterSetter(Te,"outerRadius",0,N());v.addGetterSetter(Te,"angle",0,N());v.addGetterSetter(Te,"clockwise",!1,ce());function Jn(e,t,i,r,n,s,a){var o=Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2)),l=Math.sqrt(Math.pow(n-i,2)+Math.pow(s-r,2)),h=a*o/(o+l),c=a*l/(o+l),u=i-h*(n-e),f=r-h*(s-t),d=i+c*(n-e),g=r+c*(s-t);return[u,f,d,g]}function qa(e,t){var i=e.length,r=[],n,s;for(n=2;n<i-2;n+=2)s=Jn(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(e[n]),r.push(e[n+1]),r.push(s[2]),r.push(s[3]));return r}class Ae extends M{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var i=this.points(),r=i.length,n=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(r){if(t.beginPath(),t.moveTo(i[0],i[1]),n!==0&&r>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||t.quadraticCurveTo(o[l-2],o[l-1],i[r-2],i[r-1])}else if(a)for(h=2;h<r;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<r;h+=2)t.lineTo(i[h],i[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():qa(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),i=t.length,r=this.tension(),n=Jn(t[i-2],t[i-1],t[0],t[1],t[2],t[3],r),s=Jn(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],r),a=qa(t,r),o=[n[2],n[3]].concat(a).concat([s[0],s[1],t[i-2],t[i-1],s[2],s[3],n[0],n[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);return{x:i,y:n,width:r-i,height:s-n}}}Ae.prototype.className="Line";Ae.prototype._attrsAffectingSize=["points","bezier","tension"];Rt(Ae);v.addGetterSetter(Ae,"closed",!1);v.addGetterSetter(Ae,"bezier",!1);v.addGetterSetter(Ae,"tension",0,N());v.addGetterSetter(Ae,"points",[],ld());class _t extends M{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=_t.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength;this.on("dataChange.konva",function(){this.dataArray=_t.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(t){var i=this.dataArray;t.beginPath();for(var r=!1,n=0;n<i.length;n++){var s=i[n].command,a=i[n].points;switch(s){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],l=a[1],h=a[2],c=a[3],u=a[4],f=a[5],d=a[6],g=a[7],_=h>c?h:c,y=h>c?1:h/c,E=h>c?c/h:1;t.translate(o,l),t.rotate(d),t.scale(y,E),t.arc(0,0,_,u,u+f,1-g),t.scale(1/y,1/E),t.rotate(-d),t.translate(-o,-l);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(h){if(h.command==="A"){var c=h.points[4],u=h.points[5],f=h.points[4]+u,d=Math.PI/180;if(Math.abs(c-f)<d&&(d=Math.abs(c-f)),u<0)for(let g=c-d;g>f;g-=d){const _=_t.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],g,0);t.push(_.x,_.y)}else for(let g=c+d;g<f;g+=d){const _=_t.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],g,0);t.push(_.x,_.y)}}else if(h.command==="C")for(let g=0;g<=1;g+=.01){const _=_t.getPointOnCubicBezier(g,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);t.push(_.x,_.y)}else t=t.concat(h.points)});for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],isNaN(a)||(i=Math.min(i,a),r=Math.max(r,a)),isNaN(o)||(n=Math.min(n,o),s=Math.max(s,o));return{x:i,y:n,width:r-i,height:s-n}}getLength(){return this.pathLength}getPointAtLength(t){var i,r=0,n=this.dataArray.length;if(!n)return null;for(;r<n&&t>this.dataArray[r].pathLength;)t-=this.dataArray[r].pathLength,++r;if(r===n)return i=this.dataArray[r-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return i=this.dataArray[r].points.slice(0,2),{x:i[0],y:i[1]};var s=this.dataArray[r],a=s.points;switch(s.command){case"L":return _t.getPointOnLine(t,s.start.x,s.start.y,a[0],a[1]);case"C":return _t.getPointOnCubicBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return _t.getPointOnQuadraticBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],l=a[1],h=a[2],c=a[3],u=a[4],f=a[5],d=a[6];return u+=f*t/s.pathLength,_t.getPointOnEllipticalArc(o,l,h,c,u,d)}return null}static getLineLength(t,i,r,n){return Math.sqrt((r-t)*(r-t)+(n-i)*(n-i))}static getPointOnLine(t,i,r,n,s,a,o){a===void 0&&(a=i),o===void 0&&(o=r);var l=(s-r)/(n-i+1e-8),h=Math.sqrt(t*t/(1+l*l));n<i&&(h*=-1);var c=l*h,u;if(n===i)u={x:a,y:o+c};else if((o-r)/(a-i+1e-8)===l)u={x:a+h,y:o+c};else{var f,d,g=this.getLineLength(i,r,n,s),_=(a-i)*(n-i)+(o-r)*(s-r);_=_/(g*g),f=i+_*(n-i),d=r+_*(s-r);var y=this.getLineLength(a,o,f,d),E=Math.sqrt(t*t-y*y);h=Math.sqrt(E*E/(1+l*l)),n<i&&(h*=-1),c=l*h,u={x:f+h,y:d+c}}return u}static getPointOnCubicBezier(t,i,r,n,s,a,o,l,h){function c(y){return y*y*y}function u(y){return 3*y*y*(1-y)}function f(y){return 3*y*(1-y)*(1-y)}function d(y){return(1-y)*(1-y)*(1-y)}var g=l*c(t)+a*u(t)+n*f(t)+i*d(t),_=h*c(t)+o*u(t)+s*f(t)+r*d(t);return{x:g,y:_}}static getPointOnQuadraticBezier(t,i,r,n,s,a,o){function l(d){return d*d}function h(d){return 2*d*(1-d)}function c(d){return(1-d)*(1-d)}var u=a*l(t)+n*h(t)+i*c(t),f=o*l(t)+s*h(t)+r*c(t);return{x:u,y:f}}static getPointOnEllipticalArc(t,i,r,n,s,a){var o=Math.cos(a),l=Math.sin(a),h={x:r*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*o-h.y*l),y:i+(h.x*l+h.y*o)}}static parsePathData(t){if(!t)return[];var i=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var n=0;n<r.length;n++)i=i.replace(new RegExp(r[n],"g"),"|"+r[n]);var s=i.split("|"),a=[],o=[],l=0,h=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,u;for(n=1;n<s.length;n++){var f=s[n],d=f.charAt(0);for(f=f.slice(1),o.length=0;u=c.exec(f);)o.push(u[0]);for(var g=[],_=0,y=o.length;_<y;_++){if(o[_]==="00"){g.push(0,0);continue}var E=parseFloat(o[_]);isNaN(E)?g.push(0):g.push(E)}for(;g.length>0&&!isNaN(g[0]);){var b=null,S=[],w=l,A=h,R,D,L,H,W,Y,et,q,lt,Pt;switch(d){case"l":l+=g.shift(),h+=g.shift(),b="L",S.push(l,h);break;case"L":l=g.shift(),h=g.shift(),S.push(l,h);break;case"m":var Z=g.shift(),j=g.shift();if(l+=Z,h+=j,b="M",a.length>2&&a[a.length-1].command==="z"){for(var K=a.length-2;K>=0;K--)if(a[K].command==="M"){l=a[K].points[0]+Z,h=a[K].points[1]+j;break}}S.push(l,h),d="l";break;case"M":l=g.shift(),h=g.shift(),b="M",S.push(l,h),d="L";break;case"h":l+=g.shift(),b="L",S.push(l,h);break;case"H":l=g.shift(),b="L",S.push(l,h);break;case"v":h+=g.shift(),b="L",S.push(l,h);break;case"V":h=g.shift(),b="L",S.push(l,h);break;case"C":S.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),h=g.shift(),S.push(l,h);break;case"c":S.push(l+g.shift(),h+g.shift(),l+g.shift(),h+g.shift()),l+=g.shift(),h+=g.shift(),b="C",S.push(l,h);break;case"S":D=l,L=h,R=a[a.length-1],R.command==="C"&&(D=l+(l-R.points[2]),L=h+(h-R.points[3])),S.push(D,L,g.shift(),g.shift()),l=g.shift(),h=g.shift(),b="C",S.push(l,h);break;case"s":D=l,L=h,R=a[a.length-1],R.command==="C"&&(D=l+(l-R.points[2]),L=h+(h-R.points[3])),S.push(D,L,l+g.shift(),h+g.shift()),l+=g.shift(),h+=g.shift(),b="C",S.push(l,h);break;case"Q":S.push(g.shift(),g.shift()),l=g.shift(),h=g.shift(),S.push(l,h);break;case"q":S.push(l+g.shift(),h+g.shift()),l+=g.shift(),h+=g.shift(),b="Q",S.push(l,h);break;case"T":D=l,L=h,R=a[a.length-1],R.command==="Q"&&(D=l+(l-R.points[0]),L=h+(h-R.points[1])),l=g.shift(),h=g.shift(),b="Q",S.push(D,L,l,h);break;case"t":D=l,L=h,R=a[a.length-1],R.command==="Q"&&(D=l+(l-R.points[0]),L=h+(h-R.points[1])),l+=g.shift(),h+=g.shift(),b="Q",S.push(D,L,l,h);break;case"A":H=g.shift(),W=g.shift(),Y=g.shift(),et=g.shift(),q=g.shift(),lt=l,Pt=h,l=g.shift(),h=g.shift(),b="A",S=this.convertEndpointToCenterParameterization(lt,Pt,l,h,et,q,H,W,Y);break;case"a":H=g.shift(),W=g.shift(),Y=g.shift(),et=g.shift(),q=g.shift(),lt=l,Pt=h,l+=g.shift(),h+=g.shift(),b="A",S=this.convertEndpointToCenterParameterization(lt,Pt,l,h,et,q,H,W,Y);break}a.push({command:b||d,points:S,start:{x:w,y:A},pathLength:this.calcLength(w,A,b||d,S)})}(d==="z"||d==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,i,r,n){var s,a,o,l,h=_t;switch(r){case"L":return h.getLineLength(t,i,n[0],n[1]);case"C":for(s=0,a=h.getPointOnCubicBezier(0,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)o=h.getPointOnCubicBezier(l,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"Q":for(s=0,a=h.getPointOnQuadraticBezier(0,t,i,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)o=h.getPointOnQuadraticBezier(l,t,i,n[0],n[1],n[2],n[3]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"A":s=0;var c=n[4],u=n[5],f=n[4]+u,d=Math.PI/180;if(Math.abs(c-f)<d&&(d=Math.abs(c-f)),a=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),u<0)for(l=c-d;l>f;l-=d)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=c+d;l<f;l+=d)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],f,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(t,i,r,n,s,a,o,l,h){var c=h*(Math.PI/180),u=Math.cos(c)*(t-r)/2+Math.sin(c)*(i-n)/2,f=-1*Math.sin(c)*(t-r)/2+Math.cos(c)*(i-n)/2,d=u*u/(o*o)+f*f/(l*l);d>1&&(o*=Math.sqrt(d),l*=Math.sqrt(d));var g=Math.sqrt((o*o*(l*l)-o*o*(f*f)-l*l*(u*u))/(o*o*(f*f)+l*l*(u*u)));s===a&&(g*=-1),isNaN(g)&&(g=0);var _=g*o*f/l,y=g*-l*u/o,E=(t+r)/2+Math.cos(c)*_-Math.sin(c)*y,b=(i+n)/2+Math.sin(c)*_+Math.cos(c)*y,S=function(W){return Math.sqrt(W[0]*W[0]+W[1]*W[1])},w=function(W,Y){return(W[0]*Y[0]+W[1]*Y[1])/(S(W)*S(Y))},A=function(W,Y){return(W[0]*Y[1]<W[1]*Y[0]?-1:1)*Math.acos(w(W,Y))},R=A([1,0],[(u-_)/o,(f-y)/l]),D=[(u-_)/o,(f-y)/l],L=[(-1*u-_)/o,(-1*f-y)/l],H=A(D,L);return w(D,L)<=-1&&(H=Math.PI),w(D,L)>=1&&(H=0),a===0&&H>0&&(H=H-2*Math.PI),a===1&&H<0&&(H=H+2*Math.PI),[E,b,o,l,R,H,c,a]}}_t.prototype.className="Path";_t.prototype._attrsAffectingSize=["data"];Rt(_t);v.addGetterSetter(_t,"data");class ei extends Ae{_sceneFunc(t){super._sceneFunc(t);var i=Math.PI*2,r=this.points(),n=r,s=this.tension()!==0&&r.length>4;s&&(n=this.getTensionPoints());var a=this.pointerLength(),o=r.length,l,h;if(s){const f=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],r[o-2],r[o-1]],d=_t.calcLength(n[n.length-4],n[n.length-3],"C",f),g=_t.getPointOnQuadraticBezier(Math.min(1,1-a/d),f[0],f[1],f[2],f[3],f[4],f[5]);l=r[o-2]-g.x,h=r[o-1]-g.y}else l=r[o-2]-r[o-4],h=r[o-1]-r[o-3];var c=(Math.atan2(h,l)+i)%i,u=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[o-2],r[o-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-a,u/2),t.lineTo(-a,-u/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),s?(l=(n[0]+n[2])/2-r[0],h=(n[1]+n[3])/2-r[1]):(l=r[2]-r[0],h=r[3]-r[1]),t.rotate((Math.atan2(-h,-l)+i)%i),t.moveTo(0,0),t.lineTo(-a,u/2),t.lineTo(-a,-u/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x-i,y:t.y-i,width:t.width+i*2,height:t.height+i*2}}}ei.prototype.className="Arrow";Rt(ei);v.addGetterSetter(ei,"pointerLength",10,N());v.addGetterSetter(ei,"pointerWidth",10,N());v.addGetterSetter(ei,"pointerAtBeginning",!1);v.addGetterSetter(ei,"pointerAtEnding",!0);class Pi extends M{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Pi.prototype._centroid=!0;Pi.prototype.className="Circle";Pi.prototype._attrsAffectingSize=["radius"];Rt(Pi);v.addGetterSetter(Pi,"radius",0,N());class We extends M{_sceneFunc(t){var i=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),i!==r&&t.scale(1,r/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}We.prototype.className="Ellipse";We.prototype._centroid=!0;We.prototype._attrsAffectingSize=["radiusX","radiusY"];Rt(We);v.addComponentsGetterSetter(We,"radius",["x","y"]);v.addGetterSetter(We,"radiusX",0,N());v.addGetterSetter(We,"radiusY",0,N());class ne extends M{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),r=this.getHeight(),n=this.cornerRadius(),s=this.attrs.image;let a;if(s){const o=this.attrs.cropWidth,l=this.attrs.cropHeight;o&&l?a=[s,this.cropX(),this.cropY(),o,l,0,0,i,r]:a=[s,0,0,i,r]}(this.hasFill()||this.hasStroke()||n)&&(t.beginPath(),n?C.drawRoundedRectPath(t,i,r,n):t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)),s&&(n&&t.clip(),t.drawImage.apply(t,a))}_hitFunc(t){var i=this.width(),r=this.height(),n=this.cornerRadius();t.beginPath(),n?C.drawRoundedRectPath(t,i,r,n):t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i;return(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width}getHeight(){var t,i;return(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height}static fromURL(t,i,r=null){var n=C.createImageElement();n.onload=function(){var s=new ne({image:n});i(s)},n.onerror=r,n.crossOrigin="Anonymous",n.src=t}}ne.prototype.className="Image";Rt(ne);v.addGetterSetter(ne,"cornerRadius",0,As(4));v.addGetterSetter(ne,"image");v.addComponentsGetterSetter(ne,"crop",["x","y","width","height"]);v.addGetterSetter(ne,"cropX",0,N());v.addGetterSetter(ne,"cropY",0,N());v.addGetterSetter(ne,"cropWidth",0,N());v.addGetterSetter(ne,"cropHeight",0,N());var ql=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Zd="Change.konva",tg="none",Zn="up",ts="right",es="down",is="left",eg=ql.length;class Ls extends wi{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var i=this,r,n=function(){i._sync()};for(r=0;r<eg;r++)t.on(ql[r]+Zd,n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),i=this.getTag(),r,n,s,a,o,l,h;if(t&&i){switch(r=t.width(),n=t.height(),s=i.pointerDirection(),a=i.pointerWidth(),h=i.pointerHeight(),o=0,l=0,s){case Zn:o=r/2,l=-1*h;break;case ts:o=r+a,l=n/2;break;case es:o=r/2,l=n+h;break;case is:o=-1*a,l=n/2;break}i.setAttrs({x:-1*o,y:-1*l,width:r,height:n}),t.setAttrs({x:-1*o,y:-1*l})}}}Ls.prototype.className="Label";Rt(Ls);class ii extends M{_sceneFunc(t){var i=this.width(),r=this.height(),n=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,h=0,c=0,u=0;typeof o=="number"?l=h=c=u=Math.min(o,i/2,r/2):(l=Math.min(o[0]||0,i/2,r/2),h=Math.min(o[1]||0,i/2,r/2),u=Math.min(o[2]||0,i/2,r/2),c=Math.min(o[3]||0,i/2,r/2)),t.beginPath(),t.moveTo(l,0),n===Zn&&(t.lineTo((i-s)/2,0),t.lineTo(i/2,-1*a),t.lineTo((i+s)/2,0)),t.lineTo(i-h,0),t.arc(i-h,h,h,Math.PI*3/2,0,!1),n===ts&&(t.lineTo(i,(r-a)/2),t.lineTo(i+s,r/2),t.lineTo(i,(r+a)/2)),t.lineTo(i,r-u),t.arc(i-u,r-u,u,0,Math.PI/2,!1),n===es&&(t.lineTo((i+s)/2,r),t.lineTo(i/2,r+a),t.lineTo((i-s)/2,r)),t.lineTo(c,r),t.arc(c,r-c,c,Math.PI/2,Math.PI,!1),n===is&&(t.lineTo(0,(r+a)/2),t.lineTo(-1*s,r/2),t.lineTo(0,(r-a)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,i=0,r=this.pointerWidth(),n=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===Zn?(i-=n,o+=n):s===es?o+=n:s===is?(t-=r*1.5,a+=r):s===ts&&(a+=r*1.5),{x:t,y:i,width:a,height:o}}}ii.prototype.className="Tag";Rt(ii);v.addGetterSetter(ii,"pointerDirection",tg);v.addGetterSetter(ii,"pointerWidth",0,N());v.addGetterSetter(ii,"pointerHeight",0,N());v.addGetterSetter(ii,"cornerRadius",0,As(4));class ur extends M{_sceneFunc(t){var i=this.cornerRadius(),r=this.width(),n=this.height();t.beginPath(),i?C.drawRoundedRectPath(t,r,n,i):t.rect(0,0,r,n),t.closePath(),t.fillStrokeShape(this)}}ur.prototype.className="Rect";Rt(ur);v.addGetterSetter(ur,"cornerRadius",0,As(4));class ri extends M{_sceneFunc(t){const i=this._getPoints();t.beginPath(),t.moveTo(i[0].x,i[0].y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,r=[];for(var n=0;n<t;n++)r.push({x:i*Math.sin(n*2*Math.PI/t),y:-1*i*Math.cos(n*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();var i=t[0].x,r=t[0].y,n=t[0].x,s=t[0].y;return t.forEach(a=>{i=Math.min(i,a.x),r=Math.max(r,a.x),n=Math.min(n,a.y),s=Math.max(s,a.y)}),{x:i,y:n,width:r-i,height:s-n}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}ri.prototype.className="RegularPolygon";ri.prototype._centroid=!0;ri.prototype._attrsAffectingSize=["radius"];Rt(ri);v.addGetterSetter(ri,"radius",0,N());v.addGetterSetter(ri,"sides",0,N());var Ka=Math.PI*2;class ni extends M{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Ka,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Ka,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ni.prototype.className="Ring";ni.prototype._centroid=!0;ni.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Rt(ni);v.addGetterSetter(ni,"innerRadius",0,N());v.addGetterSetter(ni,"outerRadius",0,N());class me extends M{constructor(t){super(t),this._updated=!0,this.anim=new te(()=>{var i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+0],l=s[n+1],h=s[n+2],c=s[n+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),u)if(a){var f=a[i],d=r*2;t.drawImage(u,o,l,h,c,f[d+0],f[d+1],h,c)}else t.drawImage(u,o,l,h,c,0,0,h,c)}_hitFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+2],l=s[n+3];if(t.beginPath(),a){var h=a[i],c=r*2;t.rect(h[c+0],h[c+1],o,l)}else t.rect(0,0,o,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),i=this.animation(),r=this.animations(),n=r[i],s=n.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}me.prototype.className="Sprite";Rt(me);v.addGetterSetter(me,"animation");v.addGetterSetter(me,"animations");v.addGetterSetter(me,"frameOffsets");v.addGetterSetter(me,"image");v.addGetterSetter(me,"frameIndex",0,N());v.addGetterSetter(me,"frameRate",17,N());v.backCompat(me,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class ze extends M{_sceneFunc(t){var i=this.innerRadius(),r=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var s=1;s<n*2;s++){var a=s%2===0?r:i,o=a*Math.sin(s*Math.PI/n),l=-1*a*Math.cos(s*Math.PI/n);t.lineTo(o,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ze.prototype.className="Star";ze.prototype._centroid=!0;ze.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Rt(ze);v.addGetterSetter(ze,"numPoints",5,N());v.addGetterSetter(ze,"innerRadius",0,N());v.addGetterSetter(ze,"outerRadius",0,N());function Kl(e){return Array.from(e)}var li="auto",ig="center",Ii="justify",rg="Change.konva",ng="2d",Qa="-",Ql="left",sg="text",ag="Text",og="top",lg="bottom",Ja="middle",Jl="normal",hg="px ",xr=" ",cg="right",ug="word",fg="char",Za="none",kn="",Zl=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],dg=Zl.length;function gg(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!r&&(t=`"${t}"`),t}).join(", ")}var Er;function Mn(){return Er||(Er=C.createCanvasElement().getContext(ng),Er)}function pg(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function vg(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function mg(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class At extends M{constructor(t){super(mg(t)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<dg;i++)this.on(Zl[i]+rg,this._setTextData);this._setTextData()}_sceneFunc(t){var i=this.textArr,r=i.length;if(this.text()){var n=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),c=this.getWidth(),u=this.letterSpacing(),f=this.fill(),d=this.textDecoration(),g=d.indexOf("underline")!==-1,_=d.indexOf("line-through")!==-1,y,E=0,E=a/2,b=0,S=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",Ja),t.setAttr("textAlign",Ql),o===Ja?l=(this.getHeight()-r*a-n*2)/2:o===lg&&(l=this.getHeight()-r*a-n*2),t.translate(n,l+n),y=0;y<r;y++){var b=0,S=0,w=i[y],A=w.text,R=w.width,D=w.lastInParagraph,L,H,W;if(t.save(),h===cg?b+=c-R-n*2:h===ig&&(b+=(c-R-n*2)/2),g){t.save(),t.beginPath(),t.moveTo(b,E+S+Math.round(s/2)),L=A.split(" ").length-1,H=L===0,W=h===Ii&&!D?c-n*2:R,t.lineTo(b+Math.round(W),E+S+Math.round(s/2)),t.lineWidth=s/15;const Z=this._getLinearGradient();t.strokeStyle=Z||f,t.stroke(),t.restore()}if(_){t.save(),t.beginPath(),t.moveTo(b,E+S),L=A.split(" ").length-1,H=L===0,W=h===Ii&&D&&!H?c-n*2:R,t.lineTo(b+Math.round(W),E+S),t.lineWidth=s/15;const Z=this._getLinearGradient();t.strokeStyle=Z||f,t.stroke(),t.restore()}if(u!==0||h===Ii){L=A.split(" ").length-1;for(var Y=Kl(A),et=0;et<Y.length;et++){var q=Y[et];q===" "&&!D&&h===Ii&&(b+=(c-n*2-R)/L),this._partialTextX=b,this._partialTextY=E+S,this._partialText=q,t.fillStrokeShape(this),b+=this.measureSize(q).width+u}}else this._partialTextX=b,this._partialTextY=E+S,this._partialText=A,t.fillStrokeShape(this);t.restore(),r>1&&(E+=a)}}}_hitFunc(t){var i=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}setText(t){var i=C._isString(t)?t:t==null?"":t+"";return this._setAttr(sg,i),this}getWidth(){var t=this.attrs.width===li||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===li||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i=Mn(),r=this.fontSize(),n;return i.save(),i.font=this._getContextFont(),n=i.measureText(t),i.restore(),{width:n.width,height:r}}_getContextFont(){return this.fontStyle()+xr+this.fontVariant()+xr+(this.fontSize()+hg)+gg(this.fontFamily())}_addTextLine(t){this.align()===Ii&&(t=t.trim());var r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){var i=this.letterSpacing(),r=t.length;return Mn().measureText(t).width+(r?i*(r-1):0)}_setTextData(){var t=this.text().split(`
`),i=+this.fontSize(),r=0,n=this.lineHeight()*i,s=this.attrs.width,a=this.attrs.height,o=s!==li&&s!==void 0,l=a!==li&&a!==void 0,h=this.padding(),c=s-h*2,u=a-h*2,f=0,d=this.wrap(),g=d!==Za,_=d!==fg&&g,y=this.ellipsis();this.textArr=[],Mn().font=this._getContextFont();for(var E=y?this._getTextWidth(kn):0,b=0,S=t.length;b<S;++b){var w=t[b],A=this._getTextWidth(w);if(o&&A>c)for(;w.length>0;){for(var R=0,D=w.length,L="",H=0;R<D;){var W=R+D>>>1,Y=w.slice(0,W+1),et=this._getTextWidth(Y)+E;et<=c?(R=W+1,L=Y,H=et):D=W}if(L){if(_){var q,lt=w[L.length],Pt=lt===xr||lt===Qa;Pt&&H<=c?q=L.length:q=Math.max(L.lastIndexOf(xr),L.lastIndexOf(Qa))+1,q>0&&(R=q,L=L.slice(0,R),H=this._getTextWidth(L))}L=L.trimRight(),this._addTextLine(L),r=Math.max(r,H),f+=n;var Z=this._shouldHandleEllipsis(f);if(Z){this._tryToAddEllipsisToLastLine();break}if(w=w.slice(R),w=w.trimLeft(),w.length>0&&(A=this._getTextWidth(w),A<=c)){this._addTextLine(w),f+=n,r=Math.max(r,A);break}}else break}else this._addTextLine(w),f+=n,r=Math.max(r,A),this._shouldHandleEllipsis(f)&&b<S-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&f+n>u)break}this.textHeight=i,this.textWidth=r}_shouldHandleEllipsis(t){var i=+this.fontSize(),r=this.lineHeight()*i,n=this.attrs.height,s=n!==li&&n!==void 0,a=this.padding(),o=n-a*2,l=this.wrap(),h=l!==Za;return!h||s&&t+r>o}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,i=t!==li&&t!==void 0,r=this.padding(),n=t-r*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(i){var o=this._getTextWidth(a.text+kn)<n;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+kn)}}getStrokeScaleEnabled(){return!0}}At.prototype._fillFunc=pg;At.prototype._strokeFunc=vg;At.prototype.className=ag;At.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Rt(At);v.overWriteSetter(At,"width",Rs());v.overWriteSetter(At,"height",Rs());v.addGetterSetter(At,"fontFamily","Arial");v.addGetterSetter(At,"fontSize",12,N());v.addGetterSetter(At,"fontStyle",Jl);v.addGetterSetter(At,"fontVariant",Jl);v.addGetterSetter(At,"padding",0,N());v.addGetterSetter(At,"align",Ql);v.addGetterSetter(At,"verticalAlign",og);v.addGetterSetter(At,"lineHeight",1,N());v.addGetterSetter(At,"wrap",ug);v.addGetterSetter(At,"ellipsis",!1,ce());v.addGetterSetter(At,"letterSpacing",0,N());v.addGetterSetter(At,"text","",Ei());v.addGetterSetter(At,"textDecoration","");var _g="",th="normal";function eh(e){e.fillText(this.partialText,0,0)}function ih(e){e.strokeText(this.partialText,0,0)}class Ot extends M{constructor(t){super(t),this.dummyCanvas=C.createCanvasElement(),this.dataArray=[],this.dataArray=_t.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=_t.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var i=this.textDecoration(),r=this.fill(),n=this.fontSize(),s=this.glyphInfo;i==="underline"&&t.beginPath();for(var a=0;a<s.length;a++){t.save();var o=s[a].p0;t.translate(o.x,o.y),t.rotate(s[a].rotation),this.partialText=s[a].text,t.fillStrokeShape(this),i==="underline"&&(a===0&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}i==="underline"&&(t.strokeStyle=r,t.lineWidth=n/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var i=this.glyphInfo;if(i.length>=1){var r=i[0].p0;t.moveTo(r.x,r.y)}for(var n=0;n<i.length;n++){var s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return At.prototype.setText.call(this,t)}_getContextFont(){return At.prototype._getContextFont.call(this)}_getTextSize(t){var i=this.dummyCanvas,r=i.getContext("2d");r.save(),r.font=this._getContextFont();var n=r.measureText(t);return r.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,i=this._getTextSize(this.attrs.text),r=this.letterSpacing(),n=this.align(),s=this.kerningFunc();this.textWidth=i.width,this.textHeight=i.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var o=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(o+=t.dataArray[l].pathLength);var h=0;n==="center"&&(h=Math.max(0,o/2-a/2)),n==="right"&&(h=Math.max(0,o-a));for(var c=Kl(this.text()),u=this.text().split(" ").length-1,f,d,g,_=-1,y=0,E=function(){y=0;for(var et=t.dataArray,q=_+1;q<et.length;q++){if(et[q].pathLength>0)return _=q,et[q];et[q].command==="M"&&(f={x:et[q].points[0],y:et[q].points[1]})}return{}},b=function(et){var q=t._getTextSize(et).width+r;et===" "&&n==="justify"&&(q+=(o-a)/u);var lt=0,Pt=0;for(d=void 0;Math.abs(q-lt)/q>.01&&Pt<20;){Pt++;for(var Z=lt;g===void 0;)g=E(),g&&Z+g.pathLength<q&&(Z+=g.pathLength,g=void 0);if(Object.keys(g).length===0||f===void 0)return;var j=!1;switch(g.command){case"L":_t.getLineLength(f.x,f.y,g.points[0],g.points[1])>q?d=_t.getPointOnLine(q,f.x,f.y,g.points[0],g.points[1],f.x,f.y):g=void 0;break;case"A":var K=g.points[4],ot=g.points[5],tt=g.points[4]+ot;y===0?y=K+1e-8:q>lt?y+=Math.PI/180*ot/Math.abs(ot):y-=Math.PI/360*ot/Math.abs(ot),(ot<0&&y<tt||ot>=0&&y>tt)&&(y=tt,j=!0),d=_t.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],y,g.points[6]);break;case"C":y===0?q>g.pathLength?y=1e-8:y=q/g.pathLength:q>lt?y+=(q-lt)/g.pathLength/2:y=Math.max(y-(lt-q)/g.pathLength/2,0),y>1&&(y=1,j=!0),d=_t.getPointOnCubicBezier(y,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);break;case"Q":y===0?y=q/g.pathLength:q>lt?y+=(q-lt)/g.pathLength:y-=(lt-q)/g.pathLength,y>1&&(y=1,j=!0),d=_t.getPointOnQuadraticBezier(y,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3]);break}d!==void 0&&(lt=_t.getLineLength(f.x,f.y,d.x,d.y)),j&&(j=!1,g=void 0)}},S="C",w=t._getTextSize(S).width+r,A=h/w-1,R=0;R<A&&(b(S),!(f===void 0||d===void 0));R++)f=d;for(var D=0;D<c.length&&(b(c[D]),!(f===void 0||d===void 0));D++){var L=_t.getLineLength(f.x,f.y,d.x,d.y),H=0;if(s)try{H=s(c[D-1],c[D])*this.fontSize()}catch{H=0}f.x+=H,d.x+=H,this.textWidth+=H;var W=_t.getPointOnLine(H+L/2,f.x,f.y,d.x,d.y),Y=Math.atan2(d.y-f.y,d.x-f.x);this.glyphInfo.push({transposeX:W.x,transposeY:W.y,text:c[D],rotation:Y,p0:f,p1:d}),f=d}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var i=t[0]||0,r=t[0]||0,n=t[1]||0,s=t[1]||0,a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);var h=this.fontSize();return{x:i-h/2,y:n-h/2,width:r-i+h,height:s-n+h}}destroy(){return C.releaseCanvas(this.dummyCanvas),super.destroy()}}Ot.prototype._fillFunc=eh;Ot.prototype._strokeFunc=ih;Ot.prototype._fillFuncHit=eh;Ot.prototype._strokeFuncHit=ih;Ot.prototype.className="TextPath";Ot.prototype._attrsAffectingSize=["text","fontSize","data"];Rt(Ot);v.addGetterSetter(Ot,"data");v.addGetterSetter(Ot,"fontFamily","Arial");v.addGetterSetter(Ot,"fontSize",12,N());v.addGetterSetter(Ot,"fontStyle",th);v.addGetterSetter(Ot,"align","left");v.addGetterSetter(Ot,"letterSpacing",0,N());v.addGetterSetter(Ot,"textBaseline","middle");v.addGetterSetter(Ot,"fontVariant",th);v.addGetterSetter(Ot,"text",_g);v.addGetterSetter(Ot,"textDecoration",null);v.addGetterSetter(Ot,"kerningFunc",null);var rh="tr-konva",yg=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(e=>e+`.${rh}`).join(" "),to="nodesRect",bg=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Sg={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Cg="ontouchstart"in X._global;function wg(e,t){if(e==="rotater")return"crosshair";t+=C.degToRad(Sg[e]||0);var i=(C.radToDeg(t)%360+360)%360;return C._inRange(i,315+22.5,360)||C._inRange(i,0,22.5)?"ns-resize":C._inRange(i,45-22.5,45+22.5)?"nesw-resize":C._inRange(i,90-22.5,90+22.5)?"ew-resize":C._inRange(i,135-22.5,135+22.5)?"nwse-resize":C._inRange(i,180-22.5,180+22.5)?"ns-resize":C._inRange(i,225-22.5,225+22.5)?"nesw-resize":C._inRange(i,270-22.5,270+22.5)?"ew-resize":C._inRange(i,315-22.5,315+22.5)?"nwse-resize":(C.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var zr=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],eo=1e8;function xg(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function nh(e,t,i){const r=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),n=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return Object.assign(Object.assign({},e),{rotation:e.rotation+t,x:r,y:n})}function Eg(e,t){const i=xg(e);return nh(e,t,i)}function Pg(e,t,i){let r=t;for(let n=0;n<e.length;n++){const s=X.getAngle(e[n]),a=Math.abs(s-t)%(Math.PI*2);Math.min(a,Math.PI*2-a)<i&&(r=s)}return r}class vt extends wi{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(yg,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return C.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return rh+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(n=>n.isAncestorOf(this)?(C.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(n=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},a=n._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");n.on(a,s),n.on(bg.map(o=>o+`.${this._getEventNamespace()}`).join(" "),s),n.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(n)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,r=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!i)return;const n=t.getAbsolutePosition(),s=n.x-i.x,a=n.y-i.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(r)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(to),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(to,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),r){var n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(r),a=t.getAbsolutePosition(r),o=n.x*s.x-t.offsetX()*s.x,l=n.y*s.y-t.offsetY()*s.y;const h=(X.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:a.x+o*Math.cos(h)+l*Math.sin(-h),y:a.y+l*Math.cos(h)+o*Math.sin(h),width:n.width*s.x,height:n.height*s.y,rotation:h};return nh(c,-X.getAngle(i),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-eo,y:-eo,width:0,height:0,rotation:0};const i=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var u=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],f=h.getAbsoluteTransform();u.forEach(function(d){var g=f.point(d);i.push(g)})});const r=new Kt;r.rotate(-X.getAngle(this.rotation()));var n,s,a,o;i.forEach(function(h){var c=r.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),r.invert();const l=r.point({x:n,y:s});return{x:l.x,y:l.y,width:a-n,height:o-s,rotation:X.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),zr.forEach((function(t){this._createAnchor(t)}).bind(this)),this._createAnchor("rotater")}_createAnchor(t){var i=new ur({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Cg?10:"auto"}),r=this;i.on("mousedown touchstart",function(n){r._handleMouseDown(n)}),i.on("dragstart",n=>{i.stopDrag(),n.cancelBubble=!0}),i.on("dragend",n=>{n.cancelBubble=!0}),i.on("mouseenter",()=>{var n=X.getAngle(this.rotation()),s=wg(t,n);i.getStage().content&&(i.getStage().content.style.cursor=s),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){var t=new M({name:"back",width:0,height:0,draggable:!0,sceneFunc(i){var r=this.getParent(),n=r.padding();i.beginPath(),i.rect(-n,-n,this.width()+n*2,this.height()+n*2),i.moveTo(this.width()/2,-n),r.rotateEnabled()&&i.lineTo(this.width()/2,-r.rotateAnchorOffset()*C._sign(this.height())-n),i.fillStrokeShape(this)},hitFunc:(i,r)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();i.beginPath(),i.rect(-n,-n,r.width()+n*2,r.height()+n*2),i.fillStrokeShape(r)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var i=this._getNodeRect(),r=i.width,n=i.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.sin=Math.abs(n/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){var i,r,n,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),s.setAbsolutePosition(l);const c=s.getAbsolutePosition();if(!(h.x===c.x&&h.y===c.y)){if(this._movingAnchorName==="rotater"){var u=this._getNodeRect();i=s.x()-u.width/2,r=-s.y()+u.height/2;let et=Math.atan2(-r,i)+Math.PI/2;u.height<0&&(et-=Math.PI);var f=X.getAngle(this.rotation());const q=f+et,lt=X.getAngle(this.rotationSnapTolerance()),Z=Pg(this.rotationSnaps(),q,lt)-u.rotation,j=Eg(u,Z);this._fitNodesInto(j,t);return}var d=this.keepRatio()||t.shiftKey,b=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(d){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(g.x-s.x(),2)+Math.pow(g.y-s.y(),2));var _=this.findOne(".top-left").x()>g.x?-1:1,y=this.findOne(".top-left").y()>g.y?-1:1;i=n*this.cos*_,r=n*this.sin*y,this.findOne(".top-left").x(g.x-i),this.findOne(".top-left").y(g.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(d){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(s.x()-g.x,2)+Math.pow(g.y-s.y(),2));var _=this.findOne(".top-right").x()<g.x?-1:1,y=this.findOne(".top-right").y()>g.y?-1:1;i=n*this.cos*_,r=n*this.sin*y,this.findOne(".top-right").x(g.x+i),this.findOne(".top-right").y(g.y-r)}var E=s.position();this.findOne(".top-left").y(E.y),this.findOne(".bottom-right").x(E.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(d){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(g.x-s.x(),2)+Math.pow(s.y()-g.y,2));var _=g.x<s.x()?-1:1,y=s.y()<g.y?-1:1;i=n*this.cos*_,r=n*this.sin*y,s.x(g.x-i),s.y(g.y+r)}E=s.position(),this.findOne(".top-left").x(E.x),this.findOne(".bottom-right").y(E.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(d){var g=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(s.x()-g.x,2)+Math.pow(s.y()-g.y,2));var _=this.findOne(".bottom-right").x()<g.x?-1:1,y=this.findOne(".bottom-right").y()<g.y?-1:1;i=n*this.cos*_,r=n*this.sin*y,this.findOne(".bottom-right").x(g.x+i),this.findOne(".bottom-right").y(g.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var b=this.centeredScaling()||t.altKey;if(b){var S=this.findOne(".top-left"),w=this.findOne(".bottom-right"),A=S.x(),R=S.y(),D=this.getWidth()-w.x(),L=this.getHeight()-w.y();w.move({x:-A,y:-R}),S.move({x:D,y:L})}var H=this.findOne(".top-left").getAbsolutePosition();i=H.x,r=H.y;var W=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Y=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:r,width:W,height:Y,rotation:X.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var i=this.getNode();this._fire("transformend",{evt:t,target:i}),i&&this._nodes.forEach(r=>{r._fire("transformend",{evt:t,target:r})}),this._movingAnchorName=null}}_fitNodesInto(t,i){var r=this._getNodeRect();const n=1;if(C._inRange(t.width,-this.padding()*2-n,n)){this.update();return}if(C._inRange(t.height,-this.padding()*2-n,n)){this.update();return}const s=this.flipEnabled();var a=new Kt;if(a.rotate(X.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const u=a.point({x:-this.padding()*2,y:0});if(t.x+=u.x,t.y+=u.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,!s){this.update();return}}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const u=a.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const u=a.point({x:0,y:-this.padding()*2});if(t.x+=u.x,t.y+=u.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const u=a.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const u=this.boundBoxFunc()(r,t);u?t=u:C.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,l=new Kt;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/o,r.height/o);const h=new Kt;h.translate(t.x,t.y),h.rotate(t.rotation),h.scale(t.width/o,t.height/o);const c=h.multiply(l.invert());this._nodes.forEach(u=>{var f;const d=u.getParent().getAbsoluteTransform(),g=u.getTransform().copy();g.translate(u.offsetX(),u.offsetY());const _=new Kt;_.multiply(d.copy().invert()).multiply(c).multiply(d).multiply(g);const y=_.decompose();u.setAttrs(y),this._fire("transform",{evt:i,target:u}),u._fire("transform",{evt:i,target:u}),(f=u.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(C._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t,i=this._getNodeRect();this.rotation(C._getRotation(i.rotation));var r=i.width,n=i.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(h=>{h.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:n/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:n,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:n,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*C._sign(n)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),wi.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return G.prototype.toObject.call(this)}clone(t){var i=G.prototype.clone.call(this,t);return i}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function Tg(e){return e instanceof Array||C.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){zr.indexOf(t)===-1&&C.warn("Unknown anchor name: "+t+". Available names are: "+zr.join(", "))}),e||[]}vt.prototype.className="Transformer";Rt(vt);v.addGetterSetter(vt,"enabledAnchors",zr,Tg);v.addGetterSetter(vt,"flipEnabled",!0,ce());v.addGetterSetter(vt,"resizeEnabled",!0);v.addGetterSetter(vt,"anchorSize",10,N());v.addGetterSetter(vt,"rotateEnabled",!0);v.addGetterSetter(vt,"rotationSnaps",[]);v.addGetterSetter(vt,"rotateAnchorOffset",50,N());v.addGetterSetter(vt,"rotationSnapTolerance",5,N());v.addGetterSetter(vt,"borderEnabled",!0);v.addGetterSetter(vt,"anchorStroke","rgb(0, 161, 255)");v.addGetterSetter(vt,"anchorStrokeWidth",1,N());v.addGetterSetter(vt,"anchorFill","white");v.addGetterSetter(vt,"anchorCornerRadius",0,N());v.addGetterSetter(vt,"borderStroke","rgb(0, 161, 255)");v.addGetterSetter(vt,"borderStrokeWidth",1,N());v.addGetterSetter(vt,"borderDash");v.addGetterSetter(vt,"keepRatio",!0);v.addGetterSetter(vt,"centeredScaling",!1);v.addGetterSetter(vt,"ignoreStroke",!1);v.addGetterSetter(vt,"padding",0,N());v.addGetterSetter(vt,"node");v.addGetterSetter(vt,"nodes");v.addGetterSetter(vt,"boundBoxFunc");v.addGetterSetter(vt,"anchorDragBoundFunc");v.addGetterSetter(vt,"shouldOverdrawWholeArea",!1);v.addGetterSetter(vt,"useSingleNodeRotation",!0);v.backCompat(vt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Re extends M{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,X.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Re.prototype.className="Wedge";Re.prototype._centroid=!0;Re.prototype._attrsAffectingSize=["radius"];Rt(Re);v.addGetterSetter(Re,"radius",0,N());v.addGetterSetter(Re,"angle",0,N());v.addGetterSetter(Re,"clockwise",!1);v.backCompat(Re,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function io(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Ag=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Rg=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function kg(e,t){var i=e.data,r=e.width,n=e.height,s,a,o,l,h,c,u,f,d,g,_,y,E,b,S,w,A,R,D,L,H,W,Y,et,q=t+t+1,lt=r-1,Pt=n-1,Z=t+1,j=Z*(Z+1)/2,K=new io,ot=null,tt=K,rt=null,ht=null,Tt=Ag[t],Lt=Rg[t];for(o=1;o<q;o++)tt=tt.next=new io,o===Z&&(ot=tt);for(tt.next=K,u=c=0,a=0;a<n;a++){for(w=A=R=D=f=d=g=_=0,y=Z*(L=i[c]),E=Z*(H=i[c+1]),b=Z*(W=i[c+2]),S=Z*(Y=i[c+3]),f+=j*L,d+=j*H,g+=j*W,_+=j*Y,tt=K,o=0;o<Z;o++)tt.r=L,tt.g=H,tt.b=W,tt.a=Y,tt=tt.next;for(o=1;o<Z;o++)l=c+((lt<o?lt:o)<<2),f+=(tt.r=L=i[l])*(et=Z-o),d+=(tt.g=H=i[l+1])*et,g+=(tt.b=W=i[l+2])*et,_+=(tt.a=Y=i[l+3])*et,w+=L,A+=H,R+=W,D+=Y,tt=tt.next;for(rt=K,ht=ot,s=0;s<r;s++)i[c+3]=Y=_*Tt>>Lt,Y!==0?(Y=255/Y,i[c]=(f*Tt>>Lt)*Y,i[c+1]=(d*Tt>>Lt)*Y,i[c+2]=(g*Tt>>Lt)*Y):i[c]=i[c+1]=i[c+2]=0,f-=y,d-=E,g-=b,_-=S,y-=rt.r,E-=rt.g,b-=rt.b,S-=rt.a,l=u+((l=s+t+1)<lt?l:lt)<<2,w+=rt.r=i[l],A+=rt.g=i[l+1],R+=rt.b=i[l+2],D+=rt.a=i[l+3],f+=w,d+=A,g+=R,_+=D,rt=rt.next,y+=L=ht.r,E+=H=ht.g,b+=W=ht.b,S+=Y=ht.a,w-=L,A-=H,R-=W,D-=Y,ht=ht.next,c+=4;u+=r}for(s=0;s<r;s++){for(A=R=D=w=d=g=_=f=0,c=s<<2,y=Z*(L=i[c]),E=Z*(H=i[c+1]),b=Z*(W=i[c+2]),S=Z*(Y=i[c+3]),f+=j*L,d+=j*H,g+=j*W,_+=j*Y,tt=K,o=0;o<Z;o++)tt.r=L,tt.g=H,tt.b=W,tt.a=Y,tt=tt.next;for(h=r,o=1;o<=t;o++)c=h+s<<2,f+=(tt.r=L=i[c])*(et=Z-o),d+=(tt.g=H=i[c+1])*et,g+=(tt.b=W=i[c+2])*et,_+=(tt.a=Y=i[c+3])*et,w+=L,A+=H,R+=W,D+=Y,tt=tt.next,o<Pt&&(h+=r);for(c=s,rt=K,ht=ot,a=0;a<n;a++)l=c<<2,i[l+3]=Y=_*Tt>>Lt,Y>0?(Y=255/Y,i[l]=(f*Tt>>Lt)*Y,i[l+1]=(d*Tt>>Lt)*Y,i[l+2]=(g*Tt>>Lt)*Y):i[l]=i[l+1]=i[l+2]=0,f-=y,d-=E,g-=b,_-=S,y-=rt.r,E-=rt.g,b-=rt.b,S-=rt.a,l=s+((l=a+Z)<Pt?l:Pt)*r<<2,f+=w+=rt.r=i[l],d+=A+=rt.g=i[l+1],g+=R+=rt.b=i[l+2],_+=D+=rt.a=i[l+3],rt=rt.next,y+=L=ht.r,E+=H=ht.g,b+=W=ht.b,S+=Y=ht.a,w-=L,A-=H,R-=W,D-=Y,ht=ht.next,c+=r}}const Mg=function(t){var i=Math.round(this.blurRadius());i>0&&kg(t,i)};v.addGetterSetter(G,"blurRadius",0,N(),v.afterSetFilter);const Og=function(e){var t=this.brightness()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=4)i[n]+=t,i[n+1]+=t,i[n+2]+=t};v.addGetterSetter(G,"brightness",0,N(),v.afterSetFilter);const Lg=function(e){var t=Math.pow((this.contrast()+100)/100,2),i=e.data,r=i.length,n=150,s=150,a=150,o;for(o=0;o<r;o+=4)n=i[o],s=i[o+1],a=i[o+2],n/=255,n-=.5,n*=t,n+=.5,n*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,n=n<0?0:n>255?255:n,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,i[o]=n,i[o+1]=s,i[o+2]=a};v.addGetterSetter(G,"contrast",0,N(),v.afterSetFilter);const Ig=function(e){var t=this.embossStrength()*10,i=this.embossWhiteLevel()*255,r=this.embossDirection(),n=this.embossBlend(),s=0,a=0,o=e.data,l=e.width,h=e.height,c=l*4,u=h;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:C.error("Unknown emboss direction: "+r)}do{var f=(u-1)*c,d=s;u+d<1&&(d=0),u+d>h&&(d=0);var g=(u-1+d)*l*4,_=l;do{var y=f+(_-1)*4,E=a;_+E<1&&(E=0),_+E>l&&(E=0);var b=g+(_-1+E)*4,S=o[y]-o[b],w=o[y+1]-o[b+1],A=o[y+2]-o[b+2],R=S,D=R>0?R:-R,L=w>0?w:-w,H=A>0?A:-A;if(L>D&&(R=w),H>D&&(R=A),R*=t,n){var W=o[y]+R,Y=o[y+1]+R,et=o[y+2]+R;o[y]=W>255?255:W<0?0:W,o[y+1]=Y>255?255:Y<0?0:Y,o[y+2]=et>255?255:et<0?0:et}else{var q=i-R;q<0?q=0:q>255&&(q=255),o[y]=o[y+1]=o[y+2]=q}}while(--_)}while(--u)};v.addGetterSetter(G,"embossStrength",.5,N(),v.afterSetFilter);v.addGetterSetter(G,"embossWhiteLevel",.5,N(),v.afterSetFilter);v.addGetterSetter(G,"embossDirection","top-left",null,v.afterSetFilter);v.addGetterSetter(G,"embossBlend",!1,null,v.afterSetFilter);function On(e,t,i,r,n){var s=i-t,a=n-r,o;return s===0?r+a/2:a===0?r:(o=(e-t)/s,o=a*o+r,o)}const Dg=function(e){var t=e.data,i=t.length,r=t[0],n=r,s,a=t[1],o=a,l,h=t[2],c=h,u,f,d=this.enhance();if(d!==0){for(f=0;f<i;f+=4)s=t[f+0],s<r?r=s:s>n&&(n=s),l=t[f+1],l<a?a=l:l>o&&(o=l),u=t[f+2],u<h?h=u:u>c&&(c=u);n===r&&(n=255,r=0),o===a&&(o=255,a=0),c===h&&(c=255,h=0);var g,_,y,E,b,S,w,A,R;for(d>0?(_=n+d*(255-n),y=r-d*(r-0),b=o+d*(255-o),S=a-d*(a-0),A=c+d*(255-c),R=h-d*(h-0)):(g=(n+r)*.5,_=n+d*(n-g),y=r+d*(r-g),E=(o+a)*.5,b=o+d*(o-E),S=a+d*(a-E),w=(c+h)*.5,A=c+d*(c-w),R=h+d*(h-w)),f=0;f<i;f+=4)t[f+0]=On(t[f+0],r,n,y,_),t[f+1]=On(t[f+1],a,o,S,b),t[f+2]=On(t[f+2],h,c,R,A)}};v.addGetterSetter(G,"enhance",0,N(),v.afterSetFilter);const Gg=function(e){var t=e.data,i=t.length,r,n;for(r=0;r<i;r+=4)n=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=n,t[r+1]=n,t[r+2]=n};v.addGetterSetter(G,"hue",0,N(),v.afterSetFilter);v.addGetterSetter(G,"saturation",0,N(),v.afterSetFilter);v.addGetterSetter(G,"luminance",0,N(),v.afterSetFilter);const Ng=function(e){var t=e.data,i=t.length,r=1,n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o,l=r*n*Math.cos(s*Math.PI/180),h=r*n*Math.sin(s*Math.PI/180),c=.299*r+.701*l+.167*h,u=.587*r-.587*l+.33*h,f=.114*r-.114*l-.497*h,d=.299*r-.299*l-.328*h,g=.587*r+.413*l+.035*h,_=.114*r-.114*l+.293*h,y=.299*r-.3*l+1.25*h,E=.587*r-.586*l-1.05*h,b=.114*r+.886*l-.2*h,S,w,A,R;for(o=0;o<i;o+=4)S=t[o+0],w=t[o+1],A=t[o+2],R=t[o+3],t[o+0]=c*S+u*w+f*A+a,t[o+1]=d*S+g*w+_*A+a,t[o+2]=y*S+E*w+b*A+a,t[o+3]=R},Fg=function(e){var t=e.data,i=t.length,r=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a,o=r*n*Math.cos(s*Math.PI/180),l=r*n*Math.sin(s*Math.PI/180),h=.299*r+.701*o+.167*l,c=.587*r-.587*o+.33*l,u=.114*r-.114*o-.497*l,f=.299*r-.299*o-.328*l,d=.587*r+.413*o+.035*l,g=.114*r-.114*o+.293*l,_=.299*r-.3*o+1.25*l,y=.587*r-.586*o-1.05*l,E=.114*r+.886*o-.2*l,b,S,w,A;for(a=0;a<i;a+=4)b=t[a+0],S=t[a+1],w=t[a+2],A=t[a+3],t[a+0]=h*b+c*S+u*w,t[a+1]=f*b+d*S+g*w,t[a+2]=_*b+y*S+E*w,t[a+3]=A};v.addGetterSetter(G,"hue",0,N(),v.afterSetFilter);v.addGetterSetter(G,"saturation",0,N(),v.afterSetFilter);v.addGetterSetter(G,"value",0,N(),v.afterSetFilter);const Hg=function(e){var t=e.data,i=t.length,r;for(r=0;r<i;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};var Bg=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,c,u,f=0,d=0,g=0,_=0,y,E=Math.sqrt(o*o+l*l);c=s-o,u=a-l,y=Math.sqrt(c*c+u*u),E=y>E?y:E;var b=a,S=s,w,A,R=360/S*Math.PI/180,D,L;for(A=0;A<S;A+=1)for(D=Math.sin(A*R),L=Math.cos(A*R),w=0;w<b;w+=1)c=Math.floor(o+E*w/b*L),u=Math.floor(l+E*w/b*D),h=(u*s+c)*4,f=r[h+0],d=r[h+1],g=r[h+2],_=r[h+3],h=(A+w*s)*4,n[h+0]=f,n[h+1]=d,n[h+2]=g,n[h+3]=_},Wg=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,c,u,f,d,g=0,_=0,y=0,E=0,b,S=Math.sqrt(o*o+l*l);c=s-o,u=a-l,b=Math.sqrt(c*c+u*u),S=b>S?b:S;var w=a,A=s,R,D,L=i.polarRotation||0,H,W;for(c=0;c<s;c+=1)for(u=0;u<a;u+=1)f=c-o,d=u-l,R=Math.sqrt(f*f+d*d)*w/S,D=(Math.atan2(d,f)*180/Math.PI+360+L)%360,D=D*A/360,H=Math.floor(D),W=Math.floor(R),h=(W*s+H)*4,g=r[h+0],_=r[h+1],y=r[h+2],E=r[h+3],h=(u*s+c)*4,n[h+0]=g,n[h+1]=_,n[h+2]=y,n[h+3]=E};const zg=function(e){var t=e.width,i=e.height,r,n,s,a,o,l,h,c,u,f,d=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),_=Math.floor(t*(g%360)/360);if(!(d<1)){var y=C.createCanvasElement();y.width=t,y.height=i;var E=y.getContext("2d").getImageData(0,0,t,i);C.releaseCanvas(y),Bg(e,E,{polarCenterX:t/2,polarCenterY:i/2});for(var b=t/Math.pow(2,d);b<=8;)b=b*2,d-=1;b=Math.ceil(b);var S=b,w=0,A=S,R=1;for(_+b>t&&(w=S,A=0,R=-1),n=0;n<i;n+=1)for(r=w;r!==A;r+=R)s=Math.round(r+_)%t,u=(t*n+s)*4,o=E.data[u+0],l=E.data[u+1],h=E.data[u+2],c=E.data[u+3],f=(t*n+r)*4,E.data[f+0]=o,E.data[f+1]=l,E.data[f+2]=h,E.data[f+3]=c;for(n=0;n<i;n+=1)for(S=Math.floor(b),a=0;a<d;a+=1){for(r=0;r<S+1;r+=1)u=(t*n+r)*4,o=E.data[u+0],l=E.data[u+1],h=E.data[u+2],c=E.data[u+3],f=(t*n+S*2-r-1)*4,E.data[f+0]=o,E.data[f+1]=l,E.data[f+2]=h,E.data[f+3]=c;S*=2}Wg(E,e,{polarRotation:0})}};v.addGetterSetter(G,"kaleidoscopePower",2,N(),v.afterSetFilter);v.addGetterSetter(G,"kaleidoscopeAngle",0,N(),v.afterSetFilter);function Pr(e,t,i){var r=(i*e.width+t)*4,n=[];return n.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),n}function Di(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function Ug(e){for(var t=[0,0,0],i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function jg(e,t){var i=Pr(e,0,0),r=Pr(e,e.width-1,0),n=Pr(e,0,e.height-1),s=Pr(e,e.width-1,e.height-1),a=t||10;if(Di(i,r)<a&&Di(r,s)<a&&Di(s,n)<a&&Di(n,i)<a){for(var o=Ug([r,i,s,n]),l=[],h=0;h<e.width*e.height;h++){var c=Di(o,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<a?0:255}return l}}function Yg(e,t){for(var i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function $g(e,t,i){for(var r=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,u=0;u<n;u++)for(var f=0;f<n;f++){var d=o+u-s,g=l+f-s;if(d>=0&&d<i&&g>=0&&g<t){var _=d*t+g,y=r[u*n+f];c+=e[_]*y}}a[h]=c===255*8?255:0}return a}function Vg(e,t,i){for(var r=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,u=0;u<n;u++)for(var f=0;f<n;f++){var d=o+u-s,g=l+f-s;if(d>=0&&d<i&&g>=0&&g<t){var _=d*t+g,y=r[u*n+f];c+=e[_]*y}}a[h]=c>=255*4?255:0}return a}function Xg(e,t,i){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,u=0;u<n;u++)for(var f=0;f<n;f++){var d=o+u-s,g=l+f-s;if(d>=0&&d<i&&g>=0&&g<t){var _=d*t+g,y=r[u*n+f];c+=e[_]*y}}a[h]=c}return a}const qg=function(e){var t=this.threshold(),i=jg(e,t);return i&&(i=$g(i,e.width,e.height),i=Vg(i,e.width,e.height),i=Xg(i,e.width,e.height),Yg(e,i)),e};v.addGetterSetter(G,"threshold",0,N(),v.afterSetFilter);const Kg=function(e){var t=this.noise()*255,i=e.data,r=i.length,n=t/2,s;for(s=0;s<r;s+=4)i[s+0]+=n-2*n*Math.random(),i[s+1]+=n-2*n*Math.random(),i[s+2]+=n-2*n*Math.random()};v.addGetterSetter(G,"noise",.2,N(),v.afterSetFilter);const Qg=function(e){var t=Math.ceil(this.pixelSize()),i=e.width,r=e.height,n,s,a,o,l,h,c,u=Math.ceil(i/t),f=Math.ceil(r/t),d,g,_,y,E,b,S,w=e.data;if(t<=0){C.error("pixelSize value can not be <= 0");return}for(E=0;E<u;E+=1)for(b=0;b<f;b+=1){for(o=0,l=0,h=0,c=0,d=E*t,g=d+t,_=b*t,y=_+t,S=0,n=d;n<g;n+=1)if(!(n>=i))for(s=_;s<y;s+=1)s>=r||(a=(i*s+n)*4,o+=w[a+0],l+=w[a+1],h+=w[a+2],c+=w[a+3],S+=1);for(o=o/S,l=l/S,h=h/S,c=c/S,n=d;n<g;n+=1)if(!(n>=i))for(s=_;s<y;s+=1)s>=r||(a=(i*s+n)*4,w[a+0]=o,w[a+1]=l,w[a+2]=h,w[a+3]=c)}};v.addGetterSetter(G,"pixelSize",8,N(),v.afterSetFilter);const Jg=function(e){var t=Math.round(this.levels()*254)+1,i=e.data,r=i.length,n=255/t,s;for(s=0;s<r;s+=1)i[s]=Math.floor(i[s]/n)*n};v.addGetterSetter(G,"levels",.5,N(),v.afterSetFilter);const Zg=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a,o;for(a=0;a<i;a+=4)o=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255,t[a]=o*r,t[a+1]=o*n,t[a+2]=o*s,t[a+3]=t[a+3]};v.addGetterSetter(G,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(G,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(G,"blue",0,Al,v.afterSetFilter);const tp=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a=this.alpha(),o,l;for(o=0;o<i;o+=4)l=1-a,t[o]=r*a+t[o]*l,t[o+1]=n*a+t[o+1]*l,t[o+2]=s*a+t[o+2]*l};v.addGetterSetter(G,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(G,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(G,"blue",0,Al,v.afterSetFilter);v.addGetterSetter(G,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const ep=function(e){var t=e.data,i=t.length,r,n,s,a;for(r=0;r<i;r+=4)n=t[r+0],s=t[r+1],a=t[r+2],t[r+0]=Math.min(255,n*.393+s*.769+a*.189),t[r+1]=Math.min(255,n*.349+s*.686+a*.168),t[r+2]=Math.min(255,n*.272+s*.534+a*.131)},ip=function(e){var t=e.data,i=e.width,r=e.height,n=i*4,s=r;do{var a=(s-1)*n,o=i;do{var l=a+(o-1)*4,h=t[l],c=t[l+1],u=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),u>127&&(u=255-u),t[l]=h,t[l+1]=c,t[l+2]=u}while(--o)}while(--s)},rp=function(e){var t=this.threshold()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=1)i[n]=i[n]<t?0:255};v.addGetterSetter(G,"threshold",.5,N(),v.afterSetFilter);const xt=Xa.Util._assign(Xa,{Arc:Te,Arrow:ei,Circle:Pi,Ellipse:We,Image:ne,Label:Ls,Tag:ii,Line:Ae,Path:_t,Rect:ur,RegularPolygon:ri,Ring:ni,Sprite:me,Star:ze,Text:At,TextPath:Ot,Transformer:vt,Wedge:Re,Filters:{Blur:Mg,Brighten:Og,Contrast:Lg,Emboss:Ig,Enhance:Dg,Grayscale:Gg,HSL:Ng,HSV:Fg,Invert:Hg,Kaleidoscope:zg,Mask:qg,Noise:Kg,Pixelate:Qg,Posterize:Jg,RGB:Zg,RGBA:tp,Sepia:ep,Solarize:ip,Threshold:rp}});function Ur(e){if(!xt.autoDrawEnabled){const t=e.getLayer()||e.getStage();t&&t.batchDraw()}}const ro={key:!0,style:!0,elm:!0,isRootInsert:!0},Ln=".vue-konva-event";function sh(e,t,i,r){const n=e.__konvaNode,s={};let a=!1;for(let o in i){if(ro.hasOwnProperty(o))continue;const l=o.slice(0,2)==="on",h=i[o]!==t[o];if(l&&h){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),n==null||n.off(c+Ln,i[o])}!t.hasOwnProperty(o)&&(n==null||n.setAttr(o,void 0))}for(let o in t){if(ro.hasOwnProperty(o))continue;let l=o.slice(0,2)==="on";const h=i[o]!==t[o];if(l&&h){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),t[o]&&(n==null||n.off(c+Ln),n==null||n.on(c+Ln,t[o]))}!l&&(t[o]!==i[o]||r&&t[o]!==(n==null?void 0:n.getAttr(o)))&&(a=!0,s[o]=t[o])}a&&n&&(n.setAttrs(s),Ur(n))}const np="v";function sp(e){function t(i){return i!=null&&i.__konvaNode?i:i!=null&&i.parent?t(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return t(e.parent)}function ah(e){return e.component?e.component.__konvaNode||ah(e.component.subTree):null}function ap(e){const{el:t,component:i}=e,r=ah(e);if(t!=null&&t.tagName&&i&&!r){const n=t.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${n}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return r}function op(e){const t=n=>!!(n!=null&&n.hasOwnProperty("component")),i=n=>Array.isArray(n),r=n=>t(n)?[n,...r(n.children)]:i(n)?n.flatMap(r):[];return r(e.children)}function oh(e,t){const i=op(e),r=[];i.forEach(s=>{const a=ap(s);a&&r.push(a)});let n=!1;r.forEach((s,a)=>{s.getZIndex()!==a&&(s.setZIndex(a),n=!0)}),n&&Ur(t)}const lp=Jr({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(e,{attrs:t,slots:i,expose:r}){const n=ws();if(!n)return;const s=xi({}),a=de(null),o=new xt.Stage({width:e.config.width,height:e.config.height,container:document.createElement("div")});n.__konvaNode=o,c();function l(){return n==null?void 0:n.__konvaNode}function h(){return n==null?void 0:n.__konvaNode}function c(){if(!n)return;const u=s||{},f={...t,...e.config};sh(n,f,u,e.__useStrictMode),Object.assign(s,f)}return hr(()=>{a.value&&(a.value.innerHTML="",o.container(a.value)),c()}),_s(()=>{c(),oh(n.subTree,o)}),Bo(()=>{o.destroy()}),qe(()=>e.config,c,{deep:!0}),r({getStage:h,getNode:l}),console.log(t),()=>{var u;return rn("div",{ref:a,style:t==null?void 0:t.style},(u=i.default)==null?void 0:u.call(i))}}}),hp=".vue-konva-event",cp={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function up(e,t){return Jr({name:e,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:r,slots:n,expose:s}){const a=ws();if(!a)return;const o=xi({}),l=new t;a.__konvaNode=l,a.vnode.__konvaNode=l,u();function h(){return a==null?void 0:a.__konvaNode}function c(){return a==null?void 0:a.__konvaNode}function u(){if(!a)return;const d={};for(const y in a==null?void 0:a.vnode.props)y.slice(0,2)==="on"&&(d[y]=a.vnode.props[y]);const g=o||{},_={...r,...i.config,...d};sh(a,_,g,i.__useStrictMode),Object.assign(o,_)}hr(()=>{var d;const g=(d=sp(a))==null?void 0:d.__konvaNode;g&&"add"in g&&g.add(l),Ur(l)}),ys(()=>{Ur(l),l.destroy(),l.off(hp)}),_s(()=>{u(),oh(a.subTree,l)}),qe(()=>i.config,u,{deep:!0}),s({getStage:c,getNode:h});const f=cp.hasOwnProperty(e);return()=>{var d;return f?rn("template",{},(d=n.default)==null?void 0:d.call(n)):null}}})}typeof window<"u"&&!window.Konva&&require("konva");const fp={install:(e,t)=>{const i=(t==null?void 0:t.prefix)||np,r={Arc:xt.Arc,Arrow:xt.Arrow,Circle:xt.Circle,Ellipse:xt.Ellipse,FastLayer:xt.FastLayer,Group:xt.Group,Image:xt.Image,Label:xt.Label,Layer:xt.Layer,Line:xt.Line,Path:xt.Path,Rect:xt.Rect,RegularPolygon:xt.RegularPolygon,Ring:xt.Ring,Shape:xt.Shape,Sprite:xt.Sprite,Star:xt.Star,Tag:xt.Tag,Text:xt.Text,TextPath:xt.TextPath,Transformer:xt.Transformer,Wedge:xt.Wedge,...t==null?void 0:t.customNodes};[lp,...Object.entries(r).map(([n,s])=>up(n,s))].forEach(n=>{e.component(`${i}${n.name}`,n)})}};const Is=Su(Tf);Is.use(Vf);Is.use(fp);Is.mount("#app");export{ae as F,Hf as _,qt as a,jt as b,Fi as c,Jr as d,hr as e,Bo as f,It as g,rn as h,Ee as i,Ce as o,de as r,Qe as s,ft as t,xe as u,qe as w};
